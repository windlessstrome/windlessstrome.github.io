(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+KNX":function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-cognito-identity","description":"AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native","version":"1.0.0-rc.4","scripts":{"clean":"npm run remove-definitions && npm run remove-dist","build-documentation":"npm run clean && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js","test":"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"1.0.0-rc.3","@aws-sdk/credential-provider-node":"1.0.0-rc.3","@aws-sdk/fetch-http-handler":"1.0.0-rc.3","@aws-sdk/hash-node":"1.0.0-rc.3","@aws-sdk/invalid-dependency":"1.0.0-rc.3","@aws-sdk/middleware-content-length":"1.0.0-rc.3","@aws-sdk/middleware-host-header":"1.0.0-rc.3","@aws-sdk/middleware-logger":"1.0.0-rc.4","@aws-sdk/middleware-retry":"1.0.0-rc.4","@aws-sdk/middleware-serde":"1.0.0-rc.3","@aws-sdk/middleware-signing":"1.0.0-rc.3","@aws-sdk/middleware-stack":"1.0.0-rc.4","@aws-sdk/middleware-user-agent":"1.0.0-rc.3","@aws-sdk/node-config-provider":"1.0.0-rc.3","@aws-sdk/node-http-handler":"1.0.0-rc.3","@aws-sdk/protocol-http":"1.0.0-rc.3","@aws-sdk/smithy-client":"1.0.0-rc.4","@aws-sdk/types":"1.0.0-rc.3","@aws-sdk/url-parser-browser":"1.0.0-rc.3","@aws-sdk/url-parser-node":"1.0.0-rc.3","@aws-sdk/util-base64-browser":"1.0.0-rc.3","@aws-sdk/util-base64-node":"1.0.0-rc.3","@aws-sdk/util-body-length-browser":"1.0.0-rc.3","@aws-sdk/util-body-length-node":"1.0.0-rc.3","@aws-sdk/util-user-agent-browser":"1.0.0-rc.3","@aws-sdk/util-user-agent-node":"1.0.0-rc.3","@aws-sdk/util-utf8-browser":"1.0.0-rc.3","@aws-sdk/util-utf8-node":"1.0.0-rc.3","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"1.0.0-rc.3","@aws-sdk/client-iam":"1.0.0-rc.4","@types/chai":"^4.2.11","@types/mocha":"^7.0.2","@types/node":"^12.7.5","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.17.8","typescript":"~4.0.2"},"engines":{"node":">=10.0.0"},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-cognito-identity","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-cognito-identity"}}')},0:function(e,t,n){e.exports=n("zUnb")},"49sm":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"4Hbs":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n("W5Sr"),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=0;h<r.BLOCK_SIZE;h++){if(h<16)this.temp[h]=(255&e[4*h])<<24|(255&e[4*h+1])<<16|(255&e[4*h+2])<<8|255&e[4*h+3];else{var d=this.temp[h-2];this.temp[h]=(((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)+this.temp[h-7]|0)+((((d=this.temp[h-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3)+this.temp[h-16]|0)}var f=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(l+(r.KEY[h]+this.temp[h]|0)|0)|0,p=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=u,u=c,c=a,a=s+f|0,s=o,o=i,i=n,n=f+p|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=l},e}();t.RawSha256=i},"4fRq":function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},"4v+I":function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__createBinding",(function(){return d})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return g})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return C})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return E})),n.d(t,"__classPrivateFieldGet",(function(){return T})),n.d(t,"__classPrivateFieldSet",(function(){return A}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},"6MUB":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(e[i])?e[i].map((function(e){return o+encodeURIComponent(r(e))})).join(t):o+encodeURIComponent(r(e[i]))})).join(t):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(e)):""}},"7VPu":function(e,t,n){var r;e.exports=(r=n("Ib8C"),n("lPiR"),n("WYAk"),r.HmacSHA256)},"7Z+r":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));for(var r={},i={},o=0;o<256;o++){var s=o.toString(16).toLowerCase();1===s.length&&(s="0"+s),r[o]=s,i[s]=o}function a(e){for(var t="",n=0;n<e.byteLength;n++)t+=r[e[n]];return t}},AQMs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n("4v+I"),i=n("W5Sr"),o=n("4Hbs"),s=n("XWO8"),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=c(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(c(e))}catch(n){this.error=n}var t},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function c(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},CxY0:function(e,t,n){"use strict";var r=n("rWzI"),i=n("Nehr");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=b(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),h=["%","/","?",";","#"].concat(l),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n("r8II");function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(a);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(a);if(b=b.trim(),!n&&1===e.split("#").length){var w=c.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=s.exec(b);if(_){var C=(_=_[0]).toLowerCase();this.protocol=C,b=b.substr(_.length)}if(n||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===b.substr(0,2);!S||_&&m[_]||(b=b.substr(2),this.slashes=!0)}if(!m[_]&&(S||_&&!y[_])){for(var E,T,A=-1,I=0;I<d.length;I++)-1!==(O=b.indexOf(d[I]))&&(-1===A||O<A)&&(A=O);for(-1!==(T=-1===A?b.lastIndexOf("@"):b.lastIndexOf("@",A))&&(E=b.slice(0,T),b=b.slice(T+1),this.auth=decodeURIComponent(E)),A=-1,I=0;I<h.length;I++){var O;-1!==(O=b.indexOf(h[I]))&&(-1===A||O<A)&&(A=O)}-1===A&&(A=b.length),this.host=b.slice(0,A),b=b.slice(A),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var P=this.hostname.split(/\./),k=(I=0,P.length);I<k;I++){var R=P[I];if(R&&!R.match(f)){for(var M="",U=0,N=R.length;U<N;U++)R.charCodeAt(U)>127?M+="x":M+=R[U];if(!M.match(f)){var D=P.slice(0,I),L=P.slice(I+1),j=R.match(p);j&&(D.push(j[1]),L.unshift(j[2])),L.length&&(b="/"+L.join(".")+b),this.hostname=D.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),x||(this.hostname=r.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[C])for(I=0,k=l.length;I<k;I++){var F=l[I];if(-1!==b.indexOf(F)){var V=encodeURIComponent(F);V===F&&(V=escape(F)),b=b.split(F).join(V)}}var H=b.indexOf("#");-1!==H&&(this.hash=b.substr(H),b=b.slice(0,H));var q=b.indexOf("?");return-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,q)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}return n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=v||g||n.host&&e.pathname,w=b,_=n.pathname&&n.pathname.split("/")||[],C=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),b=b&&(""===p[0]||""===_[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=p;else if(p.length)_||(_=[]),_.pop(),_=_.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return C&&(n.hostname=n.host=_.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var S=_.slice(-1)[0],E=(n.host||e.host||_.length>1)&&("."===S||".."===S)||""===S,T=0,A=_.length;A>=0;A--)"."===(S=_[A])?_.splice(A,1):".."===S?(_.splice(A,1),T++):T&&(_.splice(A,1),T--);if(!b&&!w)for(;T--;T)_.unshift("..");!b||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),E&&"/"!==_.join("/").substr(-1)&&_.push("");var I,O=""===_[0]||_[0]&&"/"===_[0].charAt(0);return C&&(n.hostname=n.host=O?"":_.length?_.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),(b=b||n.host&&_.length)&&!O&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},ETIr:function(e,t,n){var r,i;e.exports=(r=n("Ib8C"),i=r.lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,c=n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=(a|c)<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},EcEN:function(e,t,n){var r=n("xDdU"),i=n("xk4V"),o=i;o.v1=r,o.v4=i,e.exports=o},"F+F2":function(e,t,n){var r;e.exports=(r=n("Ib8C"),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray)},H7XF:function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[1];return 3*(t[0]+n)/4-n},t.toByteArray=function(e){var t,n,r=u(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(l(e,a,a+s>c?c:a+s));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o=[],s=t;s<n;s+=3)o.push(r[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},I2ZF:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},Ib8C:function(e,t,n){var r;e.exports=r=r||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,u=e.min(4*c,i);if(c){for(var l=0;l<c;l+=o)this._doProcessBlock(r,l);var h=r.splice(0,c);n.sigBytes-=u}return new s.init(h,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math)},JBVX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},JEbH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},LVIV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},Nehr:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},Nt7R:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},s=function(){function e(e,t){void 0===t&&(t="WARN"),this.name=e,this.level=t}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype._log=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.level;e.LOG_LEVEL&&(i=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(i=window.LOG_LEVEL);var s=o[i],a=o[t];if(a>=s){var c=console.log.bind(console);"ERROR"===t&&console.error&&(c=console.error.bind(console)),"WARN"===t&&console.warn&&(c=console.warn.bind(console));var u="["+t+"] "+this._ts()+" "+this.name;if(1===n.length&&"string"==typeof n[0])c(u+" - "+n[0]);else if(1===n.length)c(u,n[0]);else if("string"==typeof n[0]){var l=n.slice(1);1===l.length&&(l=l[0]),c(u+" - "+n[0],l)}else c(u,n)}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["INFO"],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["INFO"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["WARN"],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["ERROR"],e))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["DEBUG"],e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["VERBOSE"],e))},e.LOG_LEVEL=null,e}()},O7od:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.initializeCalled=!1,e.initializeCompleted=!1,e.additionalValidOrigins=[],e.additionalValidOriginsRegexp=null,e.initializeCallbacks=[],e.isFramelessWindow=!1,e.parentMessageQueue=[],e.childMessageQueue=[],e.nextMessageId=0,e.handlers={},e.callbacks={},e.printCapabilityEnabled=!1,e}();t.GlobalVars=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(4),o=n(0),s=n(3);function a(e){if("id"in e.data&&"number"==typeof e.data.id){var t=e.data,n=o.GlobalVars.callbacks[t.id];n&&(n.apply(null,t.args),delete o.GlobalVars.callbacks[t.id])}else if("func"in e.data&&"string"==typeof e.data.func){var r=o.GlobalVars.handlers[(t=e.data).func];r&&r.apply(this,t.args)}}function c(e){return e===o.GlobalVars.parentWindow?o.GlobalVars.parentMessageQueue:e===o.GlobalVars.childWindow?o.GlobalVars.childMessageQueue:[]}function u(e){return e===o.GlobalVars.parentWindow?o.GlobalVars.parentOrigin:e===o.GlobalVars.childWindow?o.GlobalVars.childOrigin:null}function l(e){for(var t=u(e),n=c(e);e&&t&&n.length>0;)e.postMessage(n.shift(),t)}function h(e,t){var n=o.GlobalVars.parentWindow,r=function(e,t){return{id:o.GlobalVars.nextMessageId++,func:e,args:t||[]}}(e,t);if(o.GlobalVars.isFramelessWindow)o.GlobalVars.currentWindow&&o.GlobalVars.currentWindow.nativeInterface&&o.GlobalVars.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(r));else{var i=u(n);n&&i?n.postMessage(r,i):c(n).push(r)}return r.id}function d(e,t){var n=o.GlobalVars.childWindow,r=function(e,t){return{id:e,args:t||[]}}(e,t),i=u(n);n&&i&&n.postMessage(r,i)}function f(e,t){var n=o.GlobalVars.childWindow,r=function(e,t){return{func:e,args:t||[]}}(e,t),i=u(n);n&&i?n.postMessage(r,i):c(n).push(r)}o.GlobalVars.handlers.themeChange=function(e){o.GlobalVars.themeChangeHandler&&o.GlobalVars.themeChangeHandler(e),o.GlobalVars.childWindow&&f("themeChange",[e])},o.GlobalVars.handlers.fullScreenChange=function(e){o.GlobalVars.fullScreenChangeHandler&&o.GlobalVars.fullScreenChangeHandler(e)},o.GlobalVars.handlers.backButtonPress=function(){o.GlobalVars.backButtonPressHandler&&o.GlobalVars.backButtonPressHandler()||r.navigateBack()},o.GlobalVars.handlers.load=function(e){o.GlobalVars.loadHandler&&o.GlobalVars.loadHandler(e),o.GlobalVars.childWindow&&f("load",[e])},o.GlobalVars.handlers.beforeUnload=function(){var e=function(){h("readyToUnload",[])};o.GlobalVars.beforeUnloadHandler&&o.GlobalVars.beforeUnloadHandler(e)||e()},o.GlobalVars.handlers.changeSettings=function(){o.GlobalVars.changeSettingsHandler&&o.GlobalVars.changeSettingsHandler()},o.GlobalVars.handlers.startConversation=function(e,t,n,r){o.GlobalVars.onStartConversationHandler&&o.GlobalVars.onStartConversationHandler({subEntityId:e,conversationId:t,channelId:n,entityId:r})},o.GlobalVars.handlers.closeConversation=function(e,t,n,r){o.GlobalVars.onCloseConversationHandler&&o.GlobalVars.onCloseConversationHandler({subEntityId:e,conversationId:t,channelId:n,entityId:r})},o.GlobalVars.handlers.appButtonClick=function(){o.GlobalVars.appButtonClickHandler&&o.GlobalVars.appButtonClickHandler()},o.GlobalVars.handlers.appButtonHoverEnter=function(){o.GlobalVars.appButtonHoverEnterHandler&&o.GlobalVars.appButtonHoverEnterHandler()},o.GlobalVars.handlers.appButtonHoverLeave=function(){o.GlobalVars.appButtonHoverLeaveHandler&&o.GlobalVars.appButtonHoverLeaveHandler()},t.ensureInitialized=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!o.GlobalVars.initializeCalled)throw new Error("The library has not yet been initialized");if(o.GlobalVars.frameContext&&e&&e.length>0){for(var n=!1,r=0;r<e.length;r++)if(e[r]===o.GlobalVars.frameContext){n=!0;break}if(!n)throw new Error("This call is not allowed in the '"+o.GlobalVars.frameContext+"' context")}},t.isAPISupportedByPlatform=function(e){void 0===e&&(e=i.defaultSDKVersionForCompatCheck);var t=s.compareSDKVersions(o.GlobalVars.clientSupportedSDKVersion,e);return!isNaN(t)&&t>=0},t.processMessage=function(e){if(e&&e.data&&"object"==typeof e.data){var t=e.source||e.originalEvent&&e.originalEvent.source,n=e.origin||e.originalEvent&&e.originalEvent.origin;(function(e,t){return!(o.GlobalVars.currentWindow&&e===o.GlobalVars.currentWindow||!(o.GlobalVars.currentWindow&&o.GlobalVars.currentWindow.location&&t&&t===o.GlobalVars.currentWindow.location.origin)&&!(i.validOriginRegExp.test(t.toLowerCase())||o.GlobalVars.additionalValidOriginsRegexp&&o.GlobalVars.additionalValidOriginsRegexp.test(t.toLowerCase())))})(t,n)&&(function(e,t){!o.GlobalVars.parentWindow||o.GlobalVars.parentWindow.closed||e===o.GlobalVars.parentWindow?(o.GlobalVars.parentWindow=e,o.GlobalVars.parentOrigin=t):o.GlobalVars.childWindow&&!o.GlobalVars.childWindow.closed&&e!==o.GlobalVars.childWindow||(o.GlobalVars.childWindow=e,o.GlobalVars.childOrigin=t),o.GlobalVars.parentWindow&&o.GlobalVars.parentWindow.closed&&(o.GlobalVars.parentWindow=null,o.GlobalVars.parentOrigin=null),o.GlobalVars.childWindow&&o.GlobalVars.childWindow.closed&&(o.GlobalVars.childWindow=null,o.GlobalVars.childOrigin=null),l(o.GlobalVars.parentWindow),l(o.GlobalVars.childWindow)}(t,n),t===o.GlobalVars.parentWindow?a(e):t===o.GlobalVars.childWindow&&function(e){if("id"in e.data&&"func"in e.data){var t=e.data,n=t.func?o.GlobalVars.handlers[t.func]:null;if(n){var r=n.apply(this,t.args);void 0!==r&&d(t.id,Array.isArray(r)?r:[r])}else{var i=h(t.func,t.args);o.GlobalVars.callbacks[i]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o.GlobalVars.childWindow&&d(t.id,e)}}}}(e))}},t.handleParentMessage=a,t.processAdditionalValidOrigins=function(e){var t=o.GlobalVars.additionalValidOrigins.concat(e.filter((function(e){return"string"==typeof e&&i.userOriginUrlValidationRegExp.test(e)}))),n={};t=t.filter((function(e){return!n[e]&&(n[e]=!0,!0)})),o.GlobalVars.additionalValidOrigins=t,o.GlobalVars.additionalValidOriginsRegexp=o.GlobalVars.additionalValidOrigins.length>0?s.generateRegExpFromUrls(o.GlobalVars.additionalValidOrigins):null},t.waitForMessageQueue=function(e,t){var n=o.GlobalVars.currentWindow.setInterval((function(){0===c(e).length&&(clearInterval(n),t())}),100)},t.sendMessageRequestToParent=h,t.sendMessageEventToChild=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.rigel="rigel"}(t.HostClientType||(t.HostClientType={})),function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage"}(t.FrameContexts||(t.FrameContexts={})),function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"}(t.TeamType||(t.TeamType={})),function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"}(t.UserTeamRole||(t.UserTeamRole={})),function(e){e.Large="large",e.Medium="medium",e.Small="small"}(t.TaskModuleDimension||(t.TaskModuleDimension={})),function(e){e.Regular="Regular",e.Private="Private"}(t.ChannelType||(t.ChannelType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);function i(e){for(var t="^",n=e.split("."),r=0;r<n.length;r++)t+=(r>0?"[.]":"")+n[r].replace("*","[^/^.]+");return t+"$"}t.generateRegExpFromUrls=function(e){for(var t="",n=0;n<e.length;n++)t+=(0===n?"":"|")+i(e[n]);return new RegExp(t)},t.getGenericOnCompleteHandler=function(e){return function(t,n){if(!t)throw new Error(e||n)}},t.compareSDKVersions=function(e,t){if("string"!=typeof e||"string"!=typeof t)return NaN;var n=e.split("."),r=t.split(".");function i(e){return/^\d+$/.test(e)}if(!n.every(i)||!r.every(i))return NaN;for(;n.length<r.length;)n.push("0");for(;r.length<n.length;)r.push("0");for(var o=0;o<n.length;++o)if(n[o]!=r[o])return n[o]>r[o]?1:-1;return 0},t.generateGUID=function(){return r.v4()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.version="1.8.0",t.defaultSDKVersionForCompatCheck="1.6.0",t.validOrigins=["https://teams.microsoft.com","https://teams.microsoft.us","https://gov.teams.microsoft.us","https://dod.teams.microsoft.us","https://int.teams.microsoft.com","https://devspaces.skype.com","https://ssauth.skype.com","https://local.teams.office.com","https://local.teams.office.com:8080","https://msft.spoppe.com","https://*.sharepoint.com","https://*.sharepoint-df.com","https://*.sharepointonline.com","https://outlook.office.com","https://outlook-sdf.office.com","https://*.teams.microsoft.com","https://www.office.com","https://word.office.com","https://excel.office.com","https://powerpoint.office.com","https://www.officeppe.com","https://*.www.office.com","http://127.0.0.1:5000"],t.validOriginRegExp=r.generateRegExpFromUrls(t.validOrigins),t.userOriginUrlValidationRegExp=/^https\:\/\//},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"}(t.ErrorCode||(t.ErrorCode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(4),s=n(9),a=n(3),c=n(10),u=n(2);function l(e,t){if(!i.GlobalVars.initializeCalled){i.GlobalVars.initializeCalled=!0;var n=function(e){return r.processMessage(e)};i.GlobalVars.currentWindow=i.GlobalVars.currentWindow||window,i.GlobalVars.parentWindow=i.GlobalVars.currentWindow.parent!==i.GlobalVars.currentWindow.self?i.GlobalVars.currentWindow.parent:i.GlobalVars.currentWindow.opener,i.GlobalVars.parentWindow?i.GlobalVars.currentWindow.addEventListener("message",n,!1):(i.GlobalVars.isFramelessWindow=!0,window.onNativeMessage=r.handleParentMessage);try{i.GlobalVars.parentOrigin="*";var a=r.sendMessageRequestToParent("initialize",[o.version]);i.GlobalVars.callbacks[a]=function(e,t,n){void 0===n&&(n=o.defaultSDKVersionForCompatCheck),i.GlobalVars.frameContext=e,i.GlobalVars.hostClientType=t,i.GlobalVars.clientSupportedSDKVersion=n,i.GlobalVars.initializeCallbacks.forEach((function(e){return e()})),i.GlobalVars.initializeCallbacks=[],i.GlobalVars.initializeCompleted=!0}}finally{i.GlobalVars.parentOrigin=null}this._uninitialize=function(){i.GlobalVars.frameContext&&(d(null),f(null),p(null),m(null),g(null),c.logs.registerGetLogHandler(null)),i.GlobalVars.frameContext===u.FrameContexts.settings&&s.settings.registerOnSaveHandler(null),i.GlobalVars.frameContext===u.FrameContexts.remove&&s.settings.registerOnRemoveHandler(null),i.GlobalVars.isFramelessWindow||i.GlobalVars.currentWindow.removeEventListener("message",n,!1),i.GlobalVars.initializeCalled=!1,i.GlobalVars.initializeCompleted=!1,i.GlobalVars.initializeCallbacks=[],i.GlobalVars.additionalValidOrigins=[],i.GlobalVars.parentWindow=null,i.GlobalVars.parentOrigin=null,i.GlobalVars.parentMessageQueue=[],i.GlobalVars.childWindow=null,i.GlobalVars.childOrigin=null,i.GlobalVars.childMessageQueue=[],i.GlobalVars.nextMessageId=0,i.GlobalVars.callbacks={},i.GlobalVars.frameContext=null,i.GlobalVars.hostClientType=null,i.GlobalVars.isFramelessWindow=!1}}Array.isArray(t)&&r.processAdditionalValidOrigins(t),e&&(i.GlobalVars.initializeCompleted?e():i.GlobalVars.initializeCallbacks.push(e))}function h(){window.print()}function d(e){r.ensureInitialized(),i.GlobalVars.themeChangeHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["themeChange"])}function f(e){r.ensureInitialized(),i.GlobalVars.fullScreenChangeHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["fullScreen"])}function p(e){r.ensureInitialized(),i.GlobalVars.backButtonPressHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["backButton"])}function g(e){r.ensureInitialized(),i.GlobalVars.loadHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["load"])}function m(e){r.ensureInitialized(),i.GlobalVars.beforeUnloadHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["beforeUnload"])}function y(e){r.ensureInitialized(u.FrameContexts.content),r.sendMessageRequestToParent("setFrameContext",[e])}t.initialize=l,t._initialize=function(e){i.GlobalVars.currentWindow=e},t._uninitialize=function(){},t.enablePrintCapability=function(){i.GlobalVars.printCapabilityEnabled||(i.GlobalVars.printCapabilityEnabled=!0,r.ensureInitialized(),document.addEventListener("keydown",(function(e){(e.ctrlKey||e.metaKey)&&80===e.keyCode&&(h(),e.cancelBubble=!0,e.preventDefault(),e.stopImmediatePropagation())})))},t.print=h,t.getContext=function(e){r.ensureInitialized();var t=r.sendMessageRequestToParent("getContext");i.GlobalVars.callbacks[t]=function(t){t.frameContext||(t.frameContext=i.GlobalVars.frameContext),e(t)}},t.registerOnThemeChangeHandler=d,t.registerFullScreenHandler=f,t.registerAppButtonClickHandler=function(e){r.ensureInitialized(u.FrameContexts.content),i.GlobalVars.appButtonClickHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["appButtonClick"])},t.registerAppButtonHoverEnterHandler=function(e){r.ensureInitialized(u.FrameContexts.content),i.GlobalVars.appButtonHoverEnterHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["appButtonHoverEnter"])},t.registerAppButtonHoverLeaveHandler=function(e){r.ensureInitialized(u.FrameContexts.content),i.GlobalVars.appButtonHoverLeaveHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["appButtonHoverLeave"])},t.registerBackButtonHandler=p,t.navigateBack=function(e){r.ensureInitialized();var t=r.sendMessageRequestToParent("navigateBack",[]);i.GlobalVars.callbacks[t]=e||a.getGenericOnCompleteHandler("Back navigation is not supported in the current client or context.")},t.registerOnLoadHandler=g,t.registerBeforeUnloadHandler=m,t.registerChangeSettingsHandler=function(e){r.ensureInitialized(u.FrameContexts.content),i.GlobalVars.changeSettingsHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["changeSettings"])},t.navigateCrossDomain=function(e,t){r.ensureInitialized(u.FrameContexts.content,u.FrameContexts.sidePanel,u.FrameContexts.settings,u.FrameContexts.remove,u.FrameContexts.task);var n=r.sendMessageRequestToParent("navigateCrossDomain",[e]);i.GlobalVars.callbacks[n]=t||a.getGenericOnCompleteHandler("Cross-origin navigation is only supported for URLs matching the pattern registered in the manifest.")},t.getTabInstances=function(e,t){r.ensureInitialized();var n=r.sendMessageRequestToParent("getTabInstances",[t]);i.GlobalVars.callbacks[n]=e},t.getMruTabInstances=function(e,t){r.ensureInitialized();var n=r.sendMessageRequestToParent("getMruTabInstances",[t]);i.GlobalVars.callbacks[n]=e},t.shareDeepLink=function(e){r.ensureInitialized(u.FrameContexts.content,u.FrameContexts.sidePanel),r.sendMessageRequestToParent("shareDeepLink",[e.subEntityId,e.subEntityLabel,e.subEntityWebUrl])},t.executeDeepLink=function(e,t){r.ensureInitialized(u.FrameContexts.content,u.FrameContexts.sidePanel,u.FrameContexts.settings,u.FrameContexts.task);var n=r.sendMessageRequestToParent("executeDeepLink",[e]);i.GlobalVars.callbacks[n]=t||a.getGenericOnCompleteHandler()},t.navigateToTab=function(e,t){r.ensureInitialized();var n=r.sendMessageRequestToParent("navigateToTab",[e]);i.GlobalVars.callbacks[n]=t||a.getGenericOnCompleteHandler("Invalid internalTabInstanceId and/or channelId were/was provided")},t.setFrameContext=y,t.initializeWithFrameContext=function(e,t,n){l(t,n),y(e)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(2),s=n(3);!function(e){var t,n;i.GlobalVars.handlers["settings.save"]=function(e){var n=new a(e);t?t(n):n.notifySuccess()},i.GlobalVars.handlers["settings.remove"]=function(){var e=new c;n?n(e):e.notifySuccess()},e.setValidityState=function(e){r.ensureInitialized(o.FrameContexts.settings,o.FrameContexts.remove),r.sendMessageRequestToParent("settings.setValidityState",[e])},e.getSettings=function(e){r.ensureInitialized(o.FrameContexts.content,o.FrameContexts.settings,o.FrameContexts.remove);var t=r.sendMessageRequestToParent("settings.getSettings");i.GlobalVars.callbacks[t]=e},e.setSettings=function(e,t){r.ensureInitialized(o.FrameContexts.content,o.FrameContexts.settings);var n=r.sendMessageRequestToParent("settings.setSettings",[e]);i.GlobalVars.callbacks[n]=t||s.getGenericOnCompleteHandler()},e.registerOnSaveHandler=function(e){r.ensureInitialized(o.FrameContexts.settings),t=e,e&&r.sendMessageRequestToParent("registerHandler",["save"])},e.registerOnRemoveHandler=function(e){r.ensureInitialized(o.FrameContexts.remove),n=e,e&&r.sendMessageRequestToParent("registerHandler",["remove"])};var a=function(){function e(e){this.notified=!1,this.result=e||{}}return e.prototype.notifySuccess=function(){this.ensureNotNotified(),r.sendMessageRequestToParent("settings.save.success"),this.notified=!0},e.prototype.notifyFailure=function(e){this.ensureNotNotified(),r.sendMessageRequestToParent("settings.save.failure",[e]),this.notified=!0},e.prototype.ensureNotNotified=function(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")},e}(),c=function(){function e(){this.notified=!1}return e.prototype.notifySuccess=function(){this.ensureNotNotified(),r.sendMessageRequestToParent("settings.remove.success"),this.notified=!0},e.prototype.notifyFailure=function(e){this.ensureNotNotified(),r.sendMessageRequestToParent("settings.remove.failure",[e]),this.notified=!0},e.prototype.ensureNotNotified=function(){if(this.notified)throw new Error("The removeEvent may only notify success or failure once.")},e}()}(t.settings||(t.settings={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0);!function(e){i.GlobalVars.handlers["log.request"]=function(){if(i.GlobalVars.getLogHandler){var e=i.GlobalVars.getLogHandler();r.sendMessageRequestToParent("log.receive",[e])}},e.registerGetLogHandler=function(e){r.ensureInitialized(),i.GlobalVars.getLogHandler=e,e&&r.sendMessageRequestToParent("registerHandler",["log.request"])}}(t.logs||(t.logs={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(2),s=n(3),a=function(){function e(){}return e.prototype.postMessage=function(e,t){r.ensureInitialized();var n=r.sendMessageRequestToParent("messageForChild",[e]);i.GlobalVars.callbacks[n]=t||s.getGenericOnCompleteHandler()},e.prototype.addEventListener=function(e,t){"message"===e&&(i.GlobalVars.handlers.messageForParent=t)},e}();t.ChildAppWindow=a;var c=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.postMessage=function(e,t){r.ensureInitialized(o.FrameContexts.task);var n=r.sendMessageRequestToParent("messageForParent",[e]);i.GlobalVars.callbacks[n]=t||s.getGenericOnCompleteHandler()},e.prototype.addEventListener=function(e,t){"message"===e&&(i.GlobalVars.handlers.messageForChild=t)},e}();t.ParentAppWindow=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(5),s=n(1),a=n(2),c=n(3),u=n(27);!function(e){var t="1.8.0";!function(e){e.Base64="base64",e.ID="id"}(e.FileFormat||(e.FileFormat={}));var n=function(){};e.File=n,e.captureImage=function(e){if(!e)throw new Error("[captureImage] Callback cannot be null");if(s.ensureInitialized(a.FrameContexts.content,a.FrameContexts.task),i.GlobalVars.isFramelessWindow)if(s.isAPISupportedByPlatform("1.7.0")){var t=s.sendMessageRequestToParent("captureImage");i.GlobalVars.callbacks[t]=e}else e({errorCode:o.ErrorCode.OLD_PLATFORM},void 0);else e({errorCode:o.ErrorCode.NOT_SUPPORTED_ON_PLATFORM},void 0)};var l=function(e){function n(t){void 0===t&&(t=null);var n=e.call(this)||this;return t&&(n.content=t.content,n.format=t.format,n.mimeType=t.mimeType,n.name=t.name,n.preview=t.preview,n.size=t.size),n}return r(n,e),n.prototype.getMedia=function(e){if(!e)throw new Error("[get Media] Callback cannot be null");if(s.ensureInitialized(a.FrameContexts.content,a.FrameContexts.task),s.isAPISupportedByPlatform(t))if(u.validateGetMediaInputs(this.mimeType,this.format,this.content)){var n=c.generateGUID(),r={mediaMimeType:this.mimeType,assembleAttachment:[]};this.content&&e&&s.sendMessageRequestToParent("getMedia",[n,this.content]),i.GlobalVars.handlers["getMedia"+n]=function(t){if(e){var s=JSON.parse(t);if(s.error)e(s.error,null),i.GlobalVars.handlers["getMedia"+n]=null;else if(s.mediaChunk)if(s.mediaChunk.chunkSequence<=0){var a=u.createFile(r.assembleAttachment,r.mediaMimeType);e(s.error,a),i.GlobalVars.handlers["getMedia"+n]=null}else{var c=u.decodeAttachment(s.mediaChunk,r.mediaMimeType);r.assembleAttachment.push(c)}else e({errorCode:o.ErrorCode.INTERNAL_ERROR,message:"data receieved is null"},null),i.GlobalVars.handlers["getMedia"+n]=null}}}else e({errorCode:o.ErrorCode.INVALID_ARGUMENTS},null);else e({errorCode:o.ErrorCode.OLD_PLATFORM},null)},n}(n);e.Media=l,function(e){e[e.Photo=1]="Photo",e[e.Document=2]="Document",e[e.Whiteboard=3]="Whiteboard",e[e.BusinessCard=4]="BusinessCard"}(e.CameraStartMode||(e.CameraStartMode={})),function(e){e[e.Camera=1]="Camera",e[e.Gallery=2]="Gallery"}(e.Source||(e.Source={})),function(e){e[e.Image=1]="Image",e[e.Audio=4]="Audio"}(e.MediaType||(e.MediaType={})),function(e){e[e.ID=1]="ID",e[e.URL=2]="URL"}(e.ImageUriType||(e.ImageUriType={})),e.selectMedia=function(e,n){if(!n)throw new Error("[select Media] Callback cannot be null");if(s.ensureInitialized(a.FrameContexts.content,a.FrameContexts.task),s.isAPISupportedByPlatform(t))if(u.validateSelectMediaInputs(e)){var r=s.sendMessageRequestToParent("selectMedia",[e]);i.GlobalVars.callbacks[r]=function(e,t){if(t){for(var r=[],i=0,o=t;i<o.length;i++)r.push(new l(o[i]));n(e,r)}else n(e,null)}}else n({errorCode:o.ErrorCode.INVALID_ARGUMENTS},null);else n({errorCode:o.ErrorCode.OLD_PLATFORM},null)},e.viewImages=function(e,n){if(!n)throw new Error("[view images] Callback cannot be null");if(s.ensureInitialized(a.FrameContexts.content,a.FrameContexts.task),s.isAPISupportedByPlatform(t))if(u.validateViewImagesInput(e)){var r=s.sendMessageRequestToParent("viewImages",[e]);i.GlobalVars.callbacks[r]=n}else n({errorCode:o.ErrorCode.INVALID_ARGUMENTS});else n({errorCode:o.ErrorCode.OLD_PLATFORM})}}(t.media||(t.media={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(14)),r(n(23))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15);t.bot=r.bot;var i=n(19);t.menus=i.menus;var o=n(10);t.logs=o.logs;var s=n(20);t.NotificationTypes=s.NotificationTypes;var a=n(21);t.enterFullscreen=a.enterFullscreen,t.exitFullscreen=a.exitFullscreen,t.getChatMembers=a.getChatMembers,t.getConfigSetting=a.getConfigSetting,t.getUserJoinedTeams=a.getUserJoinedTeams,t.openFilePreview=a.openFilePreview,t.sendCustomMessage=a.sendCustomMessage,t.showNotification=a.showNotification,t.sendCustomEvent=a.sendCustomEvent,t.registerCustomHandler=a.registerCustomHandler,t.uploadCustomApp=a.uploadCustomApp;var c=n(22);t.conversations=c.conversations},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1);!function(e){e.sendQuery=function(e,t,n){i.ensureInitialized();var o=i.sendMessageRequestToParent("bot.executeQuery",[e]);r.GlobalVars.callbacks[o]=function(e,r){e?t(r):n(r)}},e.getSupportedCommands=function(e,t){i.ensureInitialized();var n=i.sendMessageRequestToParent("bot.getSupportedCommands");r.GlobalVars.callbacks[n]=function(n,r){n?e(r):t(r)}},e.authenticate=function(e,t,n){i.ensureInitialized();var o=i.sendMessageRequestToParent("bot.authenticate",[e]);r.GlobalVars.callbacks[o]=function(e,r){e?t(r):n(r)}},function(e){e.Results="Results",e.Auth="Auth"}(e.ResponseType||(e.ResponseType={}))}(t.bot||(t.bot={}))},function(e,t,n){var r=n(17),i=n(18),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r,i,o=n(7),s=n(8),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],h=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var f=o();null==h&&(h=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,m=p-a+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||p>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=g,i=d;var y=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var v=p/4294967296*1e4&268435455;l[u++]=v>>>8&255,l[u++]=255&v,l[u++]=v>>>24&15|16,l[u++]=v>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=h[b];return t||s(l)}},function(e,t,n){var r=n(7),i=n(8);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0);!function(e){var t,n,o;e.MenuItem=function(){this.enabled=!0},function(e){e.dropDown="dropDown",e.popOver="popOver"}(e.MenuListType||(e.MenuListType={})),i.GlobalVars.handlers.navBarMenuItemPress=function(e){t&&t(e)||(r.ensureInitialized(),r.sendMessageRequestToParent("handleNavBarMenuItemPress",[e]))},i.GlobalVars.handlers.actionMenuItemPress=function(e){n&&n(e)||(r.ensureInitialized(),r.sendMessageRequestToParent("handleActionMenuItemPress",[e]))},i.GlobalVars.handlers.setModuleView=function(e){o&&o(e)||(r.ensureInitialized(),r.sendMessageRequestToParent("viewConfigItemPress",[e]))},e.setUpViews=function(e,t){r.ensureInitialized(),o=t,r.sendMessageRequestToParent("setUpViews",[e])},e.setNavBarMenu=function(e,n){r.ensureInitialized(),t=n,r.sendMessageRequestToParent("setNavBarMenu",[e])},e.showActionMenu=function(e,t){r.ensureInitialized(),n=t,r.sendMessageRequestToParent("showActionMenu",[e])}}(t.menus||(t.menus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.fileDownloadStart="fileDownloadStart",e.fileDownloadComplete="fileDownloadComplete"}(t.NotificationTypes||(t.NotificationTypes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(2),s=n(3);t.getUserJoinedTeams=function(e,t){r.ensureInitialized();var n=r.sendMessageRequestToParent("getUserJoinedTeams",[t]);i.GlobalVars.callbacks[n]=e},t.enterFullscreen=function(){r.ensureInitialized(o.FrameContexts.content),r.sendMessageRequestToParent("enterFullscreen",[])},t.exitFullscreen=function(){r.ensureInitialized(o.FrameContexts.content),r.sendMessageRequestToParent("exitFullscreen",[])},t.openFilePreview=function(e){r.ensureInitialized(o.FrameContexts.content),r.sendMessageRequestToParent("openFilePreview",[e.entityId,e.title,e.description,e.type,e.objectUrl,e.downloadUrl,e.webPreviewUrl,e.webEditUrl,e.baseUrl,e.editFile,e.subEntityId])},t.showNotification=function(e){r.ensureInitialized(o.FrameContexts.content),r.sendMessageRequestToParent("showNotification",[e.message,e.notificationType])},t.uploadCustomApp=function(e,t){r.ensureInitialized();var n=r.sendMessageRequestToParent("uploadCustomApp",[e]);i.GlobalVars.callbacks[n]=t||s.getGenericOnCompleteHandler()},t.sendCustomMessage=function(e,t,n){r.ensureInitialized();var o=r.sendMessageRequestToParent(e,t);return"function"==typeof n&&(i.GlobalVars.callbacks[o]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(null,e)}),o},t.sendCustomEvent=function(e,t){if(r.ensureInitialized(),!i.GlobalVars.childWindow)throw new Error("The child window has not yet been initialized or is not present");r.sendMessageEventToChild(e,t)},t.registerCustomHandler=function(e,t){var n=this;r.ensureInitialized(),i.GlobalVars.handlers[e]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(n,e)}},t.getChatMembers=function(e){r.ensureInitialized();var t=r.sendMessageRequestToParent("getChatMembers");i.GlobalVars.callbacks[t]=e},t.getConfigSetting=function(e,t){r.ensureInitialized();var n=r.sendMessageRequestToParent("getConfigSetting",[t]);i.GlobalVars.callbacks[n]=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(2);!function(e){e.openConversation=function(e){r.ensureInitialized(o.FrameContexts.content);var t=r.sendMessageRequestToParent("conversations.openConversation",[{title:e.title,subEntityId:e.subEntityId,conversationId:e.conversationId,channelId:e.channelId,entityId:e.entityId}]);i.GlobalVars.onCloseConversationHandler=e.onCloseConversation,i.GlobalVars.onStartConversationHandler=e.onStartConversation,i.GlobalVars.callbacks[t]=function(e,t){if(!e)throw new Error(t)}},e.closeConversation=function(){r.ensureInitialized(o.FrameContexts.content),r.sendMessageRequestToParent("conversations.closeConversation"),i.GlobalVars.onCloseConversationHandler=null,i.GlobalVars.onStartConversationHandler=null}}(t.conversations||(t.conversations={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.appInitialization=r.appInitialization;var i=n(25);t.authentication=i.authentication;var o=n(2);t.FrameContexts=o.FrameContexts,t.HostClientType=o.HostClientType,t.TaskModuleDimension=o.TaskModuleDimension,t.TeamType=o.TeamType,t.UserTeamRole=o.UserTeamRole;var s=n(5);t.ErrorCode=s.ErrorCode;var a=n(6);t.enablePrintCapability=a.enablePrintCapability,t.executeDeepLink=a.executeDeepLink,t.getContext=a.getContext,t.getMruTabInstances=a.getMruTabInstances,t.getTabInstances=a.getTabInstances,t.initialize=a.initialize,t.initializeWithFrameContext=a.initializeWithFrameContext,t.navigateBack=a.navigateBack,t.navigateCrossDomain=a.navigateCrossDomain,t.navigateToTab=a.navigateToTab,t.print=a.print,t.registerBackButtonHandler=a.registerBackButtonHandler,t.registerBeforeUnloadHandler=a.registerBeforeUnloadHandler,t.registerChangeSettingsHandler=a.registerChangeSettingsHandler,t.registerFullScreenHandler=a.registerFullScreenHandler,t.registerOnLoadHandler=a.registerOnLoadHandler,t.registerOnThemeChangeHandler=a.registerOnThemeChangeHandler,t.registerAppButtonClickHandler=a.registerAppButtonClickHandler,t.registerAppButtonHoverEnterHandler=a.registerAppButtonHoverEnterHandler,t.registerAppButtonHoverLeaveHandler=a.registerAppButtonHoverLeaveHandler,t.setFrameContext=a.setFrameContext,t.shareDeepLink=a.shareDeepLink;var c=n(9);t.settings=c.settings;var u=n(26);t.tasks=u.tasks;var l=n(11);t.ChildAppWindow=l.ChildAppWindow,t.ParentAppWindow=l.ParentAppWindow;var h=n(12);t.media=h.media;var d=n(28);t.location=d.location},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(4);!function(e){e.notifyAppLoaded=function(){r.ensureInitialized(),r.sendMessageRequestToParent("appInitialization.appLoaded",[i.version])},e.notifySuccess=function(){r.ensureInitialized(),r.sendMessageRequestToParent("appInitialization.success",[i.version])},e.notifyFailure=function(e){r.ensureInitialized(),r.sendMessageRequestToParent("appInitialization.failure",[e.reason,e.message])},function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"}(e.FailedReason||(e.FailedReason={}))}(t.appInitialization||(t.appInitialization={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),o=n(2);!function(e){var t,n;function s(){c();try{i.GlobalVars.childWindow&&i.GlobalVars.childWindow.close()}finally{i.GlobalVars.childWindow=null,i.GlobalVars.childOrigin=null}}function a(e){t=e,s();var n=t.width||600,r=t.height||400;n=Math.min(n,i.GlobalVars.currentWindow.outerWidth-400),r=Math.min(r,i.GlobalVars.currentWindow.outerHeight-200);var o=document.createElement("a");o.href=t.url;var a=void 0!==i.GlobalVars.currentWindow.screenLeft?i.GlobalVars.currentWindow.screenLeft:i.GlobalVars.currentWindow.screenX,c=void 0!==i.GlobalVars.currentWindow.screenTop?i.GlobalVars.currentWindow.screenTop:i.GlobalVars.currentWindow.screenY;i.GlobalVars.childWindow=i.GlobalVars.currentWindow.open(o.href,"_blank","toolbar=no, location=yes, status=no, menubar=no, scrollbars=yes, top="+(c+=i.GlobalVars.currentWindow.outerHeight/2-r/2)+", left="+(a+=i.GlobalVars.currentWindow.outerWidth/2-n/2)+", width="+n+", height="+r),i.GlobalVars.childWindow?u():l("FailedToOpenWindow")}function c(){n&&(clearInterval(n),n=0),delete i.GlobalVars.handlers.initialize,delete i.GlobalVars.handlers.navigateCrossDomain}function u(){c(),n=i.GlobalVars.currentWindow.setInterval((function(){if(!i.GlobalVars.childWindow||i.GlobalVars.childWindow.closed)l("CancelledByUser");else{var e=i.GlobalVars.childOrigin;try{i.GlobalVars.childOrigin="*",r.sendMessageEventToChild("ping")}finally{i.GlobalVars.childOrigin=e}}}),100),i.GlobalVars.handlers.initialize=function(){return[o.FrameContexts.authentication,i.GlobalVars.hostClientType]},i.GlobalVars.handlers.navigateCrossDomain=function(){return!1}}function l(e){try{t&&t.failureCallback&&t.failureCallback(e)}finally{t=null,s()}}function h(e,t,n){if(e){var r=document.createElement("a");r.href=decodeURIComponent(e),r.host&&r.host!==window.location.host&&"outlook.office.com"===r.host&&r.search.indexOf("client_type=Win32_Outlook")>-1&&(t&&"result"===t&&(n&&(r.href=d(r.href,"result",n)),i.GlobalVars.currentWindow.location.assign(d(r.href,"authSuccess",""))),t&&"reason"===t&&(n&&(r.href=d(r.href,"reason",n)),i.GlobalVars.currentWindow.location.assign(d(r.href,"authFailure",""))))}}function d(e,t,n){var r=e.indexOf("#"),i=-1===r?"#":e.substr(r);return i=i+"&"+t+(""!==n?"="+n:""),(e=-1===r?e:e.substr(0,r))+i}i.GlobalVars.handlers["authentication.authenticate.success"]=function(e){try{t&&t.successCallback&&t.successCallback(e)}finally{t=null,s()}},i.GlobalVars.handlers["authentication.authenticate.failure"]=l,e.registerAuthenticationHandlers=function(e){t=e},e.authenticate=function(e){var n=void 0!==e?e:t;if(r.ensureInitialized(o.FrameContexts.content,o.FrameContexts.sidePanel,o.FrameContexts.settings,o.FrameContexts.remove,o.FrameContexts.task),i.GlobalVars.hostClientType===o.HostClientType.desktop||i.GlobalVars.hostClientType===o.HostClientType.android||i.GlobalVars.hostClientType===o.HostClientType.ios||i.GlobalVars.hostClientType===o.HostClientType.rigel){var s=document.createElement("a");s.href=n.url;var c=r.sendMessageRequestToParent("authentication.authenticate",[s.href,n.width,n.height]);i.GlobalVars.callbacks[c]=function(e,t){e?n.successCallback(t):n.failureCallback(t)}}else a(n)},e.getAuthToken=function(e){r.ensureInitialized();var t=r.sendMessageRequestToParent("authentication.getAuthToken",[e.resources,e.claims,e.silent]);i.GlobalVars.callbacks[t]=function(t,n){t?e.successCallback(n):e.failureCallback(n)}},e.getUser=function(e){r.ensureInitialized();var t=r.sendMessageRequestToParent("authentication.getUser");i.GlobalVars.callbacks[t]=function(t,n){t?e.successCallback(n):e.failureCallback(n)}},e.notifySuccess=function(e,t){h(t,"result",e),r.ensureInitialized(o.FrameContexts.authentication),r.sendMessageRequestToParent("authentication.authenticate.success",[e]),r.waitForMessageQueue(i.GlobalVars.parentWindow,(function(){return setTimeout((function(){return i.GlobalVars.currentWindow.close()}),200)}))},e.notifyFailure=function(e,t){h(t,"reason",e),r.ensureInitialized(o.FrameContexts.authentication),r.sendMessageRequestToParent("authentication.authenticate.failure",[e]),r.waitForMessageQueue(i.GlobalVars.parentWindow,(function(){return setTimeout((function(){return i.GlobalVars.currentWindow.close()}),200)}))}}(t.authentication||(t.authentication={}))},function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),s=n(2),a=n(11);!function(e){e.startTask=function(e,t){i.ensureInitialized(s.FrameContexts.content,s.FrameContexts.sidePanel);var n=i.sendMessageRequestToParent("tasks.startTask",[e]);return o.GlobalVars.callbacks[n]=t,new a.ChildAppWindow},e.updateTask=function(e){i.ensureInitialized(s.FrameContexts.content,s.FrameContexts.sidePanel,s.FrameContexts.task);var t=r(e,["width","height"]);if(Object.keys(t).length)throw new Error("updateTask requires a taskInfo argument containing only width and height");i.sendMessageRequestToParent("tasks.updateTask",[e])},e.submitTask=function(e,t){i.ensureInitialized(s.FrameContexts.content,s.FrameContexts.sidePanel,s.FrameContexts.task),i.sendMessageRequestToParent("tasks.completeTask",[e,Array.isArray(t)?t:[t]])}}(t.tasks||(t.tasks={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);t.createFile=function(e,t){if(null==e||null==t||e.length<=0)return null;var n,r=1;return e.sort((function(e,t){return e.sequence>t.sequence?1:-1})),e.forEach((function(e){e.sequence==r&&(n=n?new Blob([n,e.file],{type:t}):new Blob([e.file],{type:t}),r++)})),n},t.decodeAttachment=function(e,t){if(null==e||null==t)return null;for(var n=atob(e.chunk),r=new Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);var o=new Uint8Array(r),s=new Blob([o],{type:t});return{sequence:e.chunkSequence,file:s}},t.validateSelectMediaInputs=function(e){return!(null==e||e.maxMediaCount>10)},t.validateGetMediaInputs=function(e,t,n){return null!=e&&null!=t&&t==r.media.FileFormat.ID&&null!=n},t.validateViewImagesInput=function(e){return!(null==e||e.length<=0||e.length>10)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(5),o=n(1),s=n(2);!function(e){e.locationAPIsRequiredVersion="1.9.0",e.getLocation=function(t,n){if(!n)throw new Error("[location.getLocation] Callback cannot be null");if(o.ensureInitialized(s.FrameContexts.content,s.FrameContexts.task),o.isAPISupportedByPlatform(e.locationAPIsRequiredVersion))if(t){var a=o.sendMessageRequestToParent("location.getLocation",[t]);r.GlobalVars.callbacks[a]=n}else n({errorCode:i.ErrorCode.INVALID_ARGUMENTS},void 0);else n({errorCode:i.ErrorCode.OLD_PLATFORM},void 0)},e.showLocation=function(t,n){if(!n)throw new Error("[location.showLocation] Callback cannot be null");if(o.ensureInitialized(s.FrameContexts.content,s.FrameContexts.task),o.isAPISupportedByPlatform(e.locationAPIsRequiredVersion))if(t){var a=o.sendMessageRequestToParent("location.showLocation",[t]);r.GlobalVars.callbacks[a]=n}else n({errorCode:i.ErrorCode.INVALID_ARGUMENTS},void 0);else n({errorCode:i.ErrorCode.OLD_PLATFORM},void 0)}}(t.location||(t.location={}))}])},W5Sr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},WYAk:function(e,t,n){var r,i;e.exports=(r=n("Ib8C"),i=r.enc.Utf8,void(r.algo.HMAC=r.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,u=0;u<n;u++)a[u]^=1549556828,c[u]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},XWO8:function(e,t,n){"use strict";n.r(t),n.d(t,"fromUtf8",(function(){return r})),n.d(t,"toUtf8",(function(){return i}));var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},YX4P:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("4v+I");r.__exportStar(n("rU8T"),t),r.__exportStar(n("LVIV"),t),r.__exportStar(n("JBVX"),t),r.__exportStar(n("JEbH"),t),r.__exportStar(n("duQQ"),t)},YcCt:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t=t||"&");var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var u=0;u<c;++u){var l,h,d,f,p=e[u].replace(s,"%20"),g=p.indexOf(n);g>=0?(l=p.substr(0,g),h=p.substr(g+1)):(l=p,h=""),d=decodeURIComponent(l),f=decodeURIComponent(h),r(o,d)?Array.isArray(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},ZIxo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n("dFEU"),i=n("b4Ml"),o=n("nHoN"),s=n("bVud"),a=n("YX4P"),c=n("tlIM"),u=function(){function e(e){this.hash=s.supportsWebCrypto(c.locateWindow())?new i.Sha256(e):a.isMsWindow(c.locateWindow())?new r.Sha256(e):new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=u},b4Ml:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n("XWO8"),i=n("kQNw"),o=n("p72H"),s=n("tlIM"),a=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){s.locateWindow().crypto.subtle.importKey("raw",c(e),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!i.isEmptyData(e)){var t=c(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return s.locateWindow().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):i.isEmptyData(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return s.locateWindow().crypto.subtle.digest(o.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function c(e){return"string"==typeof e?r.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},bVud:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("4v+I").__exportStar(n("ntEb"),t)},bZMm:function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",(function(){return p})),n.d(t,"Request",(function(){return _})),n.d(t,"Response",(function(){return S})),n.d(t,"DOMException",(function(){return T})),n.d(t,"fetch",(function(){return A}));var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,s="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in r,c="ArrayBuffer"in r;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&s&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(y)}),this.text=function(){var e,t,n,r=g(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=h(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),w.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function C(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];S.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})};var T=r.DOMException;try{new T}catch(I){(T=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),T.prototype.constructor=T}function A(e,t){return new Promise((function(n,i){var o=new _(e,t);if(o.signal&&o.signal.aborted)return i(new T("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;setTimeout((function(){n(new S(i,r))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new T("Aborted","AbortError"))}),0)},a.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&(s?a.responseType="blob":c&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof p?o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,d(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,r.fetch||(r.fetch=A,r.Headers=p,r.Request=_,r.Response=S)},cZ61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("vdHl"),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=0;h<r.BLOCK_SIZE;h++){if(h<16)this.temp[h]=(255&e[4*h])<<24|(255&e[4*h+1])<<16|(255&e[4*h+2])<<8|255&e[4*h+3];else{var d=this.temp[h-2];this.temp[h]=(((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)+this.temp[h-7]|0)+((((d=this.temp[h-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3)+this.temp[h-16]|0)}var f=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(l+(r.KEY[h]+this.temp[h]|0)|0)|0,p=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=u,u=c,c=a,a=s+f|0,s=o,o=i,i=n,n=f+p|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=l},e}();t.RawSha256=i},dFEU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n("kQNw"),i=n("p72H"),o=n("XWO8"),s=n("tlIM"),a=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=s.locateWindow().msCrypto.subtle.importKey("raw",c(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n("ImportKey completed without importing key.")},r.onerror=function(){n("ImportKey failed to import key.")}}))}(e).then((function(e){return s.locateWindow().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(s.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;r.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(c(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n("Error encountered finalizing hash")},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n("Error encountered finalizing hash")},e.finish()}))}))},e}();function c(e){return"string"==typeof e?o.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},duQQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map((function(e){return i[e]})).concat(n).every((function(e){return"function"==typeof e}))}return!1}},fQM2:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("Nt7R"),i=new r.a("Amplify"),o=new(function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Logger=r.a,this.ServiceWorker=null}return e.prototype.register=function(e){i.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):i.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),i.debug("amplify config",this._config),Object.entries(this._modules).forEach((function(e){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2)[1];Object.keys(n).forEach((function(e){t._modules[e]&&(n[e]=t._modules[e])}))})),this._components.map((function(e){e.configure(t._config)})),this._config):this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map((function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)}))},e}())},"iVi/":function(e,t,n){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},i=t||{},s=e.split(o),c=i.decode||r,u=0;u<s.length;u++){var l=s[u],h=l.indexOf("=");if(!(h<0)){var d=l.substr(0,h).trim(),f=l.substr(++h,l.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==n[d]&&(n[d]=a(f,c))}}return n},t.serialize=function(e,t,n){var r=n||{},o=r.encode||i;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var c=e+"="+a;if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");c+="; Max-Age="+Math.floor(u)}if(r.domain){if(!s.test(r.domain))throw new TypeError("option domain is invalid");c+="; Domain="+r.domain}if(r.path){if(!s.test(r.path))throw new TypeError("option path is invalid");c+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(c+="; HttpOnly"),r.secure&&(c+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return c};var r=decodeURIComponent,i=encodeURIComponent,o=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(n){return e}}},iisZ:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r=n(1),i="function"==typeof importScripts;e.exports=r(i?self:window)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=[];function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=i.reduce((function(e,t){return[t].concat(e)}),[]),a=Promise.resolve(n);return s.forEach((function(e){var t=e.request,n=e.requestError;(t||n)&&(a=a.then((function(e){return t.apply(void 0,r(e))}),n))})),a=a.then((function(t){return e.apply(void 0,r(t))})),s.forEach((function(e){var t=e.response,n=e.responseError;(t||n)&&(a=a.then(t,n))})),a}e.exports=function(e){if(!e.fetch)try{n(2)}catch(t){throw Error("No fetch avaibale. Unable to register fetch-intercept")}return e.fetch=function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.apply(void 0,[e].concat(n))}}(e.fetch),{register:function(e){return i.push(e),function(){var t=i.indexOf(e);t>=0&&i.splice(t,1)}},clear:function(){i=[]}}}},function(e,t){e.exports=n("bZMm")}])},je3o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("4v+I"),i=n("vdHl"),o=n("cZ61"),s=n("XWO8"),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=c(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(c(e))}catch(n){this.error=n}var t},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function c(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},kQNw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},"kVK+":function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+h],h+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=u}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+f]=255&s,f+=p,s/=256,u-=8);e[n+f-p]|=128*g}},lPiR:function(e,t,n){var r;e.exports=(r=n("Ib8C"),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var u=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],h=n[6],d=n[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],g=u[f-2];u[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+u[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+u[f-16]}var m=r&i^r&o^i&o,y=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&h)+c[f]+u[f];d=h,h=l,l=a,a=s+y|0,s=o,o=i,i=r,r=y+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},nHoN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("4v+I").__exportStar(n("AQMs"),t)},ntEb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var r=n("4v+I"),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&i.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&s(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!s(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},p46w:function(e,t,n){var r,i,o;void 0===(i="function"==typeof(r=o=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(u){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,!0!==o[c]&&(a+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(l){}if(i[u]=c,e===u)break}catch(l){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))})?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()},p72H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},r0jy:function(e,t,n){"use strict";var r=n("H7XF"),i=n("kVK+"),o=n("49sm");function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(u(e,o+d)!==u(t,d)){h=!1;break}if(h)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return q(V(t,e.length-n),e,n,r)}function _(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return _(e,t,n,r)}function S(e,t,n,r){return q(H(t),e,n,r)}function E(e,t,n,r){return q(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function T(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:s=e[i+2],128==(192&(o=e[i+1]))&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:s=e[i+2],a=e[i+3],128==(192&(o=e[i+1]))&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(u[h]!==l[h]){o=u[h],s=l[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",s=t;s<n;++s)o+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return o}function k(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:V(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function V(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}},r8II:function(e,t,n){"use strict";t.decode=t.parse=n("YcCt"),t.encode=t.stringify=n("6MUB")},rU8T:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},rWzI:function(e,t,n){(function(e){var r;!function(i){"object"==typeof global&&global;var o,s=2147483647,a=36,c=/^xn--/,u=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,f=String.fromCharCode;function p(e){throw RangeError(h[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function m(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(l,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function v(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+f(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;r+=a)e=d(e/35);return d(r+36*e/(e+38))}function _(e){var t,n,r,i,o,c,u,l,h,f,g,m=[],y=e.length,b=0,_=128,C=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&p("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=b,c=1,u=a;i>=y&&p("invalid-input"),((l=(g=e.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:a)>=a||l>d((s-b)/c))&&p("overflow"),b+=l*c,!(l<(h=u<=C?1:u>=C+26?26:u-C));u+=a)c>d(s/(f=a-h))&&p("overflow"),c*=f;C=w(b-o,t=m.length+1,0==o),d(b/t)>s-_&&p("overflow"),_+=d(b/t),b%=t,m.splice(b++,0,_)}return v(m)}function C(e){var t,n,r,i,o,c,u,l,h,g,m,v,_,C,S,E=[];for(v=(e=y(e)).length,t=128,n=0,o=72,c=0;c<v;++c)(m=e[c])<128&&E.push(f(m));for(r=i=E.length,i&&E.push("-");r<v;){for(u=s,c=0;c<v;++c)(m=e[c])>=t&&m<u&&(u=m);for(u-t>d((s-n)/(_=r+1))&&p("overflow"),n+=(u-t)*_,t=u,c=0;c<v;++c)if((m=e[c])<t&&++n>s&&p("overflow"),m==t){for(l=n,h=a;!(l<(g=h<=o?1:h>=o+26?26:h-o));h+=a)E.push(f(b(g+(S=l-g)%(C=a-g),0))),l=d(S/C);E.push(f(b(l,0))),o=w(n,_,r==i),n=0,++r}++n,++t}return E.join("")}o={version:"1.3.2",ucs2:{decode:y,encode:v},decode:_,encode:C,toASCII:function(e){return m(e,(function(e){return u.test(e)?"xn--"+C(e):e}))},toUnicode:function(e){return m(e,(function(e){return c.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(r=(function(){return o}).call(t,n,t,e))||(e.exports=r)}()}).call(this,n("YuTi")(e))},sEj0:function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},c=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:c,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var u in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+","+n:n})),n(c())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(u,t.headers[u]);i.send(t.body||null)}))}},tlIM:function(e,t,n){"use strict";n.r(t),n.d(t,"locateWindow",(function(){return i}));var r={};function i(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:r}},uTIj:function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-pinpoint","description":"AWS SDK for JavaScript Pinpoint Client for Node.js, Browser and React Native","version":"1.0.0-rc.4","scripts":{"clean":"npm run remove-definitions && npm run remove-dist","build-documentation":"npm run clean && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test":"exit 0","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"1.0.0-rc.3","@aws-sdk/credential-provider-node":"1.0.0-rc.3","@aws-sdk/fetch-http-handler":"1.0.0-rc.3","@aws-sdk/hash-node":"1.0.0-rc.3","@aws-sdk/invalid-dependency":"1.0.0-rc.3","@aws-sdk/middleware-content-length":"1.0.0-rc.3","@aws-sdk/middleware-host-header":"1.0.0-rc.3","@aws-sdk/middleware-logger":"1.0.0-rc.4","@aws-sdk/middleware-retry":"1.0.0-rc.4","@aws-sdk/middleware-serde":"1.0.0-rc.3","@aws-sdk/middleware-signing":"1.0.0-rc.3","@aws-sdk/middleware-stack":"1.0.0-rc.4","@aws-sdk/middleware-user-agent":"1.0.0-rc.3","@aws-sdk/node-config-provider":"1.0.0-rc.3","@aws-sdk/node-http-handler":"1.0.0-rc.3","@aws-sdk/protocol-http":"1.0.0-rc.3","@aws-sdk/smithy-client":"1.0.0-rc.4","@aws-sdk/types":"1.0.0-rc.3","@aws-sdk/url-parser-browser":"1.0.0-rc.3","@aws-sdk/url-parser-node":"1.0.0-rc.3","@aws-sdk/util-base64-browser":"1.0.0-rc.3","@aws-sdk/util-base64-node":"1.0.0-rc.3","@aws-sdk/util-body-length-browser":"1.0.0-rc.3","@aws-sdk/util-body-length-node":"1.0.0-rc.3","@aws-sdk/util-user-agent-browser":"1.0.0-rc.3","@aws-sdk/util-user-agent-node":"1.0.0-rc.3","@aws-sdk/util-utf8-browser":"1.0.0-rc.3","@aws-sdk/util-utf8-node":"1.0.0-rc.3","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"1.0.0-rc.3","@types/node":"^12.7.5","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.17.8","typescript":"~4.0.2"},"engines":{"node":">=10.0.0"},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-pinpoint","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-pinpoint"}}')},vdHl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},viNG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("4v+I").__exportStar(n("ZIxo"),t);var r=n("dFEU");Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n("b4Ml");Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},xDdU:function(e,t,n){var r,i,o=n("4fRq"),s=n("I2ZF"),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],h=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var f=o();null==h&&(h=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,m=p-a+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||p>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=g,i=d;var y=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var v=p/4294967296*1e4&268435455;l[u++]=v>>>8&255,l[u++]=255&v,l[u++]=v>>>24&15|16,l[u++]=v>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=h[b];return t||s(l)}},xk4V:function(e,t,n){var r=n("4fRq"),i=n("I2ZF");e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},xxdO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("4v+I").__exportStar(n("je3o"),t)},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function s(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function u(e){return null!==e&&"object"==typeof e}const l=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof l?d(a.errors):[a]}}if(c(s)){let e=-1,n=s.length;for(;++e<n;){const n=s[e];if(u(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof l?t=t.concat(d(a.errors)):t.push(a)}}}if(t)throw new l(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof l?t.errors:t),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof p?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,n)}}[f](){return this}static create(e,t,n){const r=new p(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class g extends p{constructor(e,t,n,i){let o;super(),this._parentSubscriber=e;let s=this;r(t)?o=t:t&&(o=t.next,n=t.error,i=t.complete,t!==a&&(s=Object.create(t),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(e){return e}let v=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof p)return e;if(e[f])return e[f]()}return e||t||n?new p(e,t,n):new p(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof p?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=b(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[m](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=b(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function b(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const w=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class _ extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class C extends p{constructor(e){super(e),this.destination=e}}let S=(()=>{class e extends v{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new C(this)}lift(e){const t=new E(this,this);return t.operator=e,t}next(e){if(this.closed)throw new w;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new w;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new w;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new w;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new _(this,e))}asObservable(){const e=new v;return e.source=this,e}}return e.create=(e,t)=>new E(e,t),e})();class E extends S{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function T(e){return e&&"function"==typeof e.schedule}function A(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new I(e,t))}}class I{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new O(e,this.project,this.thisArg))}}class O extends p{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const x=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const k=P(),R=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function M(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const U=e=>{if(e&&"function"==typeof e[m])return r=e,e=>{const t=r[m]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(R(e))return x(e);if(M(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s),e);if(e&&"function"==typeof e[k])return t=e,e=>{const n=t[k]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=u(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,r};function N(e,t){return new v(n=>{const r=new h;let i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function D(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new v(n=>{const r=new h;return r.add(t.schedule(()=>{const i=e[m]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if(M(e))return function(e,t){return new v(n=>{const r=new h;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if(R(e))return N(e,t);if(function(e){return e&&"function"==typeof e[k]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new v(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[k](),r.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())})))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof v?e:new v(U(e))}class L extends p{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class j extends p{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function F(e,t){if(!t.closed)return e instanceof v?e.subscribe(t):U(e)(t)}function V(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(V((n,r)=>D(e(n,r)).pipe(A((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new H(e,n)))}class H{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new q(e,this.project,this.concurrent))}}class q extends j{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new L(this),n=this.destination;n.add(t);const r=F(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function B(e=Number.POSITIVE_INFINITY){return V(y,e)}function z(e,t){return t?N(e,t):new v(x(e))}function G(){return function(e){return e.lift(new K(e))}}class K{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new W(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class W extends p{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class $ extends v{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new Y(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return G()(this)}}const J=(()=>{const e=$.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class Y extends C{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Q(){return new S}function Z(e){return{toString:e}.toString()}const X="__parameters__";function ee(e,t,n){return Z(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(X)?e[X]:Object.defineProperty(e,X,{value:[]})[X];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const te=ee("Inject",e=>({token:e})),ne=ee("Optional"),re=ee("Self"),ie=ee("SkipSelf");var oe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function se(e){for(let t in e)if(e[t]===se)return t;throw Error("Could not find renamed property on target object.")}function ae(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ce(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ue(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function le(e){return he(e,e[fe])||he(e,e[me])}function he(e,t){return t&&t.token===e?t:null}function de(e){return e&&(e.hasOwnProperty(pe)||e.hasOwnProperty(ye))?e[pe]:null}const fe=se({"\u0275prov":se}),pe=se({"\u0275inj":se}),ge=se({"\u0275provFallback":se}),me=se({ngInjectableDef:se}),ye=se({ngInjectorDef:se});function ve(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ve).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function be(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const we=se({__forward_ref__:se});function _e(e){return e.__forward_ref__=_e,e.toString=function(){return ve(this())},e}function Ce(e){return Se(e)?e():e}function Se(e){return"function"==typeof e&&e.hasOwnProperty(we)&&e.__forward_ref__===_e}const Ee="undefined"!=typeof globalThis&&globalThis,Te="undefined"!=typeof window&&window,Ae="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ie="undefined"!=typeof global&&global,Oe=Ee||Ie||Te||Ae,xe=se({"\u0275cmp":se}),Pe=se({"\u0275dir":se}),ke=se({"\u0275pipe":se}),Re=se({"\u0275mod":se}),Me=se({"\u0275loc":se}),Ue=se({"\u0275fac":se}),Ne=se({__NG_ELEMENT_ID__:se});class De{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return"InjectionToken "+this._desc}}const Le=new De("INJECTOR",-1),je={},Fe=/\n/gm,Ve="__source",He=se({provide:String,useValue:se});let qe,Be=void 0;function ze(e){const t=Be;return Be=e,t}function Ge(e){const t=qe;return qe=e,t}function Ke(e,t=oe.Default){if(void 0===Be)throw new Error("inject() must be called from an injection context");return null===Be?$e(e,void 0,t):Be.get(e,t&oe.Optional?null:void 0,t)}function We(e,t=oe.Default){return(qe||Ke)(Ce(e),t)}function $e(e,t,n){const r=le(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&oe.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${ve(e)}]`)}function Je(e){const t=[];for(let n=0;n<e.length;n++){const r=Ce(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=oe.Default;for(let t=0;t<r.length;t++){const i=r[t];i instanceof ne||"Optional"===i.ngMetadataName||i===ne?n|=oe.Optional:i instanceof ie||"SkipSelf"===i.ngMetadataName||i===ie?n|=oe.SkipSelf:i instanceof re||"Self"===i.ngMetadataName||i===re?n|=oe.Self:e=i instanceof te||i===te?i.token:i}t.push(We(e,n))}else t.push(We(r))}return t}class Ye{get(e,t=je){if(t===je){const t=new Error(`NullInjectorError: No provider for ${ve(e)}!`);throw t.name="NullInjectorError",t}return t}}class Qe{}class Ze{}function Xe(e,t){e.forEach(e=>Array.isArray(e)?Xe(e,t):t(e))}function et(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function tt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function nt(e,t,n){let r=it(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function rt(e,t){const n=it(e,t);if(n>=0)return e[1|n]}function it(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=e[n<<1];if(t===o)return n<<1;o>t?i=n:r=n+1}return~(i<<1)}(e,t)}var ot=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),st=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const at={},ct=[];let ut=0;function lt(e){return Z(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ot.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ct,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||st.Emulated,id:"c",styles:e.styles||ct,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,o=e.pipes;return n.id+=ut++,n.inputs=gt(e.inputs,t),n.outputs=gt(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ht):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(dt):null,n})}function ht(e){return vt(e)||function(e){return e[Pe]||null}(e)}function dt(e){return function(e){return e[ke]||null}(e)}const ft={};function pt(e){const t={type:e.type,bootstrap:e.bootstrap||ct,declarations:e.declarations||ct,imports:e.imports||ct,exports:e.exports||ct,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&Z(()=>{ft[e.id]=e.type}),t}function gt(e,t){if(null==e)return at;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const mt=lt;function yt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function vt(e){return e[xe]||null}function bt(e,t){return e.hasOwnProperty(Ue)?e[Ue]:null}function wt(e,t){const n=e[Re]||null;if(!n&&!0===t)throw new Error(`Type ${ve(e)} does not have '\u0275mod' property.`);return n}const _t=20,Ct=10;function St(e){return Array.isArray(e)&&"object"==typeof e[1]}function Et(e){return Array.isArray(e)&&!0===e[1]}function Tt(e){return 0!=(8&e.flags)}function At(e){return 2==(2&e.flags)}function It(e){return 1==(1&e.flags)}function Ot(e){return null!==e.template}function xt(e){return 0!=(512&e[2])}function Pt(e){return"string"==typeof e?e:null==e?"":""+e}function kt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Pt(e)}const Rt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Oe))();function Mt(e){return{name:"document",target:e.ownerDocument}}function Ut(e){return e instanceof Function?e():e}function Nt(e,t){const n=t?" in "+t:"";throw new Error(`No provider for ${kt(e)} found${n}`)}class Dt{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Lt(){return jt}function jt(e){return e.type.prototype.ngOnChanges&&(e.setInput=Vt),Ft}function Ft(){const e=Ht(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===at)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Vt(e,t,n,r){const i=Ht(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:at,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new Dt(c&&c.currentValue,t,s===at),e[r]=t}function Ht(e){return e.__ngSimpleChanges__||null}Lt.ngInherit=!0;let qt=void 0;function Bt(e){return!!e.listen}const zt={createRenderer:(e,t)=>void 0!==qt?qt:"undefined"!=typeof document?document:void 0};function Gt(e){for(;Array.isArray(e);)e=e[0];return e}function Kt(e,t){return Gt(t[e+_t])}function Wt(e,t){return Gt(t[e.index])}function $t(e,t){return e.data[t+_t]}function Jt(e,t){const n=t[e];return St(n)?n:n[0]}function Yt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Qt(e){return 4==(4&e[2])}function Zt(e){return 128==(128&e[2])}function Xt(e,t){return null===e||null==t?null:e[t]}function en(e){e[18]=0}function tn(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const nn={lFrame:Sn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function rn(){return nn.bindingsEnabled}function on(){return nn.lFrame.lView}function sn(){return nn.lFrame.tView}function an(e){nn.lFrame.contextLView=e}function cn(){return nn.lFrame.currentTNode}function un(e,t){nn.lFrame.currentTNode=e,nn.lFrame.isParent=t}function ln(){return nn.lFrame.isParent}function hn(){nn.lFrame.isParent=!1}function dn(){return nn.isInCheckNoChangesMode}function fn(e){nn.isInCheckNoChangesMode=e}function pn(){const e=nn.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function gn(){return nn.lFrame.bindingIndex++}function mn(e,t){const n=nn.lFrame;n.bindingIndex=n.bindingRootIndex=e,yn(t)}function yn(e){nn.lFrame.currentDirectiveIndex=e}function vn(){return nn.lFrame.currentQueryIndex}function bn(e){nn.lFrame.currentQueryIndex=e}function wn(e,t){const n=Cn();nn.lFrame=n,n.currentTNode=t,n.lView=e}function _n(e){const t=Cn(),n=e[1];nn.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex}function Cn(){const e=nn.lFrame,t=null===e?null:e.child;return null===t?Sn(e):t}function Sn(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function En(){const e=nn.lFrame;return nn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Tn=En;function An(){const e=En();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function In(){return nn.lFrame.selectedIndex}function On(e){nn.lFrame.selectedIndex=e}function xn(){const e=nn.lFrame;return $t(e.tView,e.selectedIndex)}function Pn(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),o&&(e.viewHooks||(e.viewHooks=[])).push(-n,o),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function kn(e,t,n){Un(e,t,3,n)}function Rn(e,t,n,r){(3&e[2])===n&&Un(e,t,n,r)}function Mn(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Un(e,t,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&e[18]:0;s<t.length;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=r&&o>=r)break}else t[s]<0&&(e[18]+=65536),(o<i||-1==i)&&(Nn(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function Nn(e,t,n,r){const i=n[r]<0,o=n[r+1],s=e[i?-n[r]:n[r]];i?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,o.call(s)):o.call(s)}const Dn=-1;class Ln{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function jn(e,t,n){const r=Bt(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,s):t.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];Vn(s)?r&&e.setProperty(t,s,a):r?e.setAttribute(t,s,a):t.setAttribute(s,a),i++}}return i}function Fn(e){return 3===e||4===e||6===e}function Vn(e){return 64===e.charCodeAt(0)}function Hn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||qn(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function qn(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const n=e[o++];if("number"==typeof n){if(n===t){s=-1;break}if(n>t){s=o-1;break}}}for(;o<e.length;){const t=e[o];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Bn(e){return e!==Dn}function zn(e){return 32767&e}function Gn(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Kn=!0;function Wn(e){const t=Kn;return Kn=e,t}let $n=0;function Jn(e,t){const n=Qn(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Yn(r.data,e),Yn(t,null),Yn(r.blueprint,null));const i=Zn(e,t),o=e.injectorIndex;if(Bn(i)){const e=zn(i),n=Gn(i,t),r=n[1].data;for(let i=0;i<8;i++)t[o+i]=n[e+i]|r[e+i]}return t[o+8]=i,o}function Yn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Qn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Zn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return Dn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Dn}function Xn(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ne)&&(r=n[Ne]),null==r&&(r=n[Ne]=$n++);const i=255&r,o=1<<i,s=64&i,a=32&i,c=t.data;128&i?s?a?c[e+7]|=o:c[e+6]|=o:a?c[e+5]|=o:c[e+4]|=o:s?a?c[e+3]|=o:c[e+2]|=o:a?c[e+1]|=o:c[e]|=o}(e,t,n)}function er(e,t,n,r=oe.Default,i){if(null!==e){const i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Ne)?e[Ne]:void 0;return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof i){wn(t,e);try{const e=i();if(null!=e||r&oe.Optional)return e;Nt(n)}finally{Tn()}}else if("number"==typeof i){if(-1===i)return new ar(e,t);let o=null,s=Qn(e,t),a=Dn,c=r&oe.Host?t[16][6]:null;for((-1===s||r&oe.SkipSelf)&&(a=-1===s?Zn(e,t):t[s+8],a!==Dn&&sr(r,!1)?(o=t[1],s=zn(a),t=Gn(a,t)):s=-1);-1!==s;){const e=t[1];if(or(i,s,e.data)){const e=nr(s,t,n,o,r,c);if(e!==tr)return e}a=t[s+8],a!==Dn&&sr(r,t[1].data[s+8]===c)&&or(i,s,t)?(o=e,s=zn(a),t=Gn(a,t)):s=-1}}}if(r&oe.Optional&&void 0===i&&(i=null),0==(r&(oe.Self|oe.Host))){const e=t[9],o=Ge(void 0);try{return e?e.get(n,i,r&oe.Optional):$e(n,i,r&oe.Optional)}finally{Ge(o)}}if(r&oe.Optional)return i;Nt(n,"NodeInjector")}const tr={};function nr(e,t,n,r,i,o){const s=t[1],a=s.data[e+8],c=rr(a,s,n,null==r?At(a)&&Kn:r!=s&&2===a.type,i&oe.Host&&o===a);return null!==c?ir(t,s,c,a):tr}function rr(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,c=e.directiveStart,u=o>>20,l=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<l;h++){const e=s[h];if(h<c&&n===e||h>=c&&e.type===n)return h}if(i){const e=s[c];if(e&&Ot(e)&&e.type===n)return c}return null}function ir(e,t,n,r){let i=e[n];const o=t.data;if(i instanceof Ln){const s=i;s.resolving&&function(e,t){throw new Error("Circular dependency in DI detected for "+e)}(kt(o[n]));const a=Wn(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Ge(s.injectImpl):null;wn(e,r);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const r=jt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==c&&Ge(c),Wn(a),s.resolving=!1,Tn()}}return i}function or(e,t,n){const r=64&e,i=32&e;let o;return o=128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t],!!(o&1<<e)}function sr(e,t){return!(e&oe.Self||e&oe.Host&&t)}class ar{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return er(this._tNode,this._lView,e,void 0,t)}}function cr(e){const t=e;if(Se(e))return()=>{const e=cr(Ce(t));return e?e():null};let n=bt(t);if(null===n){const e=de(t);n=e&&e.factory}return n||null}function ur(e){return Z(()=>{const t=e.prototype.constructor,n=t[Ue]||cr(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Ue]||cr(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function lr(e){return e.ngDebugContext}function hr(e){return e.ngOriginalError}function dr(e,...t){e.error(...t)}class fr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||dr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?lr(e)?lr(e):this._findContext(hr(e)):null}_findOriginalError(e){let t=hr(e);for(;t&&hr(t);)t=hr(t);return t}}let pr=!0,gr=!1;function mr(){return gr=!0,pr}function yr(e,t){e.__ngContext__=t}function vr(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const br="ng-template";function wr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==vr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function _r(e){return 0===e.type&&e.tagName!==br}function Cr(e,t,n){return t===(0!==e.type||n?e.tagName:br)}function Sr(e,t,n){let r=4;const i=e.attrs||[],o=function(e){for(let t=0;t<e.length;t++)if(Fn(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!Cr(e,c,n)||""===c&&1===t.length){if(Er(r))return!1;s=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!wr(e.attrs,u,n)){if(Er(r))return!1;s=!0}continue}const l=Tr(8&r?"class":c,i,_r(e),n);if(-1===l){if(Er(r))return!1;s=!0;continue}if(""!==u){let e;e=l>o?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==vr(t,u,0)||2&r&&u!==e){if(Er(r))return!1;s=!0}}}}else{if(!s&&!Er(r)&&!Er(c))return!1;if(s&&Er(c))continue;s=!1,r=c|1&r}}return Er(r)||s}function Er(e){return 0==(1&e)}function Tr(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ar(e,t,n=!1){for(let r=0;r<t.length;r++)if(Sr(e,t[r],n))return!0;return!1}function Ir(e,t){return e?":not("+t.trim()+")":t}function Or(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const t=e[++n];i+="["+s+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Er(s)||(t+=Ir(o,i),i=""),r=s,o=o||!Er(r);n++}return""!==i&&(t+=Ir(o,i)),t}const xr={};function Pr(e){const t=e[3];return Et(t)?t[3]:t}function kr(e){return Mr(e[13])}function Rr(e){return Mr(e[4])}function Mr(e){for(;null!==e&&!Et(e);)e=e[4];return e}function Ur(e){Nr(sn(),on(),In()+e,dn())}function Nr(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&kn(t,r,n)}else{const r=e.preOrderHooks;null!==r&&Rn(t,r,0,n)}On(n)}function Dr(e,t){return e<<17|t<<2}function Lr(e){return e>>17&32767}function jr(e){return 2|e}function Fr(e){return(131068&e)>>2}function Vr(e,t){return-131069&e|t<<2}function Hr(e){return 1|e}function qr(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=e.data[o];bn(i),n.contentQueries(2,t[o],o)}}}function Br(e,t,n){return Bt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function zr(e,t,n,r,i,o,s,a,c,u){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,en(l),l[3]=l[15]=e,l[8]=n,l[10]=s||e&&e[10],l[11]=a||e&&e[11],l[12]=c||e&&e[12]||null,l[9]=u||e&&e[9]||null,l[6]=o,l[16]=2==t.type?e[16]:l,l}function Gr(e,t,n,r,i){const o=t+_t,s=e.data[o]||function(e,t,n,r,i){const o=cn(),s=ln(),a=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(e,o,n,r,i);return un(s,!0),s}function Kr(e,t,n){_n(t);try{const r=e.viewQuery;null!==r&&Si(1,r,n);const i=e.template;null!==i&&Jr(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&qr(e,t),e.staticViewQueries&&Si(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)vi(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,An()}}function Wr(e,t,n,r){const i=t[2];if(256==(256&i))return;_n(t);const o=dn();try{en(t),nn.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Jr(e,t,n,2,r);const s=3==(3&i);if(!o)if(s){const n=e.preOrderCheckHooks;null!==n&&kn(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Rn(t,n,0,null),Mn(t,0)}if(function(e){for(let t=kr(e);null!==t;t=Rr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&tn(r,1),n[2]|=1024}}}(t),function(e){for(let t=kr(e);null!==t;t=Rr(t))for(let e=Ct;e<t.length;e++){const n=t[e],r=n[1];Zt(n)&&Wr(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&qr(e,t),!o)if(s){const n=e.contentCheckHooks;null!==n&&kn(t,n)}else{const n=e.contentHooks;null!==n&&Rn(t,n,1),Mn(t,1)}!function(e,t){try{const n=e.expandoInstructions;if(null!==n){let r=e.expandoStartIndex,i=-1,o=-1;for(let e=0;e<n.length;e++){const s=n[e];"number"==typeof s?s<=0?(o=0-s,On(o),r+=9+n[++e],i=r):r+=s:(null!==s&&(mn(r,i),s(2,t[i])),i++)}}}finally{On(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)yi(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&Si(2,c,r),!o)if(s){const n=e.viewCheckHooks;null!==n&&kn(t,n)}else{const n=e.viewHooks;null!==n&&Rn(t,n,2),Mn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,tn(t[3],-1))}finally{An()}}function $r(e,t,n,r){const i=t[10],o=!dn(),s=Qt(t);try{o&&!s&&i.begin&&i.begin(),s&&Kr(e,t,r),Wr(e,t,n,r)}finally{o&&!s&&i.end&&i.end()}}function Jr(e,t,n,r,i){const o=In();try{On(-1),2&r&&t.length>_t&&Nr(e,t,0,dn()),n(r,i)}finally{On(o)}}function Yr(e,t,n){if(Tt(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Qr(e,t,n){rn()&&(function(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Jn(n,t),yr(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const r=e.data[a],o=Ot(r);o&&fi(t,n,r);const c=ir(t,e,a,n);yr(c,t),null!==s&&pi(0,a-i,c,r,0,s),o&&(Jt(n.index,t)[8]=c)}}(e,t,n,Wt(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=e.expandoInstructions,s=e.firstCreatePass,a=n.index-_t,c=nn.lFrame.currentDirectiveIndex;try{On(a);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];yn(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?ai(r,i):s&&o.push(null)}}finally{On(-1),yn(c)}}(e,t,n))}function Zr(e,t,n=Wt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function Xr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ei(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ei(e,t,n,r,i,o,s,a,c,u){const l=_t+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:xr);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function ti(e,t,n,r){const i=Ti(t);i.push(n),e.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1)}function ni(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function ri(e,t,n,r,i,o,s,a){const c=Wt(t,n);let u,l=t.inputs;var h;!a&&null!=l&&(u=l[r])?(Ii(e,n,u,r,i),At(t)&&function(e,t){const n=Jt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):2===t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,t.tagName||"",r):i,Bt(o)?o.setProperty(c,r,i):Vn(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function ii(e,t,n,r){let i=!1;if(rn()){const o=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ar(n,s.selectors,!1)&&(i||(i=[]),Xn(Jn(n,t),e,s.type),Ot(s)?(ui(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,hi(n,e.data.length,o.length);for(let e=0;e<o.length;e++){const t=o[e];t.providersResolver&&t.providersResolver(t)}ci(e,n,o.length);let a=!1,c=!1;for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=Hn(n.mergedAttrs,u.hostAttrs),di(e,t,u),li(e.data.length-1,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-_t),a=!0),c||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-_t),c=!0),oi(e,u),r+=u.hostVars}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,o=[];let s=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,u=null===i||_r(t)?null:gi(n,i);o.push(u),s=ni(n,c,s),a=ni(e.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(t.flags|=16),s.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=s,t.outputs=a}(e,n),si(e,t,r)}s&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new Error(`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,s)}return n.mergedAttrs=Hn(n.mergedAttrs,n.attrs),i}function oi(e,t){const n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function si(e,t,n){for(let r=0;r<n;r++)t.push(xr),e.blueprint.push(xr),e.data.push(null)}function ai(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ci(e,t,n){const r=_t-t.index,i=e.data.length-(1048575&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function ui(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function li(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ot(t)&&(n[""]=e)}}function hi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function di(e,t,n){e.data.push(n);const r=n.factory||(n.factory=bt(n.type)),i=new Ln(r,Ot(n),null);e.blueprint.push(i),t.push(i)}function fi(e,t,n){const r=Wt(t,e),i=Xr(n),o=e[10],s=bi(e,zr(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=s}function pi(e,t,n,r,i,o){const s=o[t];if(null!==s){const e=r.setInput;for(let t=0;t<s.length;){const i=s[t++],o=s[t++],a=s[t++];null!==e?r.setInput(n,a,i,o):n[o]=a}}}function gi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function mi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function yi(e,t){const n=Jt(t,e);if(Zt(n)){const e=n[1];80&n[2]?Wr(e,n,e.template,n[8]):n[5]>0&&function e(t){for(let r=kr(t);null!==r;r=Rr(r))for(let t=Ct;t<r.length;t++){const n=r[t];if(1024&n[2]){const e=n[1];Wr(e,n,e.template,n[8])}else n[5]>0&&e(n)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Jt(n[r],t);Zt(i)&&i[5]>0&&e(i)}}(n)}}function vi(e,t){const n=Jt(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Kr(r,n,n[8])}function bi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function wi(e){for(;e;){e[2]|=64;const t=Pr(e);if(xt(e)&&!t)return e;e=t}return null}function _i(e,t,n){const r=t[10];r.begin&&r.begin();try{Wr(e,t,e.template,n)}catch(i){throw Ai(t,i),i}finally{r.end&&r.end()}}function Ci(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Yt(n),i=r[1];$r(i,r,i.template,n)}}(e[8])}function Si(e,t,n){bn(0),t(e,n)}const Ei=(()=>Promise.resolve(null))();function Ti(e){return e[7]||(e[7]=[])}function Ai(e,t){const n=e[9],r=n?n.get(fr,null):null;r&&r.handleError(t)}function Ii(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=t[s],u=e.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function Oi(e,t,n,r,i){if(null!=r){let o,s=!1;Et(r)?o=r:St(r)&&(s=!0,r=r[0]);const a=Gt(r);0===e&&null!==n?null==i?Ui(t,n,a):Mi(t,n,a,i||null):1===e&&null!==n?Mi(t,n,a,i||null):2===e?function(e,t,n){const r=Di(e,t);r&&function(e,t,n,r){Bt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,r,i){const o=n[7];o!==Gt(n)&&Oi(t,e,r,o,i);for(let s=Ct;s<n.length;s++){const i=n[s];Fi(i[1],i,e,t,r,o)}}(t,e,o,n,i)}}function xi(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,tn(i,-1)),n.splice(r,1)}function Pi(e,t){if(e.length<=Ct)return;const n=Ct+t,r=e[n];if(r){const o=r[17];null!==o&&o!==e&&xi(o,r),t>0&&(e[n-1][4]=r[4]);const s=tt(e,Ct+t);Fi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function ki(e,t){if(!(256&t[2])){const n=t[11];Bt(n)&&n.destroyNode&&Fi(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Ri(e[1],e);for(;t;){let n=null;if(St(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)St(t)&&Ri(t[1],t),t=t[3];null===t&&(t=e),St(t)&&Ri(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ri(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Ln)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2)t[n+1].call(e[t[n]]);else t.call(e)}}}(e,t),function(e,t){const n=e.cleanup;if(null!==n){const e=t[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(t):Gt(t[i]),s=e[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?e[a]():e[-a].unsubscribe(),r+=2}else n[r].call(e[n[r+1]]);t[7]=null}}(e,t),1===t[1].type&&Bt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Et(t[3])){n!==t[3]&&xi(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Mi(e,t,n,r){Bt(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function Ui(e,t,n){Bt(e)?e.appendChild(t,n):t.appendChild(n)}function Ni(e,t,n,r){null!==r?Mi(e,t,n,r):Ui(e,t,n)}function Di(e,t){return Bt(e)?e.parentNode(t):t.parentNode}function Li(e,t,n,r){const i=function(e,t,n){let r=t.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(t=r).parent;if(null===r)return n[0];if(t&&4===t.type&&4&t.flags)return Wt(t,n).parentNode;if(2&r.flags){const t=e.data,n=t[t[r.index].directiveStart].encapsulation;if(n!==st.ShadowDom&&n!==st.Native)return null}return Wt(r,n)}(e,r,t);if(null!=i){const e=t[11],o=function(e,t){return 3===e.type||4===e.type?Wt(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(let t=0;t<n.length;t++)Ni(e,i,n[t],o);else Ni(e,i,n,o)}}function ji(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;s&&0===t&&(a&&yr(Gt(a),r),n.flags|=4),64!=(64&n.flags)&&(3===c||4===c?(ji(e,t,n.child,r,i,o,!1),Oi(t,e,i,a,o)):1===c?Vi(e,t,r,n,i,o):Oi(t,e,i,a,o)),n=s?n.projectionNext:n.next}}function Fi(e,t,n,r,i,o){ji(n,r,e.firstChild,t,i,o,!1)}function Vi(e,t,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Oi(t,e,i,a[c],o);else ji(e,t,a,s[3],i,o,!0)}function Hi(e,t,n){Bt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function qi(e,t,n){Bt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}class Bi{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const e=this._lView,t=e[1];return function e(t,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Gt(s)),Et(s))for(let t=Ct;t<s.length;t++){const n=s[t],r=n[1].firstChild;null!==r&&e(n[1],n,r,i)}const a=r.type;if(3===a||4===a)e(t,n,r.child,i);else if(1===a){const t=n[16],o=t[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Pr(t);e(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t,e,t.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}ki(this._lView[1],this._lView)}onDestroy(e){ti(this._lView[1],this._lView,null,e)}markForCheck(){wi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_i(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){fn(!0);try{_i(e,t,n)}finally{fn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,Fi(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class zi extends Bi{constructor(e){super(e),this._view=e}detectChanges(){Ci(this._view)}checkNoChanges(){!function(e){fn(!0);try{Ci(e)}finally{fn(!1)}}(this._view)}get context(){return null}}let Gi,Ki,Wi;function $i(e,t,n){return Gi||(Gi=class extends e{}),new Gi(Wt(t,n))}function Ji(e,t,n,r){return Ki||(Ki=class extends e{constructor(e,t,n){super(),this._declarationView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=zr(this._declarationView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Kr(t,n,e),new Bi(n)}}),0===n.type?new Ki(r,n,$i(t,n,r)):null}function Yi(e,t,n,r){let i;Wi||(Wi=class extends e{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostView=n}get element(){return $i(t,this._hostTNode,this._hostView)}get injector(){return new ar(this._hostTNode,this._hostView)}get parentInjector(){const e=Zn(this._hostTNode,this._hostView);if(Bn(e)){const t=Gn(e,this._hostView),n=zn(e);return new ar(t[1].data[n+8],t)}return new ar(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const o=n||this.parentInjector;if(!i&&null==e.ngModule&&o){const e=o.get(Qe,null);e&&(i=e)}const s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}insert(e,t){const n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Et(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Wi(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),o=this._lContainer;!function(e,t,n,r){const i=Ct+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-Ct?(t[4]=n[i],et(n,Ct+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,o,i);const s=function e(t,n){const r=Ct+t+1;if(r<n.length){const t=n[r],i=t[1].firstChild;if(null!==i)return function t(n,r){if(null!==r){const i=r.type;if(2===i)return Wt(r,n);if(0===i)return e(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return t(n,i);{const t=n[r.index];return Et(t)?e(-1,t):Gt(t)}}{const e=n[16],i=e[6],o=Pr(e),s=i.projection[r.projection];return null!=s?t(o,s):t(n,r.next)}}return null}(t,i)}return n[7]}(i,o),a=n[11],c=Di(a,o[7]);return null!==c&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,Fi(e,r,n,1,i,o)}(r,o[6],a,n,c,s),e.attachToViewContainerRef(this),et(o[8],i,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=Pi(this._lContainer,t);n&&(tt(this._lContainer[8],t),ki(n[1],n))}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),n=Pi(this._lContainer,t);return n&&null!=tt(this._lContainer[8],t)?new Bi(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Et(o))i=o;else{let e;if(3===n.type)e=Gt(o);else if(e=r[11].createComment(""),xt(r)){const t=r[11],i=Wt(n,r);Mi(t,Di(t,i),e,function(e,t){return Bt(e)?e.nextSibling(t):t.nextSibling}(t,i))}else Li(r[1],r,e,n);r[n.index]=i=mi(o,r,e,n),bi(r,i)}return new Wi(i,n,r)}function Qi(e=!1){return function(e,t,n){if(!n&&At(e)){const n=Jt(e.index,t);return new Bi(n,n)}return 2===e.type||0===e.type||3===e.type||4===e.type?new Bi(t[16],t):null}(cn(),on(),e)}let Zi=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Xi(),e})();const Xi=Qi,eo=Function,to=new De("Set Injector scope."),no={},ro={},io=[];let oo=void 0;function so(){return void 0===oo&&(oo=new Ye),oo}function ao(e,t=null,n=null,r){return new co(e,n,t||so(),r)}class co{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&Xe(t,n=>this.processProvider(n,e,t)),Xe([e],e=>this.processInjectorType(e,[],i)),this.records.set(Le,ho(void 0,this));const o=this.records.get(to);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:ve(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=je,n=oe.Default){this.assertNotDestroyed();const r=ze(this);try{if(!(n&oe.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof De)&&le(e);t=n&&this.injectableDefInScope(n)?ho(uo(e),no):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&oe.Self?so():this.parent).get(e,t=n&oe.Optional&&t===je?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(ve(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[Ve]&&i.unshift(t[Ve]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=ve(t);if(Array.isArray(t))i=t.map(ve).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):ve(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Fe,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{ze(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(ve(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=Ce(e)))return!1;let r=de(e);const i=null==r&&e.ngModule||void 0,o=void 0===i?e:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=de(i)),null==r)return!1;if(null!=r.imports&&!s){let e;n.push(o);try{Xe(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Xe(r,e=>this.processProvider(e,n,r||io))}}this.injectorDefTypes.add(o),this.records.set(o,ho(r.factory,no));const a=r.providers;if(null!=a&&!s){const t=e;Xe(a,e=>this.processProvider(e,t,a))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=po(e=Ce(e))?e:Ce(e&&e.provide);const i=function(e,t,n){return fo(e)?ho(void 0,e.useValue):ho(lo(e),no)}(e);if(po(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=ho(void 0,no,!0),t.factory=()=>Je(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===no&&(t.value=ro,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function uo(e){const t=le(e),n=null!==t?t.factory:bt(e);if(null!==n)return n;const r=de(e);if(null!==r)return r.factory;if(e instanceof De)throw new Error(`Token ${ve(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${ve(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[fe]||e[me]||e[ge]&&e[ge]());if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function lo(e,t,n){let r=void 0;if(po(e)){const t=Ce(e);return bt(t)||uo(t)}if(fo(e))r=()=>Ce(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Je(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>We(Ce(e.useExisting));else{const t=Ce(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return bt(t)||uo(t);r=()=>new t(...Je(e.deps))}var i;return r}function ho(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function fo(e){return null!==e&&"object"==typeof e&&He in e}function po(e){return"function"==typeof e}const go=function(e,t,n){return function(e,t=null,n=null,r){const i=ao(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let mo=(()=>{class e{static create(e,t){return Array.isArray(e)?go(e,t,""):go(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=je,e.NULL=new Ye,e.\u0275prov=ce({token:e,providedIn:"any",factory:()=>We(Le)}),e.__NG_ELEMENT_ID__=-1,e})();const yo=new De("AnalyzeForEntryComponents");function vo(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const e=t[s];"number"==typeof e?o=e:1==o?i=be(i,e):2==o&&(r=be(r,e+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function bo(e,t){const n=Yt(e)[1],r=n.data.length-1;Pn(n,{directiveStart:r,directiveEnd:r+1})}function wo(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i=void 0;if(Ot(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=_o(e.inputs),t.declaredInputs=_o(e.declaredInputs),t.outputs=_o(e.outputs);const n=i.hostBindings;n&&Eo(e,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Co(e,o),s&&So(e,s),ae(e.inputs,i.inputs),ae(e.declaredInputs,i.declaredInputs),ae(e.outputs,i.outputs),Ot(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===wo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Hn(i.hostAttrs,n=Hn(n,i.hostAttrs))}}(r)}function _o(e){return e===at?{}:e===ct?[]:e}function Co(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function So(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Eo(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let To=null;function Ao(){if(!To){const e=Oe.Symbol;if(e&&e.iterator)To=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(To=n)}}}return To}class Io{constructor(e){this.wrapped=e}static wrap(e){return new Io(e)}static unwrap(e){return Io.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Io}}function Oo(e){return!!xo(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ao()in e)}function xo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Po(e,t,n){return e[t]=n}function ko(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ro(e,t,n,r){const i=ko(e,t,n);return ko(e,t+1,r)||i}function Mo(e,t,n,r){return ko(e,gn(),n)?t+Pt(n)+r:xr}function Uo(e,t,n,r,i,o,s,a){const c=on(),u=sn(),l=e+_t,h=u.firstCreatePass?function(e,t,n,r,i,o,s,a,c){const u=t.consts,l=Gr(t,e,0,s||null,Xt(u,a));ii(t,n,l,Xt(u,c)),Pn(t,l);const h=l.tViews=ei(2,l,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(e,u,c,t,n,r,i,o,s):u.data[l];un(h,!1);const d=c[11].createComment("");Li(u,c,d,h),yr(d,c),bi(c,c[l]=mi(d,c,d,h)),It(h)&&Qr(u,c,h),null!=s&&Zr(c,h,a)}function No(e,t=oe.Default){const n=on();return null===n?We(e,t):er(cn(),n,Ce(e),t)}function Do(e,t,n){const r=on();return ko(r,gn(),t)&&ri(sn(),xn(),r,e,t,r[11],n,!1),Do}function Lo(e,t,n,r,i){const o=i?"class":"style";Ii(e,n,t.inputs[o],o,r)}function jo(e,t,n,r){const i=on(),o=sn(),s=_t+e,a=i[11],c=i[s]=Br(t,a,nn.lFrame.currentNamespace),u=o.firstCreatePass?function(e,t,n,r,i,o,s){const a=t.consts,c=Gr(t,e,2,i,Xt(a,o));return ii(t,n,c,Xt(a,s)),null!==c.attrs&&vo(c,c.attrs,!1),null!==c.mergedAttrs&&vo(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(e,o,i,0,t,n,r):o.data[s];un(u,!0);const l=u.mergedAttrs;null!==l&&jn(a,c,l);const h=u.classes;null!==h&&qi(a,c,h);const d=u.styles;null!==d&&Hi(a,c,d),Li(o,i,c,u),0===nn.lFrame.elementDepthCount&&yr(c,i),nn.lFrame.elementDepthCount++,It(u)&&(Qr(o,i,u),Yr(o,u,i)),null!==r&&Zr(i,u)}function Fo(){let e=cn();ln()?hn():(e=e.parent,un(e,!1));const t=e;nn.lFrame.elementDepthCount--;const n=sn();n.firstCreatePass&&(Pn(n,e),Tt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Lo(n,t,on(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Lo(n,t,on(),t.stylesWithoutHost,!1)}function Vo(e,t,n,r){jo(e,t,n,r),Fo()}function Ho(e,t,n){const r=on(),i=sn(),o=e+_t,s=i.firstCreatePass?function(e,t,n,r,i){const o=t.consts,s=Xt(o,r),a=Gr(t,e,3,"ng-container",s);return null!==s&&vo(a,s,!0),ii(t,n,a,Xt(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(e,i,r,t,n):i.data[o];un(s,!0);const a=r[o]=r[11].createComment("");Li(i,r,a,s),yr(a,r),It(s)&&(Qr(i,r,s),Yr(i,s,r)),null!=n&&Zr(r,s)}function qo(){let e=cn();const t=sn();ln()?hn():(e=e.parent,un(e,!1)),t.firstCreatePass&&(Pn(t,e),Tt(e)&&t.queries.elementEnd(e))}function Bo(){return on()}function zo(e){return!!e&&"function"==typeof e.then}function Go(e){return!!e&&"function"==typeof e.subscribe}function Ko(e,t,n=!1,r){const i=on(),o=sn(),s=cn();return function(e,t,n,r,i,o,s=!1,a){const c=It(r),u=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),l=Ti(t);let h=!0;if(2===r.type){const d=Wt(r,t),f=a?a(d):at,p=f.target||d,g=l.length,m=a?e=>a(Gt(e[r.index])).target:r.index;if(Bt(n)){let s=null;if(!a&&c&&(s=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const e=i[o];if(e===n&&i[o+1]===r){const e=t[7],n=i[o+2];return e.length>n?e[n]:null}"string"==typeof e&&(o+=2)}return null}(e,t,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=$o(r,t,o,!1);const e=n.listen(f.name||p,i,o);l.push(o,e),u&&u.push(i,m,g,g+1)}}else o=$o(r,t,o,!0),p.addEventListener(i,o,s),l.push(o),u&&u.push(i,m,g,s)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,e),u&&u.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,e,t,n,r),Ko}function Wo(e,t,n){try{return!1!==t(n)}catch(r){return Ai(e,r),!1}}function $o(e,t,n,r){return function i(o){if(o===Function)return n;const s=2&e.flags?Jt(e.index,t):t;0==(32&t[2])&&wi(s);let a=Wo(t,n,o),c=i.__ngNextListenerFn__;for(;c;)a=Wo(t,c,o)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Jo(e=1){return function(e){return(nn.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,nn.lFrame.contextLView))[8]}(e)}function Yo(e,t,n){return Qo(e,"",t,"",n),Yo}function Qo(e,t,n,r,i){const o=on(),s=Mo(o,t,n,r);return s!==xr&&ri(sn(),xn(),o,e,s,o[11],i,!1),Qo}const Zo=[];function Xo(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?Lr(o):Fr(o),c=!1;for(;0!==a&&(!1===c||s);){const n=e[a+1];es(e[a],t)&&(c=!0,e[a+1]=r?Hr(n):jr(n)),a=r?Lr(n):Fr(n)}c&&(e[n+1]=r?jr(o):Hr(o))}function es(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&it(e,t)>=0}function ts(e,t){return function(e,t,n,r){const i=on(),o=sn(),s=function(e){const t=nn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+2,n}();o.firstUpdatePass&&function(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[In()+_t],s=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(o)&&null===t&&!s&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=nn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=t.residualClasses;if(null===i)0===t.classBindings&&(n=rs(n=ns(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=ns(i,e,t,n,r),null===o){let n=function(e,t,n){const r=t.classBindings;if(0!==Fr(r))return e[Lr(r)]}(e,t);void 0!==n&&Array.isArray(n)&&(n=ns(null,e,t,n[1],r),n=rs(n,t.attrs,r),function(e,t,n,r){e[Lr(t.classBindings)]=r}(e,t,0,n))}else o=function(e,t,n){let r=void 0;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=rs(r,e[o].hostAttrs,true);return rs(r,t.attrs,true)}(e,t)}return void 0!==o&&(t.residualClasses=o),n}(i,o,t,r),function(e,t,n,r,i,o){let s=t.classBindings,a=Lr(s),c=Fr(s);e[r]=n;let u,l=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||it(e,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const t=Lr(e[a+1]);e[r+1]=Dr(t,a),0!==t&&(e[t+1]=Vr(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Dr(a,0),0!==a&&(e[a+1]=Vr(e[a+1],r)),a=r;else e[r+1]=Dr(c,0),0===a?a=r:e[c+1]=Vr(e[c+1],r),c=r;l&&(e[r+1]=jr(e[r+1])),Xo(e,u,r,!0),Xo(e,u,r,!1),function(e,t,n,r,i){const o=e.residualClasses;null!=o&&"string"==typeof t&&it(o,t)>=0&&(n[r+1]=Hr(n[r+1]))}(t,u,e,r),s=Dr(a,c),t.classBindings=s}(i,o,t,n,s)}}(o,e,s,true),t!==xr&&ko(i,s,t)&&function(e,t,n,r,i,o,s,a){if(2!==t.type)return;const c=e.data,u=c[a+1];os(1==(1&u)?is(c,t,n,i,Fr(u),s):void 0)||(os(o)||function(e){return 2==(2&e)}(u)&&(o=is(c,null,n,i,a,s)),function(e,t,n,r,i){const o=Bt(e);i?o?e.addClass(n,r):n.classList.add(r):o?e.removeClass(n,r):n.classList.remove(r)}(r,0,Kt(In(),n),i,o))}(o,o.data[In()+_t],i,i[11],e,i[s+1]=function(e,t){return null==e||"object"==typeof e&&(e=ve(function(e){return e instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}?e.changingThisBreaksApplicationSecurity:e}(e))),e}(t),true,s)}(e,t),ts}function ns(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=rs(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function rs(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),nt(e,s,!!n||t[++o]))}return void 0===e?null:e}function is(e,t,n,r,i,o){const s=null===t;let a=void 0;for(;i>0;){const t=e[i],o=Array.isArray(t),c=o?t[1]:t,u=null===c;let l=n[i+1];l===xr&&(l=u?Zo:void 0);let h=u?rt(l,r):c===r?l:void 0;if(o&&!os(h)&&(h=rt(t,r)),os(h)&&(a=h,s))return a;const d=e[i+1];i=s?Lr(d):Fr(d)}if(null!==t){let e=o?t.residualClasses:t.residualStyles;null!=e&&(a=rt(e,r))}return a}function os(e){return void 0!==e}function ss(e,t=""){const n=on(),r=sn(),i=e+_t,o=r.firstCreatePass?Gr(r,e,2,null,null):r.data[i],s=n[i]=function(e,t){return Bt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Li(r,n,s,o),un(o,!1)}function as(e){return cs("",e,""),as}function cs(e,t,n){const r=on(),i=Mo(r,e,t,n);return i!==xr&&function(e,t,n){const r=Kt(t,e),i=e[11];Bt(i)?i.setValue(r,n):r.textContent=n}(r,In(),i),cs}const us=void 0;var ls=["en",[["a","p"],["AM","PM"],us],[["AM","PM"],us,us],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],us,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],us,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",us,"{1} 'at' {0}",us],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let hs={};function ds(e){return e in hs||(hs[e]=Oe.ng&&Oe.ng.common&&Oe.ng.common.locales&&Oe.ng.common.locales[e]),hs[e]}var fs=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const ps="en-US";let gs=ps;function ms(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: "+e+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(gs=e.toLowerCase().replace(/_/g,"-"))}function ys(e,t,n,r,i){if(e=Ce(e),Array.isArray(e))for(let o=0;o<e.length;o++)ys(e[o],t,n,r,i);else{const o=sn(),s=on();let a=po(e)?e:Ce(e.provide),c=lo(e);const u=cn(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(po(e)||!e.multi){const r=new Ln(c,i,No),f=ws(a,t,i?l:l+d,h);-1===f?(Xn(Jn(u,s),o,a),vs(o,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ws(a,t,l+d,h),p=ws(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Xn(Jn(u,s),o,a);const l=function(e,t,n,r,i){const o=new Ln(e,n,No);return o.multi=[],o.index=t,o.componentProviders=0,bs(o,i,r&&!n),o}(i?Cs:_s,n.length,i,r,c);!i&&m&&(n[p].providerFactory=l),vs(o,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),s.push(l)}else vs(o,e,f>-1?f:p,bs(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function vs(e,t,n,r){const i=po(t);if(i||t.useClass){const o=(t.useClass||t).prototype.ngOnDestroy;if(o){const s=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=s.indexOf(n);-1===e?s.push(n,[r,o]):s[e+1].push(r,o)}else s.push(n,o)}}}function bs(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ws(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function _s(e,t,n,r){return Ss(this.multi,[])}function Cs(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=ir(n,n[1],this.providerFactory.index,r);o=t.slice(0,e),Ss(i,o);for(let n=e;n<t.length;n++)o.push(t[n])}else o=[],Ss(i,o);return o}function Ss(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Es(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=sn();if(r.firstCreatePass){const i=Ot(e);ys(n,r.data,r.blueprint,i,!0),ys(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class Ts{}class As{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${ve(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let Is=(()=>{class e{}return e.NULL=new As,e})(),Os=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>xs(e),e})();const xs=function(e){return $i(e,cn(),on())};class Ps{}var ks=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let Rs=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ms(),e})();const Ms=function(){const e=on(),t=Jt(cn().index,e);return function(e){const t=e[11];if(Bt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(St(t)?t:e)};let Us=(()=>{class e{}return e.\u0275prov=ce({token:e,providedIn:"root",factory:()=>null}),e})();class Ns{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ds=new Ns("10.2.2");class Ls{constructor(){}supports(e){return Oo(e)}create(e){return new Fs(e)}}const js=(e,t)=>t;class Fs{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||js}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const o=!n||t&&t.currentIndex<Bs(n,r,i)?t:n,s=Bs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;t<=o&&o<e&&(i[n]=r+1)}i[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Oo(e))throw new Error(`Error trying to diff '${ve(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),o=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Ao()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Vs(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new qs),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Vs{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Hs{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class qs{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Hs,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bs(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class zs{constructor(){}supports(e){return e instanceof Map||xo(e)}create(){return new Gs}}class Gs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||xo(e)))throw new Error(`Error trying to diff '${ve(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ks(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Ks{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Ws=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ie,new ne]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=ce({token:e,providedIn:"root",factory:()=>new e([new Ls])}),e})(),$s=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ie,new ne]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=ce({token:e,providedIn:"root",factory:()=>new e([new zs])}),e})();const Js=[new zs],Ys=new Ws([new Ls]),Qs=new $s(Js);let Zs=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Xs(e,Os),e})();const Xs=function(e,t){return Ji(e,t,cn(),on())};let ea=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ta(e,Os),e})();const ta=function(e,t){return Yi(e,t,cn(),on())},na={};class ra extends Is{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=vt(e);return new sa(t,this.ngModule)}}function ia(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const oa=new De("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rt});class sa extends Ts{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Or).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return ia(this.componentDef.inputs)}get outputs(){return ia(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const o=e.get(n,na,i);return o!==na||r===na?o:t.get(n,r,i)}}}(e,r.injector):e,o=i.get(Ps,zt),s=i.get(Us,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(Bt(e))return e.selectRootElement(t,n===st.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Br(c,o.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Rt,clean:Ei,playerHandler:null,flags:0},d=ei(0,null,null,1,0,null,null,null,null,null),f=zr(null,d,h,l,null,null,o,a,s,i);let p,g;_n(f);try{const e=function(e,t,n,r,i,o){const s=n[1];n[20]=e;const a=Gr(s,0,2,null,null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(vo(a,c,!0),null!==e&&(jn(i,e,c),null!==a.classes&&qi(i,e,a.classes),null!==a.styles&&Hi(i,e,a.styles)));const u=r.createRenderer(e,t),l=zr(n,Xr(t),null,t.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(Xn(Jn(a,n),s,t.type),ui(s,a),hi(a,n.length,1)),bi(n,l),n[20]=l}(u,this.componentDef,f,o,a);if(u)if(n)jn(a,u,["ng-version",Ds.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Er(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&jn(a,u,e),t&&t.length>0&&qi(a,u,t.join(" "))}if(g=$t(d,0),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const o=n[1],s=function(e,t,n){const r=cn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ci(e,r,1),di(e,t,n));const i=ir(t,e,t.length-1,r);yr(i,t);const o=Wt(r,t);return o&&yr(o,t),i}(o,n,t);r.components.push(s),e[8]=s,i&&i.forEach(e=>e(s,t)),t.contentQueries&&t.contentQueries(1,s,n.length-1);const a=cn();if(o.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){On(a.index-_t);const e=n[1];oi(e,t),si(e,n,t.hostVars),ai(t,s)}return s}(e,this.componentDef,f,h,[bo]),Kr(d,f,null)}finally{An()}return new aa(this.componentType,p,$i(Os,g,f),f,g)}}class aa extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new zi(r),this.componentType=e}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}const ca=new Map;class ua extends Qe{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ra(this);const n=wt(e),r=e[Me]||null;r&&ms(r),this._bootstrapComponents=Ut(n.bootstrap),this._r3Injector=ao(e,t,[{provide:Qe,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],ve(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=mo.THROW_IF_NOT_FOUND,n=oe.Default){return e===mo||e===Qe||e===Le?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class la extends Ze{constructor(e){super(),this.moduleType=e,null!==wt(e)&&function(e){const t=new Set;!function e(n){const r=wt(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ve(t)} vs ${ve(t.name)}`)}(i,ca.get(i),n),ca.set(i,n));const o=Ut(r.imports);for(const s of o)t.has(s)||(t.add(s),e(s))}(e)}(e)}create(e){return new ua(this.moduleType,e)}}function ha(e,t,n,r){return fa(on(),pn(),e,t,n,r)}function da(e,t){const n=e[t];return n===xr?void 0:n}function fa(e,t,n,r,i,o){const s=t+n;return ko(e,s,i)?Po(e,s+1,o?r.call(o,i):r(i)):da(e,s+1)}function pa(e,t){const n=sn();let r;const i=e+_t;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new Error(`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=bt(r.type)),s=Ge(No);try{const t=Wn(!1),r=o();return Wn(t),function(e,t,n,r){const i=n+_t;i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),t[i]=r}(n,on(),e,r),r}finally{Ge(s)}}function ga(e,t,n){const r=on(),i=function(e,t){return e[t+_t]}(r,e);return function(e,t){return Io.isWrapped(t)&&(t=Io.unwrap(t),e[nn.lFrame.bindingIndex]=xr),t}(r,function(e,t){return e[1].data[t+_t].pure}(r,e)?fa(r,pn(),t,i.transform,n,i):i.transform(n))}const ma=class extends S{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,i=e=>null,o=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return e instanceof h&&e.add(s),s}};function ya(){return this._results[Ao()]()}class va{constructor(){this.dirty=!0,this._results=[],this.changes=new ma,this.length=0;const e=Ao(),t=va.prototype;t[e]||(t[e]=ya)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ba{constructor(e){this.queryList=e,this.matches=null}clone(){return new ba(this.queryList)}setDirty(){this.queryList.setDirty()}}class wa{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new wa(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ia(e,t).matches&&this.queries[t].setDirty()}}class _a{constructor(e,t,n,r=null){this.predicate=e,this.descendants=t,this.isStatic=n,this.read=r}}class Ca{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Ca(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Sa{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Sa(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&3===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,Ea(t,i)),this.matchTNodeWithReadOption(e,t,rr(t,e,i,!1,!1))}else n===Zs?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,rr(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Os||r===ea||r===Zs&&0===t.type)this.addMatch(t.index,-2);else{const n=rr(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Ea(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Ta(e,t,n,r){return-1===n?function(e,t){return 2===e.type||3===e.type?$i(Os,e,t):0===e.type?Ji(Zs,Os,e,t):null}(t,e):-2===n?function(e,t,n){return n===Os?$i(Os,t,e):n===Zs?Ji(Zs,Os,t,e):n===ea?Yi(ea,Os,t,e):void 0}(e,t,r):ir(e,e[1],n,t)}function Aa(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,o=n.matches,s=[];for(let e=0;e<o.length;e+=2){const i=o[e];s.push(i<0?null:Ta(t,r[i],o[e+1],n.metadata.read))}i.matches=s}return i.matches}function Ia(e,t){return e.queries.getByIndex(t)}const Oa=new De("Application Initializer");let xa=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();zo(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(We(Oa,8))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const Pa=new De("AppId"),ka={provide:Pa,useFactory:function(){return`${Ra()}${Ra()}${Ra()}`},deps:[]};function Ra(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ma=new De("Platform Initializer"),Ua=new De("Platform ID"),Na=new De("appBootstrapListener");let Da=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const La=new De("LocaleId"),ja=new De("DefaultCurrencyCode");class Fa{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Va=function(e){return new la(e)},Ha=Va,qa=function(e){return Promise.resolve(Va(e))},Ba=function(e){const t=Va(e),n=Ut(wt(e).declarations).reduce((e,t)=>{const n=vt(t);return n&&e.push(new sa(n)),e},[]);return new Fa(t,n)},za=Ba,Ga=function(e){return Promise.resolve(Ba(e))};let Ka=(()=>{class e{constructor(){this.compileModuleSync=Ha,this.compileModuleAsync=qa,this.compileModuleAndAllComponentsSync=za,this.compileModuleAndAllComponentsAsync=Ga}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const Wa=(()=>Promise.resolve(0))();function $a(e){"undefined"==typeof Zone?Wa.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ja{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ma(!1),this.onMicrotaskEmpty=new ma(!1),this.onStable=new ma(!1),this.onError=new ma(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=t,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let e=Oe.requestAnimationFrame,t=Oe.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Oe,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Xa(e),Za(e)},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Xa(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(n,r,i,o,s,a)=>{try{return ec(e),n.invokeTask(i,o,s,a)}finally{t&&"eventTask"===o.type&&t(),tc(e)}},onInvoke:(t,n,r,i,o,s,a)=>{try{return ec(e),t.invoke(r,i,o,s,a)}finally{tc(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Xa(e),Za(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ja.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ja.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,Qa,Ya,Ya);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function Ya(){}const Qa={};function Za(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Xa(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function ec(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function tc(e){e._nesting--,Za(e)}class nc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ma,this.onMicrotaskEmpty=new ma,this.onStable=new ma,this.onError=new ma}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let rc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ja.assertNotInAngularZone(),$a(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$a(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(We(Ja))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),ic=(()=>{class e{constructor(){this._applications=new Map,ac.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return ac.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();class oc{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let sc,ac=new oc;const cc=new De("AllowMultipleToken");class uc{constructor(e,t){this.name=e,this.token=t}}function lc(e,t,n=[]){const r="Platform: "+t,i=new De(r);return(t=[])=>{let o=hc();if(!o||o.injector.get(cc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:to,useValue:"platform"});!function(e){if(sc&&!sc.destroyed&&!sc.injector.get(cc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sc=e.get(dc);const t=e.get(Ma,null);t&&t.forEach(e=>e())}(mo.create({providers:e,name:r}))}return function(e){const t=hc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function hc(){return sc&&!sc.destroyed?sc:null}let dc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new nc:("zone.js"===e?void 0:e)||new Ja({enableLongStackTrace:mr(),shouldCoalesceEventChangeDetection:t}),n}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),r=[{provide:Ja,useValue:n}];return n.run(()=>{const t=mo.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),o=i.injector.get(fr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>gc(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(e,t,n){try{const r=n();return zo(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=i.injector.get(xa);return e.runInitializers(),e.donePromise.then(()=>(ms(i.injector.get(La,ps)||ps),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=fc({},t);return function(e,t,n){const r=new la(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(pc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ve(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(We(mo))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();function fc(e,t){return Array.isArray(t)?t.reduce(fc,e):Object.assign(Object.assign({},e),t)}let pc=(()=>{class e{constructor(e,t,n,r,i,o){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=mr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new v(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new v(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Ja.assertNotInAngularZone(),$a(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ja.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return T(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof v?e[0]:B(t)(z(e,n))}(s,a.pipe(e=>{return G()((t=Q,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,J);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Ts?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Qe),i=n.create(mo.NULL,[],t||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(rc,null);return o&&i.injector.get(ic).registerApplication(i.location.nativeElement,o),this._loadComponent(i),mr()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;gc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Na,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),gc(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(We(Ja),We(Da),We(mo),We(fr),We(Is),We(xa))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();function gc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class mc{}class yc{}const vc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let bc=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||vc}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>wc(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>wc(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(We(Ka),We(yc,8))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();function wc(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const _c=lc(null,"core",[{provide:Ua,useValue:"unknown"},{provide:dc,deps:[mo]},{provide:ic,deps:[]},{provide:Da,deps:[]}]),Cc=[{provide:pc,useClass:pc,deps:[Ja,Da,mo,fr,Is,xa]},{provide:oa,deps:[Ja],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:xa,useClass:xa,deps:[[new ne,Oa]]},{provide:Ka,useClass:Ka,deps:[]},ka,{provide:Ws,useFactory:function(){return Ys},deps:[]},{provide:$s,useFactory:function(){return Qs},deps:[]},{provide:La,useFactory:function(e){return ms(e=e||"undefined"!=typeof $localize&&$localize.locale||ps),e},deps:[[new te(La),new ne,new ie]]},{provide:ja,useValue:"USD"}];let Sc=(()=>{class e{constructor(e){}}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)(We(pc))},providers:Cc}),e})();const Ec="us-east-1";let Tc=null;function Ac(){return Tc}const Ic=new De("DocumentToken");let Oc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({factory:xc,token:e,providedIn:"platform"}),e})();function xc(){return We(kc)}const Pc=new De("Location Initialized");let kc=(()=>{class e extends Oc{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Ac().getLocation(),this._history=Ac().getHistory()}getBaseHrefFromDOM(){return Ac().getBaseHref(this._doc)}onPopState(e){Ac().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Ac().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){Rc()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){Rc()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(We(Ic))},e.\u0275prov=ce({factory:Mc,token:e,providedIn:"platform"}),e})();function Rc(){return!!window.history.pushState}function Mc(){return new kc(We(Ic))}function Uc(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Nc(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Dc(e){return e&&"?"!==e[0]?"?"+e:e}let Lc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({factory:jc,token:e,providedIn:"root"}),e})();function jc(e){const t=We(Ic).location;return new Vc(We(Oc),t&&t.origin||"")}const Fc=new De("appBaseHref");let Vc=(()=>{class e extends Lc{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Uc(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Dc(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+Dc(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+Dc(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(We(Oc),We(Fc,8))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),Hc=(()=>{class e extends Lc{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Uc(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+Dc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+Dc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(We(Oc),We(Fc,8))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),qc=(()=>{class e{constructor(e,t){this._subject=new ma,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Nc(zc(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Dc(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,zc(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Dc(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Dc(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(We(Lc),We(Oc))},e.normalizeQueryParams=Dc,e.joinWithSlash=Uc,e.stripTrailingSlash=Nc,e.\u0275prov=ce({factory:Bc,token:e,providedIn:"root"}),e})();function Bc(){return new qc(We(Lc),We(Oc))}function zc(e){return e.replace(/\/index.html$/,"")}var Gc=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class Kc{}let Wc=(()=>{class e extends Kc{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ds(t);if(n)return n;const r=t.split("-")[0];if(n=ds(r),n)return n;if("en"===r)return ls;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[fs.PluralCase]}(t||this.locale)(e)){case Gc.Zero:return"zero";case Gc.One:return"one";case Gc.Two:return"two";case Gc.Few:return"few";case Gc.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(We(La))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();function $c(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}let Jc=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Oo(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+ve(e.item));this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(No(Ws),No($s),No(Os),No(Rs))},e.\u0275dir=mt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class Yc{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qc=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){mr()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Yc(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Zc(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Zc(e,i);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(No(ea),No(Zs),No(Ws))},e.\u0275dir=mt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class Zc{constructor(e,t){this.record=e,this.view=t}}let Xc=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new eu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){tu("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){tu("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(No(ea),No(Zs))},e.\u0275dir=mt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class eu{constructor(){this.$implicit=null,this.ngIf=null}}function tu(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ve(t)}'.`)}let nu=(()=>{class e{constructor(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[n,r]=e.split(".");null!=(t=null!=t&&r?`${t}${r}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(No(Os),No($s),No(Rs))},e.\u0275dir=mt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),ru=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[{provide:Kc,useClass:Wc}]}),e})(),iu=(()=>{class e{}return e.\u0275prov=ce({token:e,providedIn:"root",factory:()=>new ou(We(Ic),window,We(fr))}),e})();class ou{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportsScrolling()){const t=this.document.getElementById(e)||this.document.getElementsByName(e)[0];t&&this.scrollToElement(t)}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const e=su(this.window.history)||su(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(e){return!1}}}function su(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class au extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new au,Tc||(Tc=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=uu||(uu=document.querySelector("base"),uu)?uu.getAttribute("href"):null;return null==t?null:(n=t,cu||(cu=document.createElement("a")),cu.setAttribute("href",n),"/"===cu.pathname.charAt(0)?cu.pathname:"/"+cu.pathname);var n}resetBaseElement(){uu=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return $c(document.cookie,e)}}let cu,uu=null;const lu=new De("TRANSITION_ID"),hu=[{provide:Oa,useFactory:function(e,t,n){return()=>{n.get(xa).donePromise.then(()=>{const n=Ac();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[lu,Ic,mo],multi:!0}];class du{static init(){var e;e=new du,ac=e}addToWindow(e){Oe.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Oe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Oe.getAllAngularRootElements=()=>e.getAllRootElements(),Oe.frameworkStabilizers||(Oe.frameworkStabilizers=[]),Oe.frameworkStabilizers.push(e=>{const t=Oe.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,n--,0==n&&e(r)};t.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?Ac().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const fu=new De("EventManagerPlugins");let pu=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error("No event manager plugin found for event "+e)}}return e.\u0275fac=function(t){return new(t||e)(We(fu),We(Ja))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();class gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Ac().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let mu=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),yu=(()=>{class e extends mu{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Ac().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(We(Ic))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const vu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bu=/%COMP%/g;function wu(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?wu(e,i,n):(i=i.replace(bu,e),n.push(i))}return n}function _u(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Cu=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Su(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case st.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Eu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case st.Native:case st.ShadowDom:return new Tu(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=wu(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(We(pu),We(yu),We(Pa))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();class Su{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(vu[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=vu[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=vu[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&ks.DashCase?e.style.setProperty(t,n,r&ks.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&ks.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_u(n)):this.eventManager.addEventListener(e,t,_u(n))}}class Eu extends Su{constructor(e,t,n,r){super(e),this.component=n;const i=wu(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(bu,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(bu,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class Tu extends Su{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===st.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=wu(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const e=document.createElement("style");e.textContent=i[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Au=(()=>{class e extends gu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(We(Ic))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const Iu=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pu={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ku=(()=>{class e extends gu{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ac().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let o="";if(Iu.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&xu.hasOwnProperty(t)&&(t=xu[t]))}return Ou[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Iu.forEach(r=>{r!=n&&(0,Pu[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(We(Ic))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const Ru=lc(_c,"browser",[{provide:Ua,useValue:"browser"},{provide:Ma,useValue:function(){au.makeCurrent(),du.init()},multi:!0},{provide:Ic,useFactory:function(){return function(e){qt=e}(document),document},deps:[]}]),Mu=[[],{provide:to,useValue:"root"},{provide:fr,useFactory:function(){return new fr},deps:[]},{provide:fu,useClass:Au,multi:!0,deps:[Ic,Ja,Ua]},{provide:fu,useClass:ku,multi:!0,deps:[Ic]},[],{provide:Cu,useClass:Cu,deps:[pu,yu,Pa]},{provide:Ps,useExisting:Cu},{provide:mu,useExisting:yu},{provide:yu,useClass:yu,deps:[Ic]},{provide:rc,useClass:rc,deps:[Ja]},{provide:pu,useClass:pu,deps:[fu,Ja]},[]];let Uu=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Pa,useValue:t.appId},{provide:lu,useExisting:Pa},hu]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)(We(e,12))},providers:Mu,imports:[ru,Sc]}),e})();function Nu(...e){let t=e[e.length-1];return T(t)?(e.pop(),N(e,t)):z(e)}"undefined"!=typeof window&&window;class Du extends S{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(e){super.next(this._value=e)}}class Lu extends p{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class ju extends p{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Fu(e,t,n,r,i=new ju(e,n,r)){if(!i.closed)return t instanceof v?t.subscribe(i):U(t)(i)}const Vu={};class Hu{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new qu(e,this.resultSelector))}}class qu extends Lu{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Vu),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Fu(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===Vu?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Bu=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),zu=new v(e=>e.complete());function Gu(e){return e?function(e){return new v(t=>e.schedule(()=>t.complete()))}(e):zu}function Ku(e){return new v(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?D(n):Gu()).subscribe(t)})}function Wu(){return B(1)}function $u(e,t){return function(n){return n.lift(new Ju(e,t))}}class Ju{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Yu(e,this.predicate,this.thisArg))}}class Yu extends p{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const Qu=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Zu(e){return function(t){return 0===e?Gu():t.lift(new Xu(e))}}class Xu{constructor(e){if(this.total=e,this.total<0)throw new Qu}call(e,t){return t.subscribe(new el(e,this.total))}}class el extends p{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function tl(e=il){return t=>t.lift(new nl(e))}class nl{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new rl(e,this.errorFactory))}}class rl extends p{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function il(){return new Bu}function ol(e=null){return t=>t.lift(new sl(e))}class sl{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new al(e,this.defaultValue))}}class al extends p{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function cl(e,t){return"function"==typeof t?n=>n.pipe(cl((n,r)=>D(e(n,r)).pipe(A((e,i)=>t(n,e,r,i))))):t=>t.lift(new ul(e))}class ul{constructor(e){this.project=e}call(e,t){return t.subscribe(new ll(e,this.project))}}class ll extends j{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new L(this),r=this.destination;r.add(n),this.innerSubscription=F(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}function hl(e){return t=>0===e?Gu():t.lift(new dl(e))}class dl{constructor(e){if(this.total=e,this.total<0)throw new Qu}call(e,t){return t.subscribe(new fl(e,this.total))}}class fl extends p{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function pl(...e){return Wu()(Nu(...e))}class gl{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new ml(e,this.accumulator,this.seed,this.hasSeed))}}class ml extends p{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function yl(e){return function(t){const n=new vl(e),r=t.lift(n);return n.caught=r}}class vl{constructor(e){this.selector=e}call(e,t){return t.subscribe(new bl(e,this.selector,this.caught))}}class bl extends j{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new L(this);this.add(r);const i=F(n,r);i!==r&&this.add(i)}}}function wl(e,t){return V(e,t,1)}function _l(e,t){const n=arguments.length>=2;return r=>r.pipe(e?$u((t,n)=>e(t,n,r)):y,hl(1),n?ol(t):tl(()=>new Bu))}function Cl(){}function Sl(e,t,n){return function(r){return r.lift(new El(e,t,n))}}class El{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new Tl(e,this.nextOrObserver,this.error,this.complete))}}class Tl extends p{constructor(e,t,n,i){super(e),this._tapNext=Cl,this._tapError=Cl,this._tapComplete=Cl,this._tapError=n||Cl,this._tapComplete=i||Cl,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Cl,this._tapError=t.error||Cl,this._tapComplete=t.complete||Cl)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class Al{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Il(e,this.callback))}}class Il extends p{constructor(e,t){super(e),this.add(new h(t))}}class Ol{constructor(e,t){this.id=e,this.url=t}}class xl extends Ol{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pl extends Ol{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kl extends Ol{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rl extends Ol{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ml extends Ol{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ul extends Ol{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nl extends Ol{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Dl extends Ol{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ll extends Ol{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vl{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hl{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ql{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zl{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gl="primary";class Kl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wl(e){return new Kl(e)}function $l(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Jl(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const t=r[o],n=e[o];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Yl(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ql(e[i],t[i]))return!1;return!0}function Ql(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Zl(e){return Array.prototype.concat.apply([],e)}function Xl(e){return e.length>0?e[e.length-1]:null}function eh(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function th(e){return Go(e)?e:zo(e)?D(Promise.resolve(e)):Nu(e)}function nh(e,t,n){return n?function(e,t){return Yl(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!sh(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Ql(e[n],t[n]))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!sh(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!sh(n.segments,i))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!sh(n.segments,e)&&!!n.children.primary&&t(n.children.primary,r,o)}}(t,n,n.segments)}(e.root,t.root)}class rh{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wl(this.queryParams)),this._queryParamMap}toString(){return lh.serialize(this)}}class ih{constructor(e,t){this.segments=e,this.children=t,this.parent=null,eh(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hh(this)}}class oh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wl(this.parameters)),this._parameterMap}toString(){return yh(this)}}function sh(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function ah(e,t){let n=[];return eh(e.children,(e,r)=>{r===Gl&&(n=n.concat(t(e,r)))}),eh(e.children,(e,r)=>{r!==Gl&&(n=n.concat(t(e,r)))}),n}class ch{}class uh{parse(e){const t=new Ch(e);return new rh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${"/"+function e(t,n){if(!t.hasChildren())return hh(t);if(n){const n=t.children.primary?e(t.children.primary,!1):"",r=[];return eh(t.children,(t,n)=>{n!==Gl&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=ah(t,(n,r)=>r===Gl?[e(t.children.primary,!1)]:[`${r}:${e(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${hh(t)}/${n[0]}`:`${hh(t)}/(${n.join("//")})`}}(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${fh(t)}=${fh(e)}`).join("&"):`${fh(t)}=${fh(n)}`});return t.length?"?"+t.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const lh=new uh;function hh(e){return e.segments.map(e=>yh(e)).join("/")}function dh(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fh(e){return dh(e).replace(/%3B/gi,";")}function ph(e){return dh(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gh(e){return decodeURIComponent(e)}function mh(e){return gh(e.replace(/\+/g,"%20"))}function yh(e){return`${ph(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${ph(e)}=${ph(t[e])}`).join("")}`;var t}const vh=/^[^\/()?;=#]+/;function bh(e){const t=e.match(vh);return t?t[0]:""}const wh=/^[^=?&#]+/,_h=/^[^?&#]+/;class Ch{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ih([],{}):new ih([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new ih(e,t)),n}parseSegment(){const e=bh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new oh(gh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bh(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=bh(this.remaining);e&&(n=e,this.capture(n))}e[gh(t)]=gh(n)}parseQueryParam(e){const t=function(e){const t=e.match(wh);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(_h);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=mh(t),i=mh(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=bh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Gl);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o.primary:new ih([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Sh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Eh(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Eh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Th(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Th(e,this._root).map(e=>e.value)}}function Eh(e,t){if(e===t.value)return t;for(const n of t.children){const t=Eh(e,n);if(t)return t}return null}function Th(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Th(e,n);if(r.length)return r.unshift(t),r}return[]}class Ah{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ih(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Oh extends Sh{constructor(e,t){super(e),this.snapshot=t,Uh(this,e)}toString(){return this.snapshot.toString()}}function xh(e,t){const n=function(e,t){const n=new Rh([],{},{},"",{},Gl,t,null,e.root,-1,{});return new Mh("",new Ah(n,[]))}(e,t),r=new Du([new oh("",{})]),i=new Du({}),o=new Du({}),s=new Du({}),a=new Du(""),c=new Ph(r,i,s,a,o,Gl,t,n.root);return c.snapshot=n.root,new Oh(new Ah(c,[]),n)}class Ph{constructor(e,t,n,r,i,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(A(e=>Wl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(A(e=>Wl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kh(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Rh{constructor(e,t,n,r,i,o,s,a,c,u,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mh extends Sh{constructor(e,t){super(t),this.url=e,Uh(this,t)}toString(){return Nh(this._root)}}function Uh(e,t){t.value._routerState=e,t.children.forEach(t=>Uh(e,t))}function Nh(e){const t=e.children.length>0?` { ${e.children.map(Nh).join(", ")} } `:"";return`${e.value}${t}`}function Dh(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Yl(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Yl(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Yl(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Yl(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Lh(e,t){var n,r;return Yl(e.params,t.params)&&sh(n=e.url,r=t.url)&&n.every((e,t)=>Yl(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||Lh(e.parent,t.parent))}function jh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Fh(e){return"object"==typeof e&&null!=e&&e.outlets}function Vh(e,t,n,r,i){let o={};return r&&eh(r,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>""+e):""+e}),new rh(n.root===e?t:function e(t,n,r){const i={};return eh(t.children,(t,o)=>{i[o]=t===n?r:e(t,n,r)}),new ih(t.segments,i)}(n.root,e,t),o,i)}class Hh{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&jh(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Fh);if(r&&r!==Xl(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qh{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Bh(e,t,n){if(e||(e=new ih([],{})),0===e.segments.length&&e.hasChildren())return zh(e,t,n);const r=function(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const t=e.segments[i],s=n[r];if(Fh(s))break;const a=""+s,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!$h(a,c,t))return o;r+=2}else{if(!$h(a,{},t))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new ih(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new ih(e.segments.slice(r.pathIndex),e.children),zh(t,0,i)}return r.match&&0===i.length?new ih(e.segments,{}):r.match&&!e.hasChildren()?Gh(e,t,n):r.match?zh(e,0,i):Gh(e,t,n)}function zh(e,t,n){if(0===n.length)return new ih(e.segments,{});{const r=function(e){return Fh(e[0])?e[0].outlets:{[Gl]:e}}(n),i={};return eh(r,(n,r)=>{null!==n&&(i[r]=Bh(e.children[r],t,n))}),eh(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new ih(e.segments,i)}}function Gh(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Fh(o)){const e=Kh(o.outlets);return new ih(r,e)}if(0===i&&jh(n[0])){r.push(new oh(e.segments[t].path,n[0])),i++;continue}const s=Fh(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&jh(a)?(r.push(new oh(s,Wh(a))),i+=2):(r.push(new oh(s,{})),i++)}return new ih(r,{})}function Kh(e){const t={};return eh(e,(e,n)=>{null!==e&&(t[n]=Gh(new ih([],{}),0,e))}),t}function Wh(e){const t={};return eh(e,(e,n)=>t[n]=""+e),t}function $h(e,t,n){return e==n.path&&Yl(t,n.parameters)}class Jh{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Dh(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Ih(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),eh(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=Ih(e),i=e.value.component?n.children:t;eh(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=Ih(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Bl(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Hl(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Dh(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Yh(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Yh(e){Dh(e.value),e.children.forEach(Yh)}class Qh{constructor(e,t){this.routes=e,this.module=t}}function Zh(e){return"function"==typeof e}function Xh(e){return e instanceof rh}const ed=Symbol("INITIAL_VALUE");function td(){return cl(e=>function(...e){let t=void 0,n=void 0;return T(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),z(e,n).lift(new Hu(t))}(...e.map(e=>e.pipe(hl(1),function(...e){const t=e[e.length-1];return T(t)?(e.pop(),n=>pl(e,n,t)):t=>pl(e,t)}(ed)))).pipe(function(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new gl(e,t,n))}}((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==ed)return e;if(r===ed&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||Xh(r))return r}return e},e)},ed),$u(e=>e!==ed),A(e=>Xh(e)?e:!0===e),hl(1)))}class nd{constructor(e){this.segmentGroup=e||null}}class rd{constructor(e){this.urlTree=e}}function id(e){return new v(t=>t.error(new nd(e)))}function od(e){return new v(t=>t.error(new rd(e)))}function sd(e){return new v(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class ad{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Qe)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Gl).pipe(A(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(yl(e=>{if(e instanceof rd)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof nd)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Gl).pipe(A(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(yl(e=>{if(e instanceof nd)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new ih([],{[Gl]:e}):e;return new rh(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(A(e=>new ih([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Nu({});const n=[],r=[],i={};return eh(e,(e,o)=>{const s=t(o,e).pipe(A(e=>i[o]=e));o===Gl?n.push(s):r.push(s)}),Nu.apply(null,n.concat(r)).pipe(Wu(),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?$u((t,n)=>e(t,n,r)):y,Zu(1),n?ol(t):tl(()=>new Bu))}(),A(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,o){return Nu(...n).pipe(wl(s=>this.expandSegmentAgainstRoute(e,t,n,s,r,i,o).pipe(yl(e=>{if(e instanceof nd)return Nu(null);throw e}))),_l(e=>!!e),yl((e,n)=>{if(e instanceof Bu||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,i))return Nu(new ih([],{}));throw new nd(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,o,s){return hd(r)!==o?id(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):id(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?od(i):this.lineralizeSegments(n,i).pipe(V(n=>{const i=new ih(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:c,positionalParamSegments:u}=cd(t,r,i);if(!s)return id(t);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?od(l):this.lineralizeSegments(r,l).pipe(V(r=>this.expandSegment(e,t,n,r.concat(i.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(A(e=>(n._loadedConfig=e,new ih(r,{})))):Nu(new ih(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=cd(t,n,r);if(!i)return id(t);const a=r.slice(s);return this.getChildConfig(e,n,r).pipe(V(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:s}=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some(n=>ld(e,t,n)&&hd(n)!==Gl)}(e,n,r)?{segmentGroup:ud(new ih(t,function(e,t){const n={};n.primary=t;for(const r of e)""===r.path&&hd(r)!==Gl&&(n[hd(r)]=new ih([],{}));return n}(r,new ih(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>ld(e,t,n))}(e,n,r)?{segmentGroup:ud(new ih(e.segments,function(e,t,n,r){const i={};for(const o of n)ld(e,t,o)&&!r[hd(o)]&&(i[hd(o)]=new ih([],{}));return Object.assign(Object.assign({},r),i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(A(e=>new ih(o,e))):0===r.length&&0===s.length?Nu(new ih(o,{})):this.expandSegment(n,i,r,s,Gl,!0).pipe(A(e=>new ih(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Nu(new Qh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Nu(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(V(n=>n?this.configLoader.load(e.injector,t).pipe(A(e=>(t._loadedConfig=e,e))):function(e){return new v(t=>t.error($l(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Nu(new Qh([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;return r&&0!==r.length?Nu(r.map(r=>{const i=e.get(r);let o;if(function(e){return e&&Zh(e.canLoad)}(i))o=i.canLoad(t,n);else{if(!Zh(i))throw new Error("Invalid CanLoad guard");o=i(t,n)}return th(o)})).pipe(td(),Sl(e=>{if(!Xh(e))return;const t=$l(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),A(e=>!0===e)):Nu(!0)}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Nu(n);if(r.numberOfChildren>1||!r.children.primary)return sd(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new rh(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return eh(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let o={};return eh(t.children,(t,i)=>{o[i]=this.createSegmentGroup(e,t,n,r)}),new ih(i,o)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function cd(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||Jl)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function ud(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new ih(e.segments.concat(t.segments),t.children)}return e}function ld(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function hd(e){return e.outlet||Gl}class dd{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fd{constructor(e,t){this.component=e,this.route=t}}function pd(e,t,n){const r=e._root;return function e(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ih(n);return t.children.forEach(t=>{!function(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,a=n?n.value:null,c=r?r.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!sh(e.url,t.url);case"pathParamsOrQueryParamsChange":return!sh(e.url,t.url)||!Yl(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lh(e,t)||!Yl(e.queryParams,t.queryParams);case"paramsChange":default:return!Lh(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new dd(i)):(s.data=a.data,s._resolvedData=a._resolvedData),e(t,n,s.component?c?c.children:null:r,i,o),u&&c&&c.outlet&&c.outlet.isActivated&&o.canDeactivateChecks.push(new fd(c.outlet.component,a))}else a&&md(n,c,o),o.canActivateChecks.push(new dd(i)),e(t,null,s.component?c?c.children:null:r,i,o)}(t,s[t.value.outlet],r,i.concat([t.value]),o),delete s[t.value.outlet]}),eh(s,(e,t)=>md(e,r.getContext(t),o)),o}(r,t?t._root:null,n,[r.value])}function gd(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function md(e,t,n){const r=Ih(e),i=e.value;eh(r,(e,r)=>{md(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new fd(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function yd(e,t){return null!==e&&t&&t(new ql(e)),Nu(!0)}function vd(e,t){return null!==e&&t&&t(new Vl(e)),Nu(!0)}function bd(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Nu(r.map(r=>Ku(()=>{const i=gd(r,t,n);let o;if(function(e){return e&&Zh(e.canActivate)}(i))o=th(i.canActivate(t,e));else{if(!Zh(i))throw new Error("Invalid CanActivate guard");o=th(i(t,e))}return o.pipe(_l())}))).pipe(td()):Nu(!0)}function wd(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Ku(()=>Nu(t.guards.map(i=>{const o=gd(i,t.node,n);let s;if(function(e){return e&&Zh(e.canActivateChild)}(o))s=th(o.canActivateChild(r,e));else{if(!Zh(o))throw new Error("Invalid CanActivateChild guard");s=th(o(r,e))}return s.pipe(_l())})).pipe(td())));return Nu(i).pipe(td())}class _d{}class Cd{constructor(e,t,n,r,i,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const e=Td(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Gl),n=new Rh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gl,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ah(n,t),i=new Mh(this.url,r);return this.inheritParamsAndData(i._root),Nu(i)}catch(e){return new v(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=kh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=ah(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>e.value.outlet===Gl?-1:t.value.outlet===Gl?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const o of e)try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(i){if(!(i instanceof _d))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new _d}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new _d;if((e.outlet||Gl)!==r)throw new _d;let i,o=[],s=[];if("**"===e.path){const o=n.length>0?Xl(n).parameters:{};i=new Rh(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Od(e),r,e.component,e,Sd(t),Ed(t)+n.length,xd(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new _d;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||Jl)(n,e,t);if(!r)throw new _d;const i={};eh(r.posParams,(e,t)=>{i[t]=e.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Rh(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Od(e),r,e.component,e,Sd(t),Ed(t)+o.length,xd(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:u}=Td(t,o,s,a,this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const e=this.processChildren(a,c);return[new Ah(i,e)]}if(0===a.length&&0===u.length)return[new Ah(i,[])];const l=this.processSegment(a,c,u,Gl);return[new Ah(i,l)]}}function Sd(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Ed(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Td(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some(n=>Ad(e,t,n)&&Id(n)!==Gl)}(e,n,r)){const i=new ih(t,function(e,t,n,r){const i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Id(o)!==Gl){const n=new ih([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Id(o)]=n}return i}(e,t,r,new ih(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Ad(e,t,n))}(e,n,r)){const o=new ih(e.segments,function(e,t,n,r,i,o){const s={};for(const a of r)if(Ad(e,n,a)&&!i[Id(a)]){const n=new ih([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[Id(a)]=n}return Object.assign(Object.assign({},i),s)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new ih(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function Ad(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Id(e){return e.outlet||Gl}function Od(e){return e.data||{}}function xd(e){return e.resolve||{}}function Pd(e){return function(t){return t.pipe(cl(t=>{const n=e(t);return n?D(n).pipe(A(()=>t)):D([t])}))}}class kd extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}let Rd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Vo(0,"router-outlet")},directives:function(){return[Kd]},encapsulation:2}),e})();function Md(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Ud(r,Nd(t,r))}}function Ud(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Gl)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Md(e.children,t)}function Nd(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Dd(e){const t=e.children&&e.children.map(Dd),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Gl&&(n.component=Rd),n}const Ld=new De("ROUTES");class jd{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(A(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new Qh(Zl(r.injector.get(Ld)).map(Dd),r)}))}loadModuleFactory(e){return"string"==typeof e?D(this.loader.load(e)):th(e()).pipe(V(e=>e instanceof Ze?Nu(e):D(this.compiler.compileModuleAsync(e))))}}class Fd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Vd,this.attachRef=null}}class Vd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Fd,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Hd{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qd(e){throw e}function Bd(e,t,n){return t.parse("/")}function zd(e,t){return Nu(null)}let Gd=(()=>{class e{constructor(e,t,n,r,i,o,s,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=qd,this.malformedUriErrorHandler=Bd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zd,afterPreactivation:zd},this.urlHandlingStrategy=new Hd,this.routeReuseStrategy=new kd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Qe),this.console=i.get(Da);const c=i.get(Ja);this.isNgZoneEnabled=c instanceof Ja,this.resetConfig(a),this.currentUrlTree=new rh(new ih([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jd(o,s,e=>this.triggerEvent(new jl(e)),e=>this.triggerEvent(new Fl(e))),this.routerState=xh(this.currentUrlTree,this.rootComponentType),this.transitions=new Du({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe($u(e=>0!==e.id),A(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),cl(e=>{let n=!1,r=!1;return Nu(e).pipe(Sl(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cl(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Nu(e).pipe(cl(e=>{const n=this.transitions.getValue();return t.next(new xl(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?zu:[e]}),cl(e=>Promise.resolve(e)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(e){return e.pipe(cl(e=>function(e,t,n,r,i){return new ad(e,t,n,r,i).apply()}(r,i,o,e.extractedUrl,s).pipe(A(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),Sl(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return function(o){return o.pipe(V(o=>function(e,t,n,r,i="emptyOnly",o="legacy"){return new Cd(e,t,n,r,i,o).recognize()}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(A(e=>Object.assign(Object.assign({},o),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),Sl(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),Sl(e=>{const n=new Ml(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=e,a=new xl(n,this.serializeUrl(r),i,o);t.next(a);const c=xh(r,this.rootComponentType).snapshot;return Nu(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),zu}),Pd(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Sl(e=>{const t=new Ul(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),A(e=>Object.assign(Object.assign({},e),{guards:pd(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(V(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Nu(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return D(e).pipe(V(e=>function(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Nu(o.map(o=>{const s=gd(o,t,i);let a;if(function(e){return e&&Zh(e.canDeactivate)}(s))a=th(s.canDeactivate(e,t,n,r));else{if(!Zh(s))throw new Error("Invalid CanDeactivate guard");a=th(s(e,t,n,r))}return a.pipe(_l())})).pipe(td()):Nu(!0)}(e.component,e.route,n,t,r)),_l(e=>!0!==e,!0))}(s,r,i,e).pipe(V(n=>n&&"boolean"==typeof n?function(e,t,n,r){return D(t).pipe(wl(t=>D([vd(t.route.parent,r),yd(t.route,r),wd(e,t.path,n),bd(e,t.route,n)]).pipe(Wu(),_l(e=>!0!==e,!0))),_l(e=>!0!==e,!0))}(r,o,e,t):Nu(n)),A(e=>Object.assign(Object.assign({},n),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),Sl(e=>{if(Xh(e.guardsResult)){const t=$l(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),Sl(e=>{const t=new Nl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),$u(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new kl(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Pd(e=>{if(e.guards.canActivateChecks.length)return Nu(e).pipe(Sl(e=>{const t=new Dl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),cl(e=>{let n=!1;return Nu(e).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(e){return e.pipe(V(e=>{const{targetSnapshot:t,guards:{canActivateChecks:n}}=e;if(!n.length)return Nu(e);let o=0;return D(n).pipe(wl(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Nu({});const o={};return D(i).pipe(V(i=>function(e,t,n,r){const i=gd(e,t,r);return th(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe(Sl(e=>{o[i]=e}))),Zu(1),V(()=>Object.keys(o).length===i.length?Nu(o):zu))}(e._resolve,e,t,r).pipe(A(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),kh(e,n).resolve),null)))}(e.route,t,r,i)),Sl(()=>o++),Zu(1),V(t=>o===n.length?Nu(e):zu))}))}),Sl({next:()=>n=!0,complete:()=>{if(!n){const n=new kl(e.id,this.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");t.next(n),e.resolve(!1)}}}));var r,i}),Sl(e=>{const t=new Ll(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Pd(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),A(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(t,n,r){return n.children.map(n=>{for(const i of r.children)if(t.shouldReuseRoute(i.value.snapshot,n.value))return e(t,n,i);return e(t,n)})}(t,n,r);return new Ah(i,o)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new Ph(new Du((i=n.value).url),new Du(i.params),new Du(i.queryParams),new Du(i.fragment),new Du(i.data),i.outlet,i.component,i),o=n.children.map(n=>e(t,n));return new Ah(r,o)}}var i}(e,t._root,n?n._root:void 0);return new Oh(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),Sl(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=e=>this.triggerEvent(e),A(e=>(new Jh(s,e.targetRouterState,e.currentRouterState,a).activate(o),e))),Sl({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new kl(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new Al(i))),yl(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Xh(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new kl(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new Rl(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(o){e.reject(o)}}var i;return zu}));var i,o,s,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Md(e),this.config=e.map(Dd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=t;mr()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,u=a?this.currentUrlTree.fragment:i;let l=null;if(s)switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=o?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return Vh(t.root,t.root,t,r,i);const o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Hh(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return eh(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Hh(n,t,r)}(n);if(o.toRoot())return Vh(t.root,new ih([],{}),t,r,i);const s=function(e,t,n){if(e.isAbsolute)return new qh(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new qh(e,e===t.root,0)}const r=jh(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new qh(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),a=s.processChildren?zh(s.segmentGroup,s.index,o.commands):Bh(s.segmentGroup,s.index,o.commands);return Vh(s.segmentGroup,a,t,r,i)}(c,this.currentUrlTree,e,l,u)}navigateByUrl(e,t={skipLocationChange:!1}){mr()&&this.isNgZoneEnabled&&!Ja.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Xh(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(Xh(e))return nh(this.currentUrlTree,e,t);const n=this.parseUrl(e);return nh(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new Pl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){const o=this.getTransition(),s="imperative"!==t&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===e.toString();if(s&&a)return Promise.resolve(!0);let c,u,l;i?(c=i.resolve,u=i.reject,l=i.promise):l=new Promise((e,t)=>{c=e,u=t});const h=++this.navigationId;return this.setTransition({id:h,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(t){return new(t||e)(We(eo),We(ch),We(Vd),We(qc),We(mo),We(mc),We(Ka),We(void 0))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),Kd=(()=>{class e{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ma,this.deactivateEvents=new ma,this.name=r||Gl,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Wd(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(No(Vd),No(ea),No(Is),("name",function(e,t){const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Fn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(cn(),"name")),No(Zi))},e.\u0275dir=mt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Wd{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Ph?this.route:e===Vd?this.childContexts:this.parent.get(e,t)}}class $d{}class Jd{preload(e,t){return Nu(null)}}let Yd=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new jd(t,n,t=>e.triggerEvent(new jl(t)),t=>e.triggerEvent(new Fl(t)))}setUpPreloading(){this.subscription=this.router.events.pipe($u(e=>e instanceof Pl),wl(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Qe);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return D(n).pipe(B(),A(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(V(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(We(Gd),We(mc),We(Ka),We(mo),We($d))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),Qd=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof xl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Pl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof zl&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new zl(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(We(Gd),We(iu),We(void 0))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const Zd=new De("ROUTER_CONFIGURATION"),Xd=new De("ROUTER_FORROOT_GUARD"),ef=[qc,{provide:ch,useClass:uh},{provide:Gd,useFactory:function(e,t,n,r,i,o,s,a={},c,u){const l=new Gd(null,e,t,n,r,i,o,Zl(s));if(c&&(l.urlHandlingStrategy=c),u&&(l.routeReuseStrategy=u),a.errorHandler&&(l.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(l.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const e=Ac();l.events.subscribe(t=>{e.logGroup("Router Event: "+t.constructor.name),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return a.onSameUrlNavigation&&(l.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(l.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(l.relativeLinkResolution=a.relativeLinkResolution),l},deps:[ch,Vd,qc,mo,mc,Ka,Ld,Zd,[class{},new ne],[class{},new ne]]},Vd,{provide:Ph,useFactory:function(e){return e.routerState.root},deps:[Gd]},{provide:mc,useClass:bc},Yd,Jd,class{preload(e,t){return t().pipe(yl(()=>Nu(null)))}},{provide:Zd,useValue:{enableTracing:!1}}];function tf(){return new uc("Router",Gd)}let nf=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[ef,af(t),{provide:Xd,useFactory:sf,deps:[[Gd,new ne,new ie]]},{provide:Zd,useValue:n||{}},{provide:Lc,useFactory:of,deps:[Oc,[new te(Fc),new ne],Zd]},{provide:Qd,useFactory:rf,deps:[Gd,iu,Zd]},{provide:$d,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Jd},{provide:uc,multi:!0,useFactory:tf},[cf,{provide:Oa,multi:!0,useFactory:uf,deps:[cf]},{provide:hf,useFactory:lf,deps:[cf]},{provide:Na,multi:!0,useExisting:hf}]]}}static forChild(t){return{ngModule:e,providers:[af(t)]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)(We(Xd,8),We(Gd,8))}}),e})();function rf(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Qd(e,t,n)}function of(e,t,n={}){return n.useHash?new Hc(e,t):new Vc(e,t)}function sf(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function af(e){return[{provide:yo,multi:!0,useValue:e},{provide:Ld,multi:!0,useValue:e}]}let cf=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(Pc,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(Gd),r=this.injector.get(Zd);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Nu(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(Zd),n=this.injector.get(Yd),r=this.injector.get(Qd),i=this.injector.get(Gd),o=this.injector.get(pc);e===o.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(We(mo))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();function uf(e){return e.appInitializer.bind(e)}function lf(e){return e.bootstrapListener.bind(e)}const hf=new De("Router Initializer"),df=["offline_access","User.Read","User.ReadWrite","Contacts.Read","User.ReadBasic.All","Chat.Read"],ff=new De("MSTeamsToken");var pf=n("O7od");let gf=(()=>{class e{constructor(e,t){this.document=e,this.msTeams=t,this.window=this.document.defaultView}dial(e){this.msTeams.getContext(t=>{t&&this.launchSoftphone(t,e)})}launchSoftphone(e,t){e.hostClientType===pf.HostClientType.web?this.msTeams.authentication.authenticate({url:this.window.location.origin+"#/softphonelauncher?number="+t,width:350,height:320}):this.window.location.href="tel://"+t}}return e.\u0275fac=function(t){return new(t||e)(We(Ic),We(ff))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const mf=function(e){return{"enable-call-button":e}};let yf=(()=>{class e{constructor(e){this.softphoneLauncher=e,this.number="",this.digits=new ma,this.number=""}set dialedNumber(e){this.number=e}ngOnInit(){}get isValidPhoneNumber(){return/^\d[\d ]*$/.test(this.number)||this.number.startsWith("+")}addDigit(e){this.number+=e,this.digits.emit(this.number)}dialNumber(){this.softphoneLauncher.dial(this.number)}}return e.\u0275fac=function(t){return new(t||e)(No(gf))},e.\u0275cmp=lt({type:e,selectors:[["app-dialer"]],inputs:{dialedNumber:"dialedNumber"},outputs:{digits:"digits"},decls:47,vars:3,consts:[[1,"container"],[1,"row"],["id","one",1,"digit",3,"click"],["id","two",1,"digit",3,"click"],[1,"sub"],["id","three",1,"digit",3,"click"],["id","four",1,"digit",3,"click"],["id","five",1,"digit",3,"click"],[1,"digit",3,"click"],[1,"botrow"],[1,"call",3,"ngClass","click"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),jo(2,"div",2),Ko("click",(function(){return t.addDigit("1")})),ss(3,"1"),Fo(),jo(4,"div",3),Ko("click",(function(){return t.addDigit("2")})),ss(5," 2 "),jo(6,"div",4),ss(7,"A B C"),Fo(),Fo(),jo(8,"div",5),Ko("click",(function(){return t.addDigit("3")})),ss(9," 3 "),jo(10,"div",4),ss(11,"D E F"),Fo(),Fo(),Fo(),jo(12,"div",1),jo(13,"div",6),Ko("click",(function(){return t.addDigit("4")})),ss(14," 4 "),jo(15,"div",4),ss(16,"G H I"),Fo(),Fo(),jo(17,"div",7),Ko("click",(function(){return t.addDigit("5")})),ss(18," 5 "),jo(19,"div",4),ss(20,"J K L"),Fo(),Fo(),jo(21,"div",8),Ko("click",(function(){return t.addDigit("6")})),ss(22," 6 "),jo(23,"div",4),ss(24,"M N O"),Fo(),Fo(),Fo(),jo(25,"div",1),jo(26,"div",8),Ko("click",(function(){return t.addDigit("7")})),ss(27," 7 "),jo(28,"div",4),ss(29,"P Q R S"),Fo(),Fo(),jo(30,"div",8),Ko("click",(function(){return t.addDigit("8")})),ss(31," 8 "),jo(32,"div",4),ss(33,"T U V"),Fo(),Fo(),jo(34,"div",8),Ko("click",(function(){return t.addDigit("9")})),ss(35," 9 "),jo(36,"div",4),ss(37,"W X Y Z"),Fo(),Fo(),Fo(),jo(38,"div",1),jo(39,"div",8),Ko("click",(function(){return t.addDigit("*")})),ss(40,"*"),Fo(),jo(41,"div",8),Ko("click",(function(){return t.addDigit("0")})),ss(42,"0"),Fo(),jo(43,"div",8),Ko("click",(function(){return t.addDigit("#")})),ss(44,"#"),Fo(),Fo(),jo(45,"div",9),jo(46,"div",10),Ko("click",(function(){return t.dialNumber()})),Fo(),Fo(),Fo()),2&e&&(Ur(46),Do("ngClass",ha(1,mf,t.isValidPhoneNumber)))},directives:[Jc],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.row[_ngcontent-%COMP%]{margin:0 auto;width:280px;clear:both;text-align:center;font-family:Exo}.dig[_ngcontent-%COMP%], .digit[_ngcontent-%COMP%]{background:#eef0f5;box-shadow:-12px -12px 20px #f7f7f7,12px 12px 20px #d7dee9;border-radius:50%;float:left;padding:15px;width:35px;height:35px;font-size:1.5rem;font-style:normal;font-weight:400;cursor:pointer;margin-left:10%;margin-bottom:10%}.fa-phone[_ngcontent-%COMP%]{font-size:35px;opacity:1%}.sub[_ngcontent-%COMP%]{font-size:.5rem;font-style:normal;font-weight:400;color:#464b51}.container[_ngcontent-%COMP%]{position:absolute;left:0;top:130px;width:320px;height:420px;text-align:center;min-width:320px}.hide-placeholder[_ngcontent-%COMP%]{background-image:none}.call[_ngcontent-%COMP%]{padding:20px;margin:10px 10px 10px 40px;background-image:url(call-icon.71b003478117a1c5f569.svg);background-repeat:no-repeat;background-size:60px 60px;background-position:50%;display:inline-block;color:#fff;border-radius:50%;pointer-events:none;width:30px;height:30px;opacity:.5}.enable-call-button[_ngcontent-%COMP%]{opacity:1;cursor:pointer;pointer-events:auto}.botrow[_ngcontent-%COMP%]{margin:0 auto;width:280px;clear:both;text-align:center;font-family:Exo}"]}),e})(),vf=(()=>{class e{constructor(e,t,n){this.route=e,this.document=t,this.msTeams=n,this.window=this.document.defaultView}ngOnInit(){this.msTeams.initialize(this.window),this.msTeams.getContext(e=>{e&&this.route.queryParams.subscribe(e=>{this.window.location.href="tel:"+e.number})})}}return e.\u0275fac=function(t){return new(t||e)(No(Ph),No(Ic),No(ff))},e.\u0275cmp=lt({type:e,selectors:[["app-softphone-launcher"]],decls:2,vars:0,template:function(e,t){1&e&&(jo(0,"p"),ss(1,"Launching softphone..."),Fo())},styles:[""]}),e})();var bf=function(e,t){return(bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function wf(e,t){function n(){this.constructor=e}bf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _f=function(){return(_f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Cf(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function Sf(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Ef(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var Tf=n("4v+I"),Af=function(e){return e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE",e}({});class If{constructor(e=[]){this.middlewareOptions=new Map;for(const t of e)this.middlewareOptions.set(t.constructor,t)}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,t){this.middlewareOptions.set(e,t)}}const Of=(e,t,n)=>{let r=null;if("undefined"!=typeof Request&&e instanceof Request)r=e.headers.get(n);else if(void 0!==t&&void 0!==t.headers)if("undefined"!=typeof Headers&&t.headers instanceof Headers)r=t.headers.get(n);else if(t.headers instanceof Array){const e=t.headers;for(let t=0,i=e.length;t<i;t++)if(e[t][0]===n){r=e[t][1];break}}else void 0!==t.headers[n]&&(r=t.headers[n]);return r},xf=(e,t,n,r)=>{if("undefined"!=typeof Request&&e instanceof Request)e.headers.set(n,r);else if(void 0!==t)if(void 0===t.headers)t.headers=new Headers({[n]:r});else if("undefined"!=typeof Headers&&t.headers instanceof Headers)t.headers.set(n,r);else if(t.headers instanceof Array){let e=0;const i=t.headers.length;for(;e<i;e++){const i=t.headers[e];if(i[0]===n){i[1]=r;break}}e===i&&t.headers.push([n,r])}else Object.assign(t.headers,{[n]:r})},Pf=(e,t,n,r)=>{"undefined"!=typeof Request&&e instanceof Request?e.headers.append(n,r):void 0!==t&&(void 0===t.headers?t.headers=new Headers({[n]:r}):"undefined"!=typeof Headers&&t.headers instanceof Headers?t.headers.append(n,r):t.headers instanceof Array?t.headers.push([n,r]):void 0===t.headers?t.headers={[n]:r}:void 0===t.headers[n]?t.headers[n]=r:t.headers[n]+=", "+r)};class kf{constructor(e,t){this.authenticationProvider=e,this.authenticationProviderOptions=t}}var Rf=function(e){return e[e.NONE=0]="NONE",e[e.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",e[e.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",e[e.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED",e}({});class Mf{constructor(){this.featureUsage=Rf.NONE}static updateFeatureUsageFlag(e,t){let n;e.middlewareControl instanceof If?n=e.middlewareControl.getMiddlewareOptions(Mf):e.middlewareControl=new If,void 0===n&&(n=new Mf,e.middlewareControl.setMiddlewareOptions(Mf,n)),n.setFeatureUsage(t)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}let Uf=(()=>{class e{constructor(e){this.authenticationProvider=e}execute(t){return Tf.__awaiter(this,void 0,void 0,(function*(){try{let n,r,i;t.middlewareControl instanceof If&&(n=t.middlewareControl.getMiddlewareOptions(kf)),void 0!==n&&(r=n.authenticationProvider,i=n.authenticationProviderOptions),void 0===r&&(r=this.authenticationProvider);const o=yield r.getAccessToken(i);return Pf(t.request,t.options,e.AUTHORIZATION_HEADER,"Bearer "+o),Mf.updateFeatureUsageFlag(t,Rf.AUTHENTICATION_HANDLER_ENABLED),yield this.nextMiddleware.execute(t)}catch(n){throw n}}))}setNext(e){this.nextMiddleware=e}}return e.AUTHORIZATION_HEADER="Authorization",e})();class Nf{execute(e){return Tf.__awaiter(this,void 0,void 0,(function*(){try{return void(e.response=yield fetch(e.request,e.options))}catch(t){throw t}}))}}let Df=(()=>{class e{constructor(t=e.DEFAULT_DELAY,n=e.DEFAULT_MAX_RETRIES,r=e.DEFAULT_SHOULD_RETRY){if(t>e.MAX_DELAY&&n>e.MAX_MAX_RETRIES){const t=new Error(`Delay and MaxRetries should not be more than ${e.MAX_DELAY} and ${e.MAX_MAX_RETRIES}`);throw t.name="MaxLimitExceeded",t}if(t>e.MAX_DELAY){const t=new Error("Delay should not be more than "+e.MAX_DELAY);throw t.name="MaxLimitExceeded",t}if(n>e.MAX_MAX_RETRIES){const t=new Error("MaxRetries should not be more than "+e.MAX_MAX_RETRIES);throw t.name="MaxLimitExceeded",t}if(t<0&&n<0){const e=new Error("Delay and MaxRetries should not be negative");throw e.name="MinExpectationNotMet",e}if(t<0){const e=new Error("Delay should not be negative");throw e.name="MinExpectationNotMet",e}if(n<0){const e=new Error("MaxRetries should not be negative");throw e.name="MinExpectationNotMet",e}this.delay=Math.min(t,e.MAX_DELAY),this.maxRetries=Math.min(n,e.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return e.MAX_DELAY}}return e.DEFAULT_DELAY=3,e.DEFAULT_MAX_RETRIES=3,e.MAX_DELAY=180,e.MAX_MAX_RETRIES=10,e.DEFAULT_SHOULD_RETRY=()=>!0,e})(),Lf=(()=>{class e{constructor(e=new Df){this.options=e}isRetry(t){return-1!==e.RETRY_STATUS_CODES.indexOf(t.status)}isBuffered(e,t){const n="string"==typeof e?t.method:e.method;return n!==Af.PUT&&n!==Af.PATCH&&n!==Af.POST||"application/octet-stream"!==Of(e,t,"Content-Type")}getDelay(t,n,r){const i=()=>Number(Math.random().toFixed(3)),o=void 0!==t.headers?t.headers.get(e.RETRY_AFTER_HEADER):null;let s;return s=null!==o?Number.isNaN(Number(o))?Math.round((new Date(o).getTime()-Date.now())/1e3):Number(o):n>=2?this.getExponentialBackOffTime(n)+r+i():r+i(),Math.min(s,this.options.getMaxDelay()+i())}getExponentialBackOffTime(e){return Math.round(.5*(Math.pow(2,e)-1))}sleep(e){return Tf.__awaiter(this,void 0,void 0,(function*(){const t=1e3*e;return new Promise(e=>setTimeout(e,t))}))}getOptions(e){let t;return e.middlewareControl instanceof If&&(t=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),void 0===t&&(t=Object.assign(new Df,this.options)),t}executeWithRetry(t,n,r){return Tf.__awaiter(this,void 0,void 0,(function*(){try{if(yield this.nextMiddleware.execute(t),n<r.maxRetries&&this.isRetry(t.response)&&this.isBuffered(t.request,t.options)&&r.shouldRetry(r.delay,n,t.request,t.options,t.response)){++n,xf(t.request,t.options,e.RETRY_ATTEMPT_HEADER,n.toString());const i=this.getDelay(t.response,n,r.delay);return yield this.sleep(i),yield this.executeWithRetry(t,n,r)}return}catch(i){throw i}}))}execute(e){return Tf.__awaiter(this,void 0,void 0,(function*(){try{const t=0,n=this.getOptions(e);return Mf.updateFeatureUsageFlag(e,Rf.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,t,n)}catch(t){throw t}}))}setNext(e){this.nextMiddleware=e}}return e.RETRY_STATUS_CODES=[429,503,504],e.RETRY_ATTEMPT_HEADER="Retry-Attempt",e.RETRY_AFTER_HEADER="Retry-After",e})(),jf=(()=>{class e{constructor(t=e.DEFAULT_MAX_REDIRECTS,n=e.DEFAULT_SHOULD_RETRY){if(t>e.MAX_MAX_REDIRECTS){const t=new Error("MaxRedirects should not be more than "+e.MAX_MAX_REDIRECTS);throw t.name="MaxLimitExceeded",t}if(t<0){const e=new Error("MaxRedirects should not be negative");throw e.name="MinExpectationNotMet",e}this.maxRedirects=t,this.shouldRedirect=n}}return e.DEFAULT_MAX_REDIRECTS=5,e.MAX_MAX_REDIRECTS=20,e.DEFAULT_SHOULD_RETRY=()=>!0,e})(),Ff=(()=>{class e{constructor(e=new jf){this.options=e}isRedirect(t){return-1!==e.REDIRECT_STATUS_CODES.indexOf(t.status)}hasLocationHeader(t){return t.headers.has(e.LOCATION_HEADER)}getLocationHeader(t){return t.headers.get(e.LOCATION_HEADER)}isRelativeURL(e){return-1===e.indexOf("://")}shouldDropAuthorizationHeader(e,t){const n=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,r=n.exec(e);let i,o;null!==r&&(i=r[0]);const s=n.exec(t);return null!==s&&(o=s[0]),void 0!==i&&void 0!==o&&i!==o}updateRequestUrl(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){var n,r;t.request="string"==typeof t.request?e:yield(n=e,r=t.request,Tf.__awaiter(void 0,void 0,void 0,(function*(){const e=r.headers.get("Content-Type")?yield r.blob():yield Promise.resolve(void 0),{method:t,headers:i,referrer:o,referrerPolicy:s,mode:a,credentials:c,cache:u,redirect:l,integrity:h,keepalive:d,signal:f}=r;return new Request(n,{method:t,headers:i,body:e,referrer:o,referrerPolicy:s,mode:a,credentials:c,cache:u,redirect:l,integrity:h,keepalive:d,signal:f})})))}))}getOptions(e){let t;return e.middlewareControl instanceof If&&(t=e.middlewareControl.getMiddlewareOptions(jf)),void 0===t&&(t=Object.assign(new jf,this.options)),t}executeWithRedirect(t,n,r){return Tf.__awaiter(this,void 0,void 0,(function*(){try{yield this.nextMiddleware.execute(t);const i=t.response;if(!(n<r.maxRedirects&&this.isRedirect(i)&&this.hasLocationHeader(i)&&r.shouldRedirect(i)))return;if(++n,i.status===e.STATUS_CODE_SEE_OTHER)t.options.method=Af.GET,delete t.options.body;else{const n=this.getLocationHeader(i);!this.isRelativeURL(n)&&this.shouldDropAuthorizationHeader(i.url,n)&&xf(t.request,t.options,e.AUTHORIZATION_HEADER,void 0),yield this.updateRequestUrl(n,t)}yield this.executeWithRedirect(t,n,r)}catch(i){throw i}}))}execute(t){return Tf.__awaiter(this,void 0,void 0,(function*(){try{const n=0,r=this.getOptions(t);return t.options.redirect=e.MANUAL_REDIRECT,Mf.updateFeatureUsageFlag(t,Rf.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(t,n,r)}catch(n){throw n}}))}setNext(e){this.nextMiddleware=e}}return e.REDIRECT_STATUS_CODES=[301,302,303,307,308],e.STATUS_CODE_SEE_OTHER=303,e.LOCATION_HEADER="Location",e.AUTHORIZATION_HEADER="Authorization",e.MANUAL_REDIRECT="manual",e})(),Vf=(()=>{class e{execute(t){return Tf.__awaiter(this,void 0,void 0,(function*(){try{let n=Of(t.request,t.options,e.CLIENT_REQUEST_ID_HEADER);null===n&&(n=(()=>{let e="";for(let t=0;t<32;t++)8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=Math.floor(16*Math.random()).toString(16);return e})(),xf(t.request,t.options,e.CLIENT_REQUEST_ID_HEADER,n));let r,i=e.PRODUCT_NAME+"/2.1.1";if(t.middlewareControl instanceof If&&(r=t.middlewareControl.getMiddlewareOptions(Mf)),void 0!==r){const t=r.getFeatureUsage();i+=` (${e.FEATURE_USAGE_STRING}=${t})`}return Pf(t.request,t.options,e.SDK_VERSION_HEADER,i),yield this.nextMiddleware.execute(t)}catch(n){throw n}}))}setNext(e){this.nextMiddleware=e}}return e.CLIENT_REQUEST_ID_HEADER="client-request-id",e.SDK_VERSION_HEADER="SdkVersion",e.PRODUCT_NAME="graph-js",e.FEATURE_USAGE_STRING="featureUsage",e})();class Hf{constructor(e){this.provider=e}getAccessToken(){return Tf.__awaiter(this,void 0,void 0,(function*(){return new Promise((e,t)=>{this.provider((n,r)=>{r?e(r):t(n)})})}))}}class qf extends Error{constructor(e=-1,t,n){super(t||n&&n.message),Object.setPrototypeOf(this,qf.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=n?n.stack:this.stack}}class Bf{static constructError(e,t){const n=new qf(t,"",e);return void 0!==e.name&&(n.code=e.name),n.body=e.toString(),n.date=new Date,n}static constructErrorFromResponse(e,t){const n=new qf(t,(e=e.error).message);n.code=e.code,void 0!==e.innerError&&(n.requestId=e.innerError["request-id"],n.date=new Date(e.innerError.date));try{n.body=JSON.stringify(e)}catch(e){}return n}static getError(e=null,t=-1,n){return Tf.__awaiter(this,void 0,void 0,(function*(){let r;if(r=e&&e.error?Bf.constructErrorFromResponse(e,t):"undefined"!=typeof Error&&e instanceof Error?Bf.constructError(e,t):new qf(t),"function"!=typeof n)return r;n(r,null)}))}}const zf=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],Gf=e=>{const t=e&&e.constructor&&e.constructor.name;if("Buffer"===t||"Blob"===t||"File"===t||"FormData"===t||"string"==typeof e)return e;if("ArrayBuffer"===t)e=Buffer.from(e);else if("Int8Array"===t||"Int16Array"===t||"Int32Array"===t||"Uint8Array"===t||"Uint16Array"===t||"Uint32Array"===t||"Uint8ClampedArray"===t||"Float32Array"===t||"Float64Array"===t||"DataView"===t)e=Buffer.from(e.buffer);else try{e=JSON.stringify(e)}catch(n){throw new Error("Unable to stringify the content")}return e};var Kf=function(e){return e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.RAW="raw",e.STREAM="stream",e.TEXT="text",e}({}),Wf=function(e){return e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML="application/xhtml+xml",e}({}),$f=function(e){return e.TEXT_PLAIN="text/plain",e.APPLICATION_JSON="application/json",e}({}),Jf=function(e){return e.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",e.IMAGE="^image\\/.+",e}({});class Yf{static parseDocumentResponse(e,t){try{return"undefined"!=typeof DOMParser?new Promise((n,r)=>{e.text().then(e=>{try{const r=(new DOMParser).parseFromString(e,t);n(r)}catch(i){r(i)}})}):Promise.resolve(e.body)}catch(n){throw n}}static convertResponse(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){if(204===e.status)return Promise.resolve();let n;try{switch(t){case Kf.ARRAYBUFFER:n=yield e.arrayBuffer();break;case Kf.BLOB:n=yield e.blob();break;case Kf.DOCUMENT:n=yield Yf.parseDocumentResponse(e,Wf.TEXT_XML);break;case Kf.JSON:n=yield e.json();break;case Kf.STREAM:n=yield Promise.resolve(e.body);break;case Kf.TEXT:n=yield e.text();break;default:const t=e.headers.get("Content-type");if(null!==t){const r=t.split(";")[0];n=new RegExp(Jf.DOCUMENT).test(r)?yield Yf.parseDocumentResponse(e,r):new RegExp(Jf.IMAGE).test(r)?e.blob():r===$f.TEXT_PLAIN?yield e.text():r===$f.APPLICATION_JSON?yield e.json():Promise.resolve(e.body)}else n=Promise.resolve(e.body)}}catch(r){throw r}return n}))}static getResponse(e,t,n){return Tf.__awaiter(this,void 0,void 0,(function*(){try{if(t===Kf.RAW)return Promise.resolve(e);{const r=yield Yf.convertResponse(e,t);if(!e.ok)throw r;if("function"!=typeof n)return r;n(null,r)}}catch(r){throw r}}))}}class Qf{constructor(e,t,n){this.parsePath=e=>{if(-1!==e.indexOf("https://")){const t=(e=e.replace("https://","")).indexOf("/");-1!==t&&(this.urlComponents.host="https://"+e.substring(0,t),e=e.substring(t+1,e.length));const n=e.indexOf("/");-1!==n&&(this.urlComponents.version=e.substring(0,n),e=e.substring(n+1,e.length))}"/"===e.charAt(0)&&(e=e.substr(1));const t=e.indexOf("?");if(-1===t)this.urlComponents.path=e;else{this.urlComponents.path=e.substr(0,t);const n=e.substring(t+1,e.length).split("&");for(const e of n)this.parseQueryParameter(e)}},this.httpClient=e,this.config=t,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(n)}addCsvQueryParameter(e,t,n){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let r=[];n.length>1&&"string"==typeof t?r=Array.prototype.slice.call(n):"string"==typeof t?r.push(t):r=r.concat(t),this.urlComponents.oDataQueryParams[e]+=r.join(",")}buildFullUrl(){const e=(e=>{const t=e=>e.replace(/^\/+/,"");return Array.prototype.slice.call([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path]).reduce((e,n)=>{return[(r=e,r.replace(/\/+$/,"")),t(n)].join("/");var r})})()+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,t=[];if(0!==Object.keys(e.oDataQueryParams).length)for(const n in e.oDataQueryParams)e.oDataQueryParams.hasOwnProperty(n)&&t.push(n+"="+e.oDataQueryParams[n]);if(0!==Object.keys(e.otherURLQueryParams).length)for(const n in e.otherURLQueryParams)e.otherURLQueryParams.hasOwnProperty(n)&&t.push(n+"="+e.otherURLQueryParams[n]);if(0!==e.otherURLQueryOptions.length)for(const n of e.otherURLQueryOptions)t.push(n);return t.length>0?"?"+t.join("&"):""}parseQueryParameter(e){if("string"==typeof e)if("?"===e.charAt(0)&&(e=e.substring(1)),-1!==e.indexOf("&")){const t=e.split("&");for(const e of t)this.parseQueryParamenterString(e)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const t in e)e.hasOwnProperty(t)&&this.setURLComponentsQueryParamater(t,e[t]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const t=e.indexOf("="),n=e.substring(0,t),r=e.substring(t+1);this.setURLComponentsQueryParamater(n,r)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,t){if(-1!==zf.indexOf(e)){const n=this.urlComponents.oDataQueryParams[e];this.urlComponents.oDataQueryParams[e]=!n||"$expand"!==e&&"$select"!==e&&"$orderby"!==e?t:n+","+t}else this.urlComponents.otherURLQueryParams[e]=t}isValidQueryKeyValuePair(e){const t=e.indexOf("=");return-1!==t&&!(-1!==e.indexOf("(")&&e.indexOf("(")<t)}updateRequestOptions(e){const t=Object.assign({},e.headers);if(void 0!==this.config.fetchOptions){const t=Object.assign({},this.config.fetchOptions);Object.assign(e,t),void 0!==typeof this.config.fetchOptions.headers&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),void 0!==e.headers&&Object.assign(t,e.headers),Object.assign(t,this._headers),e.headers=t}send(e,t,n){return Tf.__awaiter(this,void 0,void 0,(function*(){let r;const i=new If(this._middlewareOptions);this.updateRequestOptions(t);try{return r=(yield this.httpClient.sendRequest({request:e,options:t,middlewareControl:i})).response,yield Yf.getResponse(r,this._responseType,n)}catch(o){let e;throw void 0!==r&&(e=r.status),yield Bf.getError(o,e,n)}}))}setHeaderContentType(){if(!this._headers)return void this.header("Content-Type","application/json");const e=Object.keys(this._headers);for(const t of e)if("content-type"===t.toLowerCase())return;this.header("Content-Type","application/json")}header(e,t){return this._headers[e]=t,this}headers(e){for(const t in e)e.hasOwnProperty(t)&&(this._headers[t]=e[t]);return this}option(e,t){return this._options[e]=t,this}options(e){for(const t in e)e.hasOwnProperty(t)&&(this._options[t]=e[t]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(e=!1){return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return Tf.__awaiter(this,void 0,void 0,(function*(){const t=this.buildFullUrl(),n={method:Af.GET};try{return yield this.send(t,n,e)}catch(r){throw r}}))}post(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){const n=this.buildFullUrl(),r={method:Af.POST,body:Gf(e)};"FormData"===(e&&e.constructor&&e.constructor.name)?r.headers={}:(this.setHeaderContentType(),r.headers=this._headers);try{return yield this.send(n,r,t)}catch(i){throw i}}))}create(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){try{return yield this.post(e,t)}catch(n){throw n}}))}put(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){const n=this.buildFullUrl();this.setHeaderContentType();const r={method:Af.PUT,body:Gf(e)};try{return yield this.send(n,r,t)}catch(i){throw i}}))}patch(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){const n=this.buildFullUrl();this.setHeaderContentType();const r={method:Af.PATCH,body:Gf(e)};try{return yield this.send(n,r,t)}catch(i){throw i}}))}update(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){try{return yield this.patch(e,t)}catch(n){throw n}}))}delete(e){return Tf.__awaiter(this,void 0,void 0,(function*(){const t=this.buildFullUrl(),n={method:Af.DELETE};try{return yield this.send(t,n,e)}catch(r){throw r}}))}del(e){return Tf.__awaiter(this,void 0,void 0,(function*(){try{return yield this.delete(e)}catch(t){throw t}}))}getStream(e){return Tf.__awaiter(this,void 0,void 0,(function*(){const t=this.buildFullUrl(),n={method:Af.GET};this.responseType(Kf.STREAM);try{return yield this.send(t,n,e)}catch(r){throw r}}))}putStream(e,t){return Tf.__awaiter(this,void 0,void 0,(function*(){const n=this.buildFullUrl(),r={method:Af.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};try{return yield this.send(n,r,t)}catch(i){throw i}}))}}class Zf{constructor(...e){if(!e||!e.length){const e=new Error;throw e.name="InvalidMiddlewareChain",e.message="Please provide a default middleware chain or custom middleware chain",e}this.setMiddleware(...e)}setMiddleware(...e){e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]}parseMiddleWareArray(e){e.forEach((t,n)=>{n<e.length-1&&t.setNext(e[n+1])}),this.middleware=e[0]}sendRequest(e){return Tf.__awaiter(this,void 0,void 0,(function*(){try{if("string"==typeof e.request&&void 0===e.options){const e=new Error;throw e.name="InvalidRequestOptions",e.message="Unable to execute the middleware, Please provide valid options for a request",e}return yield this.middleware.execute(e),e}catch(t){throw t}}))}}class Xf{static createWithAuthenticationProvider(e){const t=new Uf(e),n=new Lf(new Df),r=new Vf,i=new Nf;if(t.setNext(n),"object"==typeof process){const e=new Ff(new jf);n.setNext(e),e.setNext(r)}else n.setNext(r);return r.setNext(i),Xf.createWithMiddleware(t)}static createWithMiddleware(...e){return new Zf(...e)}}class ep{constructor(e){this.config={baseUrl:"https://graph.microsoft.com/",debugLogging:!1,defaultVersion:"v1.0"};try{(()=>{if("undefined"==typeof Promise&&"undefined"==typeof fetch){const e=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw e.name="PolyFillNotAvailable",e}if("undefined"==typeof Promise){const e=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}if("undefined"==typeof fetch){const e=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}})()}catch(n){throw n}for(const r in e)e.hasOwnProperty(r)&&(this.config[r]=e[r]);let t;if(void 0!==e.authProvider&&void 0!==e.middleware){const e=new Error;throw e.name="AmbiguityInInitialization",e.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",e}if(void 0!==e.authProvider)t=Xf.createWithAuthenticationProvider(e.authProvider);else{if(void 0===e.middleware){const e=new Error;throw e.name="InvalidMiddlewareChain",e.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",e}t=new Zf(...[].concat(e.middleware))}this.httpClient=t}static init(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]="authProvider"===n?new Hf(e[n]):e[n]);return ep.initWithMiddleware(t)}static initWithMiddleware(e){try{return new ep(e)}catch(t){throw t}}api(e){return new Qf(this.httpClient,this.config,e)}}var tp=function(e){return e[e.Add=0]="Add",e[e.Delete=1]="Delete",e}({});class np{constructor({businessPhones:e,displayName:t,givenName:n,jobTitle:r,mail:i,mobilePhone:o,officeLocation:s,preferredLanguage:a,surname:c,userPrincipalName:u,id:l,photo:h}){var d;this.businessPhones=[],this.allPhones=[],this.id=l,this.businessPhones=e||[],this.displayName=t,this.givenName=n,this.jobTitle=r,this.mail=i,this.mobilePhone=o||"",this.officeLocation=s,this.preferredLanguage=a,this.surname=c,this.userPrincipalName=u,this.photo=h,this.allPhones=this.businessPhones.map(e=>({type:"business",number:e})),this.mobilePhone&&this.allPhones.push({type:"mobile",number:this.mobilePhone}),this.selectPhoneNumber(null===(d=this.allPhones[0])||void 0===d?void 0:d.number)}get initials(){const e=this.displayName.split(" ");return e.length>1?e[0].charAt(0).toUpperCase()+e[1].charAt(0).toUpperCase():e[0].charAt(0).toUpperCase()}get hasPhoneNumber(){return!!this.allPhones[0]}get hasMoreThanOnePhoneNumbers(){return this.allPhones.length>1}get filteredPhoneNumbers(){return this.allPhones.filter(e=>e.number!==this.selectedPhoneNumber)}selectPhoneNumber(e=""){this.selectedPhoneNumber=e}updatePhones(e){return e.allPhones.length>0&&(this.allPhones=e.allPhones),this}updatePhoto(e){return this.photo=e.photo||"",this}}var rp=function(e,t){return(rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ip(e,t){function n(){this.constructor=e}rp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var op=function(){return(op=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function sp(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function ap(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function cp(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function up(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(cp(arguments[t]));return e}var lp=function(e,t){return(lp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function hp(e,t){function n(){this.constructor=e}lp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var dp=function(){return(dp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function fp(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function pp(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function gp(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var mp,yp=function(e){function t(n,r,i){var o=this;return o=e.call(this,r?n+": "+r:n)||this,Object.setPrototypeOf(o,t.prototype),o.errorCode=n,o.errorMessage=r,o.suberror=i,o.name="AuthError",o}return hp(t,e),t.createUnexpectedError=function(e){return new t("unexpected_error","Unexpected error in authentication.: "+e)},t}(Error),vp="no_tokens_found",bp="token_refresh_required",wp=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ClientAuthError",Object.setPrototypeOf(i,t.prototype),i}return hp(t,e),t.createClientInfoDecodingError=function(e){return new t("client_info_decoding_error","The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause. Failed with error: "+e)},t.createClientInfoEmptyError=function(e){return new t("client_info_empty_error","The client info was empty. Please review the trace to determine the root cause. Given Object: "+e)},t.createTokenParsingError=function(e){return new t("token_parsing_error","Token cannot be parsed. Please review stack trace to determine root cause. Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t("null_or_empty_token","The token is null or empty. Please review the trace to determine the root cause. Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t("endpoints_resolution_error","Error: could not resolve endpoints. Please check network and try again. Detail: "+e)},t.createHashNotDeserializedError=function(e){return new t("hash_not_deserialized","The hash parameters could not be deserialized. Please review the trace to determine the root cause. Given Object: "+e)},t.createInvalidStateError=function(e,n){return new t("invalid_state","State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState(). Invalid State: "+e+", Root Err: "+n)},t.createStateMismatchError=function(){return new t("state_mismatch","State mismatch error. Please check your network. Continued requests may cause cache overflow.")},t.createNonceMismatchError=function(){return new t("nonce_mismatch","Nonce mismatch error. This may be caused by a race condition in concurrent requests.")},t.createNoTokensFoundError=function(){return new t(vp,"No tokens were found for the given scopes, and no authorization code was passed to acquireToken. You must retrieve an authorization code before making a call to acquireToken().")},t.createMultipleMatchingTokensInCacheError=function(){return new t("multiple_matching_tokens","The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account..")},t.createMultipleMatchingAccountsInCacheError=function(){return new t("multiple_matching_accounts","The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account")},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t("multiple_matching_appMetadata","The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata")},t.createTokenRequestCannotBeMadeError=function(){return new t("request_cannot_be_made","Token request cannot be made without authorization code or refresh token.")},t.createAppendEmptyScopeToSetError=function(e){return new t("cannot_append_empty_scope","Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info. Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t("cannot_remove_empty_scope","Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info. Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t("cannot_append_scopeset","Cannot append ScopeSet due to error. Detail Error: "+e)},t.createEmptyInputScopeSetError=function(e){return new t("empty_input_scopeset","Empty input ScopeSet cannot be processed. Given ScopeSet: "+e)},t.createDeviceCodeCancelledError=function(){return new t("device_code_polling_cancelled","Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.")},t.createDeviceCodeExpiredError=function(){return new t("device_code_expired","Device code is expired.")},t.createNoAccountInSilentRequestError=function(){return new t("no_account_in_silent_request","Please pass an account object, silent flow is not supported without account information")},t.createNullOrUndefinedCacheRecord=function(){return new t("invalid_cache_record","Cache record object was null or undefined.")},t.createInvalidCacheEnvironmentError=function(){return new t("invalid_cache_environment","Invalid environment when attempting to create cache entry")},t.createNoAccountFoundError=function(){return new t("no_account_found","No account found in cache for given key.")},t.createCachePluginError=function(){return new t("no cache plugin set on CacheManager","ICachePlugin needs to be set before using readFromStorage or writeFromStorage")},t.createNoCryptoObjectError=function(e){return new t("no_crypto_object","No crypto object detected. This is required for the following operation: "+e)},t.createInvalidCacheTypeError=function(){return new t("invalid_cache_type","Invalid cache type")},t.createUnexpectedAccountTypeError=function(){return new t("unexpected_account_type","Unexpected account type.")},t.createUnexpectedCredentialTypeError=function(){return new t("unexpected_credential_type","Unexpected credential type.")},t.createInvalidAssertionError=function(){return new t("invalid_assertion","Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515")},t.createInvalidCredentialError=function(){return new t("invalid_client_credential","Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential")},t.createRefreshRequiredError=function(){return new t(bp,"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.")},t}(yp),_p=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw wp.createTokenNullOrEmptyError(t);var n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw wp.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:n[1],JWSPayload:n[2],JWSSig:n[3]}},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.startsWith=function(e,t){return 0===e.indexOf(t)},e.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},e.queryStringToObject=function(e){var t,n=/\+/g,r=/([^&=]+)=([^&]*)/g,i=function(e){return decodeURIComponent(decodeURIComponent(e.replace(n," ")))},o={};for(t=r.exec(e);t;)o[i(t[1])]=i(t[2]),t=r.exec(e);return o},e.trimArrayEntries=function(e){return e.map((function(e){return e.trim()}))},e.removeEmptyStringsFromArray=function(t){return t.filter((function(t){return!e.isEmpty(t)}))},e.jsonParseHelper=function(e){try{return JSON.parse(e)}catch(t){return null}},e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(mp||(mp={}));var Cp,Sp,Ep,Tp,Ap,Ip=function(){function e(e){this.level=mp.Info,e&&(this.localCallback=e.loggerCallback,this.piiLoggingEnabled=e.piiLoggingEnabled,this.level=e.logLevel)}return e.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var n=(new Date).toUTCString(),r=_p.isEmpty(this.correlationId)?"["+n+"] : ":"["+n+"] : ["+this.correlationId+"]";this.executeCallback(t.logLevel,r+" : 1.7.0 : "+mp[t.logLevel]+" - "+e,t.containsPii)}},e.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},e.prototype.error=function(e,t){this.logMessage(e,{logLevel:mp.Error,containsPii:!1,correlationId:t||""})},e.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:mp.Error,containsPii:!0,correlationId:t||""})},e.prototype.warning=function(e,t){this.logMessage(e,{logLevel:mp.Warning,containsPii:!1,correlationId:t||""})},e.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:mp.Warning,containsPii:!0,correlationId:t||""})},e.prototype.info=function(e,t){this.logMessage(e,{logLevel:mp.Info,containsPii:!1,correlationId:t||""})},e.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:mp.Info,containsPii:!0,correlationId:t||""})},e.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:mp.Verbose,containsPii:!1,correlationId:t||""})},e.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:mp.Verbose,containsPii:!0,correlationId:t||""})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},e}(),Op="msal",xp="https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",Pp="openid",kp="profile",Rp="offline_access",Mp="not_defined";!function(e){e.CONTENT_TYPE="Content-Type",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.RETRY_AFTER="Retry-After",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.X_MS_LIB_CAPABILITY_VALUE="retry-after, h429"}(Cp||(Cp={})),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description"}(Sp||(Sp={})),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(Ep||(Ep={})),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci"}(Tp||(Tp={})),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(Ap||(Ap={}));var Up,Np={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none"};!function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(Up||(Up={}));var Dp,Lp,jp,Fp,Vp,Hp,qp,Bp={PLAIN:"plain",S256:"S256"};!function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(Dp||(Dp={})),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(Lp||(Lp={})),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(jp||(jp={})),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(Fp||(Fp={})),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.REFRESH_TOKEN="RefreshToken"}(Vp||(Vp={})),function(e){e.ACCOUNT="Account",e.CREDENTIAL="Credential",e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.REFRESH_TOKEN="RefreshToken",e.APP_METADATA="AppMetadata",e.TEMPORARY="TempCache",e.TELEMETRY="Telemetry",e.UNDEFINED="Undefined",e.THROTTLING="Throttling"}(Hp||(Hp={})),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(qp||(qp={}));var zp,Gp="appmetadata",Kp="1",Wp={SCHEMA_VERSION:2,MAX_HEADER_BYTES:4e3,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};!function(e){e.POP="pop",e.BEARER="Bearer"}(zp||(zp={}));var $p;!function(e){e.username="username",e.password="password"}($p||($p={}));var Jp,Yp=function(){function e(){}return e.prototype.generateAccountId=function(){return e.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},e.prototype.generateCredentialId=function(){return e.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},e.prototype.generateTarget=function(){return e.generateTargetForCacheKey(this.target)},e.prototype.generateCredentialKey=function(){return e.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId)},e.prototype.generateType=function(){switch(this.credentialType){case Vp.ID_TOKEN:return qp.ID_TOKEN;case Vp.ACCESS_TOKEN:return qp.ACCESS_TOKEN;case Vp.REFRESH_TOKEN:return qp.REFRESH_TOKEN;default:throw wp.createUnexpectedCredentialTypeError()}},e.getCredentialType=function(e){return-1!==e.indexOf(Vp.ACCESS_TOKEN.toLowerCase())?Vp.ACCESS_TOKEN:-1!==e.indexOf(Vp.ID_TOKEN.toLowerCase())?Vp.ID_TOKEN:-1!==e.indexOf(Vp.REFRESH_TOKEN.toLowerCase())?Vp.REFRESH_TOKEN:Mp},e.generateCredentialCacheKey=function(e,t,n,r,i,o,s){return[this.generateAccountIdForCacheKey(e,t),this.generateCredentialIdForCacheKey(n,r,i,s),this.generateTargetForCacheKey(o)].join(Fp.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateAccountIdForCacheKey=function(e,t){return[e,t].join(Fp.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateCredentialIdForCacheKey=function(e,t,n,r){return[e,e===Vp.REFRESH_TOKEN&&r||t,n||""].join(Fp.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateTargetForCacheKey=function(e){return(e||"").toLowerCase()},e}(),Qp=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="ClientConfigurationError",Object.setPrototypeOf(i,t.prototype),i}return hp(t,e),t.createRedirectUriEmptyError=function(){return new t("redirect_uri_empty","A redirect URI is required for all calls, and none has been set.")},t.createPostLogoutRedirectUriEmptyError=function(){return new t("post_logout_uri_empty","A post logout redirect has not been set.")},t.createClaimsRequestParsingError=function(e){return new t("claims_request_parsing_error","Could not parse the given claims request object. Given value: "+e)},t.createInsecureAuthorityUriError=function(e){return new t("authority_uri_insecure","Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options Given URI: "+e)},t.createUrlParseError=function(e){return new t("url_parse_error","URL could not be parsed into appropriate segments. Given Error: "+e)},t.createUrlEmptyError=function(){return new t("empty_url_error","URL was empty or null.")},t.createScopesNonArrayError=function(e){return new t("nonarray_input_scopes_error","Scopes cannot be passed as non-array. Given Scopes: "+e)},t.createEmptyScopesArrayError=function(e){return new t("empty_input_scopes_error","Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token. Given Scopes: "+e)},t.createClientIdSingleScopeError=function(e){return new t("clientid_input_scopes_error","Client ID can only be provided as a single scope. Given Scopes: "+e)},t.createInvalidPromptError=function(e){return new t("invalid_prompt_value","Supported prompt values are 'login', 'select_account', 'consent' and 'none'.  Please see here for valid configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options Given value: "+e)},t.createInvalidClaimsRequestError=function(){return new t("invalid_claims","Given claims parameter must be a stringified JSON object.")},t.createEmptyLogoutRequestError=function(){return new t("logout_request_empty","The logout request was null or undefined.")},t.createEmptyTokenRequestError=function(){return new t("token_request_empty","Token request was empty and not found in cache.")},t.createInvalidCodeChallengeMethodError=function(){return new t("invalid_code_challenge_method",'code_challenge_method passed is invalid. Valid values are "plain" and "S256".')},t.createInvalidCodeChallengeParamsError=function(){return new t("pkce_params_missing","Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request")},t.createKnownAuthoritiesCloudDiscoveryMetadataError=function(){return new t("invalid_known_authorities","knownAuthorities and cloudDiscoveryMetadata cannot both be provided. Please provide cloudDiscoveryMetadata object for AAD, knownAuthorities otherwise.")},t.createInvalidCloudDiscoveryMetadataError=function(){return new t("invalid_cloud_discovery_metadata","Invalid cloudDiscoveryMetadata provided. Must be a JSON object containing tenant_discovery_endpoint and metadata fields")},t.createUntrustedAuthorityError=function(){return new t("untrusted_authority","The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.")},t}(wp),Zp=function(){function e(e){var t=this,n=e?_p.trimArrayEntries(gp(e)):[],r=n?_p.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach((function(e){return t.scopes.add(e)}))}return e.fromString=function(t){return new e((t=t||"").split(" "))},e.prototype.validateInputScopes=function(e){if(!e||e.length<1)throw Qp.createEmptyScopesArrayError(e)},e.prototype.containsScope=function(t){var n=new e(this.printScopesLowerCase().split(" "));return!_p.isEmpty(t)&&n.scopes.has(t.toLowerCase())},e.prototype.containsScopeSet=function(e){var t=this;return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every((function(e){return t.containsScope(e)}))},e.prototype.containsOnlyDefaultScopes=function(){var e=0;return this.containsScope(Pp)&&(e+=1),this.containsScope(kp)&&(e+=1),this.containsScope(Rp)&&(e+=1),this.scopes.size===e},e.prototype.appendScope=function(e){_p.isEmpty(e)||this.scopes.add(e.trim())},e.prototype.appendScopes=function(e){var t=this;try{e.forEach((function(e){return t.appendScope(e)}))}catch(n){throw wp.createAppendScopeSetError(n)}},e.prototype.removeScope=function(e){if(_p.isEmpty(e))throw wp.createRemoveEmptyScopeFromSetError(e);this.scopes.delete(e.trim())},e.prototype.removeDefaultScopes=function(){this.scopes.delete(Rp),this.scopes.delete(Pp),this.scopes.delete(kp)},e.prototype.unionScopeSets=function(e){if(!e)throw wp.createEmptyInputScopeSetError(e);var t=new Set;return e.scopes.forEach((function(e){return t.add(e.toLowerCase())})),this.scopes.forEach((function(e){return t.add(e.toLowerCase())})),t},e.prototype.intersectingScopeSets=function(e){if(!e)throw wp.createEmptyInputScopeSetError(e);var t=this.unionScopeSets(e);e.containsOnlyDefaultScopes()||e.removeDefaultScopes();var n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n},e.prototype.getScopeCount=function(){return this.scopes.size},e.prototype.asArray=function(){var e=[];return this.scopes.forEach((function(t){return e.push(t)})),e},e.prototype.printScopes=function(){return this.scopes?this.asArray().join(" "):""},e.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},e}();!function(e){e[e.Default=0]="Default",e[e.Adfs=1]="Adfs"}(Jp||(Jp={}));var Xp,eg=function(){function e(t){if(this._urlString=t,_p.isEmpty(this._urlString))throw Qp.createUrlEmptyError();_p.isEmpty(this.getHash())&&(this._urlString=e.canonicalizeUri(t))}return Object.defineProperty(e.prototype,"urlString",{get:function(){return this._urlString},enumerable:!0,configurable:!0}),e.canonicalizeUri=function(e){return e&&(e=e.toLowerCase()),e&&!_p.endsWith(e,"/")&&(e+="/"),e},e.prototype.validateAsUri=function(){var e;try{e=this.getUrlComponents()}catch(t){throw Qp.createUrlParseError(t)}if(!e.HostNameAndPort||!e.PathSegments)throw Qp.createUrlParseError("Given url string: "+this.urlString);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Qp.createInsecureAuthorityUriError(this.urlString)},e.prototype.urlRemoveQueryStringParameter=function(e){var t=new RegExp("(\\&"+e+"=)[^&]+");return this._urlString=this.urlString.replace(t,""),t=new RegExp("("+e+"=)[^&]+&"),this._urlString=this.urlString.replace(t,""),t=new RegExp("("+e+"=)[^&]+"),this._urlString=this.urlString.replace(t,""),this.urlString},e.removeHashFromUrl=function(t){return e.canonicalizeUri(t.split("#")[0])},e.prototype.replaceTenantPath=function(t){var n=this.getUrlComponents(),r=n.PathSegments;return!t||0===r.length||r[0]!==Ep.COMMON&&r[0]!==Ep.ORGANIZATIONS||(r[0]=t),e.constructAuthorityUriFromObject(n)},e.prototype.getHash=function(){return e.parseHash(this.urlString)},e.prototype.getUrlComponents=function(){var e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Qp.createUrlParseError("Given url string: "+this.urlString);var n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},r=n.AbsolutePath.split("/");return r=r.filter((function(e){return e&&e.length>0})),n.PathSegments=r,!_p.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n},e.getDomainFromUrl=function(e){var t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Qp.createUrlParseError("Given url string: "+e);return n[2]},e.parseHash=function(e){var t=e.indexOf("#"),n=e.indexOf("#/");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):""},e.constructAuthorityUriFromObject=function(t){return new e(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))},e.getDeserializedHash=function(t){if(_p.isEmpty(t))return{};var n=e.parseHash(t),r=_p.queryStringToObject(_p.isEmpty(n)?t:n);if(!r)throw wp.createHashNotDeserializedError(JSON.stringify(r));return r},e.hashContainsKnownProperties=function(t){if(_p.isEmpty(t))return!1;var n=e.getDeserializedHash(t);return!!(n.code||n.error_description||n.error||n.state)},e}(),tg=function(){function e(){}return e.setTrustedAuthoritiesFromConfig=function(e,t){if(!this.getTrustedHostList().length){if(e.length>0&&!_p.isEmpty(t))throw Qp.createKnownAuthoritiesCloudDiscoveryMetadataError();this.createCloudDiscoveryMetadataFromKnownAuthorities(e);try{if(t){var n=JSON.parse(t);this.saveCloudDiscoveryMetadata(n.metadata)}}catch(r){throw Qp.createInvalidCloudDiscoveryMetadataError()}}},e.setTrustedAuthoritiesFromNetwork=function(e,t){return fp(this,void 0,void 0,(function(){var n,r,i;return pp(this,(function(o){switch(o.label){case 0:n=""+xp+e.urlString+"oauth2/v2.0/authorize",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.sendGetRequestAsync(n)];case 2:return r=o.sent(),this.saveCloudDiscoveryMetadata(r.body.metadata),[3,4];case 3:return o.sent(),[2];case 4:return i=e.getUrlComponents().HostNameAndPort,this.getTrustedHostList().length>0&&!this.IsInTrustedHostList(i)&&this.createCloudDiscoveryMetadataFromKnownAuthorities([i]),[2]}}))}))},e.saveCloudDiscoveryMetadata=function(t){t.forEach((function(t){t.aliases.forEach((function(n){e.TrustedHostList[n.toLowerCase()]=t}))}))},e.createCloudDiscoveryMetadataFromKnownAuthorities=function(e){var t=this;e.forEach((function(e){var n=eg.getDomainFromUrl(e).toLowerCase();t.TrustedHostList[n]={preferred_cache:n,preferred_network:n,aliases:[n]}}))},e.getTrustedHostList=function(){return Object.keys(this.TrustedHostList)},e.getCloudDiscoveryMetadata=function(e){return this.TrustedHostList[e.toLowerCase()]||null},e.IsInTrustedHostList=function(e){return Object.keys(this.TrustedHostList).indexOf(e.toLowerCase())>-1},e.TrustedHostList={},e}();!function(e){e.AAD="AAD",e.OIDC="OIDC"}(Xp||(Xp={}));var ng=function(){function e(e,t,n){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.authorityProtocolMode=n}return Object.defineProperty(e.prototype,"authorityType",{get:function(){var e=this.canonicalAuthorityUrlComponents.PathSegments;return e.length&&"adfs"===e[0].toLowerCase()?Jp.Adfs:Jp.Default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocolMode",{get:function(){return this.authorityProtocolMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(e){this._canonicalAuthority=new eg(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete())return this.replaceTenant(this.tenantDiscoveryResponse.authorization_endpoint);throw wp.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete())return this.replaceTenant(this.tenantDiscoveryResponse.token_endpoint);throw wp.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete())return this.tenantDiscoveryResponse.token_endpoint.replace("/token","/devicecode");throw wp.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete())return this.replaceTenant(this.tenantDiscoveryResponse.end_session_endpoint);throw wp.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete())return this.replaceTenant(this.tenantDiscoveryResponse.issuer);throw wp.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!0,configurable:!0}),e.prototype.replaceTenant=function(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)},Object.defineProperty(e.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===Jp.Adfs||this.protocolMode===Xp.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!0,configurable:!0}),e.prototype.discoveryComplete=function(){return!!this.tenantDiscoveryResponse},e.prototype.discoverEndpoints=function(e){return fp(this,void 0,void 0,(function(){return pp(this,(function(t){return[2,this.networkInterface.sendGetRequestAsync(e)]}))}))},Object.defineProperty(e.prototype,"aadInstanceDiscoveryEndpointUrl",{get:function(){return""+xp+this.canonicalAuthority+"oauth2/v2.0/authorize"},enumerable:!0,configurable:!0}),e.prototype.validateAndSetPreferredNetwork=function(){return fp(this,void 0,void 0,(function(){var e,t;return pp(this,(function(n){switch(n.label){case 0:return e=this.canonicalAuthorityUrlComponents.HostNameAndPort,0!==tg.getTrustedHostList().length?[3,2]:[4,tg.setTrustedAuthoritiesFromNetwork(this._canonicalAuthority,this.networkInterface)];case 1:n.sent(),n.label=2;case 2:if(!tg.IsInTrustedHostList(e))throw Qp.createUntrustedAuthorityError();return t=tg.getCloudDiscoveryMetadata(e).preferred_network,e!==t&&(this.canonicalAuthority=this.canonicalAuthority.replace(e,t)),[2]}}))}))},e.prototype.resolveEndpointsAsync=function(){return fp(this,void 0,void 0,(function(){var e;return pp(this,(function(t){switch(t.label){case 0:return[4,this.validateAndSetPreferredNetwork()];case 1:return t.sent(),[4,this.discoverEndpoints(this.defaultOpenIdConfigurationEndpoint)];case 2:return e=t.sent(),this.tenantDiscoveryResponse=e.body,[2]}}))}))},e.generateEnvironmentFromAuthority=function(e){var t=e.canonicalAuthorityUrlComponents.HostNameAndPort;return tg.getCloudDiscoveryMetadata(t)?tg.getCloudDiscoveryMetadata(t).preferred_cache:""},e}();function rg(e,t){if(_p.isEmpty(e))throw wp.createClientInfoEmptyError(e);try{var n=t.base64Decode(e);return JSON.parse(n)}catch(r){throw wp.createClientInfoDecodingError(r)}}var ig,og=function(){function e(){}return e.prototype.generateAccountId=function(){return[this.homeAccountId,this.environment].join(Fp.CACHE_KEY_SEPARATOR).toLowerCase()},e.prototype.generateAccountKey=function(){return e.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},e.prototype.generateType=function(){switch(this.authorityType){case jp.ADFS_ACCOUNT_TYPE:return qp.ADFS;case jp.MSAV1_ACCOUNT_TYPE:return qp.MSA;case jp.MSSTS_ACCOUNT_TYPE:return qp.MSSTS;case jp.GENERIC_ACCOUNT_TYPE:return qp.GENERIC;default:throw wp.createUnexpectedAccountTypeError()}},e.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name}},e.generateAccountCacheKey=function(e){return[e.homeAccountId,e.environment||"",e.tenantId||""].join(Fp.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAccount=function(t,n,r,i,o){var s=new e;s.authorityType=jp.MSSTS_ACCOUNT_TYPE,s.clientInfo=t,s.homeAccountId=n;var a=ng.generateEnvironmentFromAuthority(r);if(_p.isEmpty(a))throw wp.createInvalidCacheEnvironmentError();if(s.environment=a,s.realm=i.claims.tid||"",s.oboAssertion=o,i){var c=_p.isEmpty(i.claims.oid)?i.claims.sub:i.claims.oid;s.localAccountId=c,s.username=i.claims.preferred_username||(i.claims.emails?i.claims.emails[0]:""),s.name=i.claims.name}return s},e.createGenericAccount=function(t,n,r,i){var o=new e;o.authorityType=t.authorityType===Jp.Adfs?jp.ADFS_ACCOUNT_TYPE:jp.GENERIC_ACCOUNT_TYPE,o.homeAccountId=n,o.realm="",o.oboAssertion=i;var s=ng.generateEnvironmentFromAuthority(t);if(_p.isEmpty(s))throw wp.createInvalidCacheEnvironmentError();return o.environment=s,o.username=r.claims.upn,o},e.generateHomeAccountId=function(e,t,n,r,i){var o=i&&i.claims.sub?i.claims.sub:"";if(t===Jp.Adfs)return o;if(e){var s=rg(e,r);if(!_p.isEmpty(s.uid)&&!_p.isEmpty(s.utid))return""+s.uid+Fp.CLIENT_INFO_SEPARATOR+s.utid}return n.verbose("No client info in response"),o},e.isAccountEntity=function(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")},e}(),sg=function(){function e(){}return e.prototype.getAllAccounts=function(){var t=this.getAccountsFilteredBy(),n=Object.keys(t).map((function(e){return t[e]}));return n.length<1?[]:n.map((function(t){var n=new og;return(n=e.toObject(n,t)).getAccountInfo()}))},e.prototype.saveCacheRecord=function(e){if(!e)throw wp.createNullOrUndefinedCacheRecord();e.account&&this.setAccount(e.account),e.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken&&this.saveAccessToken(e.accessToken),e.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)},e.prototype.saveAccessToken=function(e){var t=this,n=this.getCredentialsFilteredBy({clientId:e.clientId,credentialType:Vp.ACCESS_TOKEN,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm}),r=Zp.fromString(e.target),i=Object.keys(n.accessTokens).map((function(e){return n.accessTokens[e]}));i&&i.forEach((function(e){Zp.fromString(e.target).intersectingScopeSets(r)&&t.removeCredential(e)})),this.setAccessTokenCredential(e)},e.prototype.getAccountsFilteredBy=function(e){return this.getAccountsFilteredByInternal(e?e.homeAccountId:"",e?e.environment:"",e?e.realm:"")},e.prototype.getAccountsFilteredByInternal=function(e,t,n){var r=this,i=this.getKeys(),o={};return i.forEach((function(i){var s=r.getAccount(i);if(!s)return null;(_p.isEmpty(e)||r.matchHomeAccountId(s,e))&&(_p.isEmpty(t)||r.matchEnvironment(s,t))&&(_p.isEmpty(n)||r.matchRealm(s,n))&&(o[i]=s)})),o},e.prototype.getCredentialsFilteredBy=function(e){return this.getCredentialsFilteredByInternal(e.homeAccountId,e.environment,e.credentialType,e.clientId,e.familyId,e.realm,e.target,e.oboAssertion)},e.prototype.getCredentialsFilteredByInternal=function(e,t,n,r,i,o,s,a){var c=this,u=this.getKeys(),l={idTokens:{},accessTokens:{},refreshTokens:{}};return u.forEach((function(u){var h=Yp.getCredentialType(u);if(h!==Mp){var d=c.getSpecificCredential(u,h);if(d&&(_p.isEmpty(a)||c.matchOboAssertion(d,a))&&(_p.isEmpty(e)||c.matchHomeAccountId(d,e))&&(_p.isEmpty(t)||c.matchEnvironment(d,t))&&(_p.isEmpty(o)||c.matchRealm(d,o))&&(_p.isEmpty(n)||c.matchCredentialType(d,n))&&(_p.isEmpty(r)||c.matchClientId(d,r))&&(_p.isEmpty(i)||c.matchFamilyId(d,i))&&(_p.isEmpty(s)||c.matchTarget(d,s)))switch(h){case Vp.ID_TOKEN:l.idTokens[u]=d;break;case Vp.ACCESS_TOKEN:l.accessTokens[u]=d;break;case Vp.REFRESH_TOKEN:l.refreshTokens[u]=d}}})),l},e.prototype.getAppMetadataFilteredBy=function(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)},e.prototype.getAppMetadataFilteredByInternal=function(e,t){var n=this,r=this.getKeys(),i={};return r.forEach((function(r){if(n.isAppMetadata(r)){var o=n.getAppMetadata(r);o&&(_p.isEmpty(e)||n.matchEnvironment(o,e))&&(_p.isEmpty(t)||n.matchClientId(o,t))&&(i[r]=o)}})),i},e.prototype.removeAllAccounts=function(){var e=this;return this.getKeys().forEach((function(t){e.getAccount(t)&&e.removeAccount(t)})),!0},e.prototype.removeAccount=function(e){var t=this.getAccount(e);if(!t)throw wp.createNoAccountFoundError();return this.removeAccountContext(t)&&this.removeItem(e,Hp.ACCOUNT)},e.prototype.removeAccountContext=function(e){var t=this,n=this.getKeys(),r=e.generateAccountId();return n.forEach((function(e){var n=Yp.getCredentialType(e);if(n!==Mp){var i=t.getSpecificCredential(e,n);i&&r===i.generateAccountId()&&t.removeCredential(i)}})),!0},e.prototype.removeCredential=function(e){var t=e.generateCredentialKey();return this.removeItem(t,Hp.CREDENTIAL)},e.prototype.removeAppMetadata=function(){var e=this;return this.getKeys().forEach((function(t){e.isAppMetadata(t)&&e.removeItem(t,Hp.APP_METADATA)})),!0},e.prototype.readCacheRecord=function(e,t,n,r){return{account:this.readAccountFromCache(e),idToken:this.readIdTokenFromCache(t,e),accessToken:this.readAccessTokenFromCache(t,e,n),refreshToken:this.readRefreshTokenFromCache(t,e,!1),appMetadata:this.readAppMetadataFromCache(r,t)}},e.prototype.readAccountFromCache=function(e){var t=og.generateAccountCacheKey(e);return this.getAccount(t)},e.prototype.readIdTokenFromCache=function(e,t){var n=this.getCredentialsFilteredBy({homeAccountId:t.homeAccountId,environment:t.environment,credentialType:Vp.ID_TOKEN,clientId:e,realm:t.tenantId}),r=Object.keys(n.idTokens).map((function(e){return n.idTokens[e]})),i=r.length;if(i<1)return null;if(i>1)throw wp.createMultipleMatchingTokensInCacheError();return r[0]},e.prototype.readAccessTokenFromCache=function(e,t,n){var r={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:Vp.ACCESS_TOKEN,clientId:e,realm:t.tenantId,target:n.printScopesLowerCase()},i=this.getCredentialsFilteredBy(r),o=Object.keys(i.accessTokens).map((function(e){return i.accessTokens[e]})),s=o.length;if(s<1)return null;if(s>1)throw wp.createMultipleMatchingTokensInCacheError();return o[0]},e.prototype.readRefreshTokenFromCache=function(e,t,n){var r=this.getCredentialsFilteredBy({homeAccountId:t.homeAccountId,environment:t.environment,credentialType:Vp.REFRESH_TOKEN,clientId:e,familyId:n?Kp:null}),i=Object.keys(r.refreshTokens).map((function(e){return r.refreshTokens[e]}));return i.length<1?null:i[0]},e.prototype.readAppMetadataFromCache=function(e,t){var n=this.getAppMetadataFilteredBy({environment:e,clientId:t}),r=Object.keys(n).map((function(e){return n[e]})),i=r.length;if(i<1)return null;if(i>1)throw wp.createMultipleMatchingAppMetadataInCacheError();return r[0]},e.prototype.isAppMetadataFOCI=function(e,t){var n=this.readAppMetadataFromCache(e,t);return n&&n.familyId===Kp},e.prototype.matchHomeAccountId=function(e,t){return e.homeAccountId&&t===e.homeAccountId},e.prototype.matchOboAssertion=function(e,t){return e.oboAssertion&&t===e.oboAssertion},e.prototype.matchEnvironment=function(e,t){var n=tg.getCloudDiscoveryMetadata(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)},e.prototype.matchCredentialType=function(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()},e.prototype.matchClientId=function(e,t){return e.clientId&&t===e.clientId},e.prototype.matchFamilyId=function(e,t){return e.familyId&&t===e.familyId},e.prototype.matchRealm=function(e,t){return e.realm&&t===e.realm},e.prototype.matchTarget=function(e,t){if(e.credentialType!==Vp.ACCESS_TOKEN||_p.isEmpty(e.target))return!1;var n=Zp.fromString(e.target),r=Zp.fromString(t);return r.containsOnlyDefaultScopes()||r.removeDefaultScopes(),n.containsScopeSet(r)},e.prototype.isAppMetadata=function(e){return-1!==e.indexOf(Gp)},e.prototype.getSpecificCredential=function(e,t){switch(t){case Vp.ID_TOKEN:return this.getIdTokenCredential(e);case Vp.ACCESS_TOKEN:return this.getAccessTokenCredential(e);case Vp.REFRESH_TOKEN:return this.getRefreshTokenCredential(e);default:return null}},e.toObject=function(e,t){for(var n in t)e[n]=t[n];return e},e}(),ag=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hp(t,e),t.prototype.setAccount=function(){throw yp.createUnexpectedError("Storage interface - setAccount() has not been implemented for the cacheStorage interface.")},t.prototype.getAccount=function(){throw yp.createUnexpectedError("Storage interface - getAccount() has not been implemented for the cacheStorage interface.")},t.prototype.setIdTokenCredential=function(){throw yp.createUnexpectedError("Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getIdTokenCredential=function(){throw yp.createUnexpectedError("Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAccessTokenCredential=function(){throw yp.createUnexpectedError("Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getAccessTokenCredential=function(){throw yp.createUnexpectedError("Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setRefreshTokenCredential=function(){throw yp.createUnexpectedError("Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getRefreshTokenCredential=function(){throw yp.createUnexpectedError("Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAppMetadata=function(){throw yp.createUnexpectedError("Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAppMetadata=function(){throw yp.createUnexpectedError("Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.setServerTelemetry=function(){throw yp.createUnexpectedError("Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.getServerTelemetry=function(){throw yp.createUnexpectedError("Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.setThrottlingCache=function(){throw yp.createUnexpectedError("Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.getThrottlingCache=function(){throw yp.createUnexpectedError("Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.removeItem=function(){throw yp.createUnexpectedError("Storage interface - removeItem() has not been implemented for the cacheStorage interface.")},t.prototype.containsKey=function(){throw yp.createUnexpectedError("Storage interface - containsKey() has not been implemented for the cacheStorage interface.")},t.prototype.getKeys=function(){throw yp.createUnexpectedError("Storage interface - getKeys() has not been implemented for the cacheStorage interface.")},t.prototype.clear=function(){throw yp.createUnexpectedError("Storage interface - clear() has not been implemented for the cacheStorage interface.")},t}(sg),cg={clientId:"",authority:null,knownAuthorities:[],cloudDiscoveryMetadata:"",clientCapabilities:[],protocolMode:Xp.AAD},ug={tokenRenewalOffsetSeconds:300},lg={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:mp.Info},hg={sendGetRequestAsync:function(){return fp(this,void 0,void 0,(function(){return pp(this,(function(e){throw yp.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented")}))}))},sendPostRequestAsync:function(){return fp(this,void 0,void 0,(function(){return pp(this,(function(e){throw yp.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented")}))}))}},dg={createNewGuid:function(){throw yp.createUnexpectedError("Crypto interface - createNewGuid() has not been implemented")},base64Decode:function(){throw yp.createUnexpectedError("Crypto interface - base64Decode() has not been implemented")},base64Encode:function(){throw yp.createUnexpectedError("Crypto interface - base64Encode() has not been implemented")},generatePkceCodes:function(){return fp(this,void 0,void 0,(function(){return pp(this,(function(e){throw yp.createUnexpectedError("Crypto interface - generatePkceCodes() has not been implemented")}))}))},getPublicKeyThumbprint:function(){return fp(this,void 0,void 0,(function(){return pp(this,(function(e){throw yp.createUnexpectedError("Crypto interface - getPublicKeyThumbprint() has not been implemented")}))}))},signJwt:function(){return fp(this,void 0,void 0,(function(){return pp(this,(function(e){throw yp.createUnexpectedError("Crypto interface - signJwt() has not been implemented")}))}))}},fg={sku:"msal.js.common",version:"1.7.0",cpu:"",os:""},pg={clientSecret:"",clientAssertion:null},gg=function(e){function t(n,r,i){var o=e.call(this,n,r)||this;return o.name="ServerError",o.subError=i,Object.setPrototypeOf(o,t.prototype),o}return hp(t,e),t}(yp),mg=function(){function e(){}return e.generateThrottlingStorageKey=function(e){return"throttling."+JSON.stringify(e)},e.preProcess=function(t,n){var r=e.generateThrottlingStorageKey(n),i=t.getThrottlingCache(r);if(i){if(i.throttleTime<Date.now())return void t.removeItem(r,Hp.THROTTLING);throw new gg(i.errorCodes.join(" "),i.errorMessage,i.subError)}},e.postProcess=function(t,n,r){if(e.checkResponseStatus(r)||e.checkResponseForRetryAfter(r)){var i={throttleTime:e.calculateThrottleTime(parseInt(r.headers[Cp.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};t.setThrottlingCache(e.generateThrottlingStorageKey(n),i)}},e.checkResponseStatus=function(e){return 429==e.status||e.status>=500&&e.status<600},e.checkResponseForRetryAfter=function(e){return!!e.headers&&e.headers.hasOwnProperty(Cp.RETRY_AFTER)&&(e.status<200||e.status>=300)},e.calculateThrottleTime=function(e){e<=0&&(e=null);var t=Date.now()/1e3;return Math.floor(1e3*Math.min(t+(e||60),t+3600))},e.removeThrottle=function(e,t,n,r,i){var o=this.generateThrottlingStorageKey({clientId:t,authority:n,scopes:r,homeAccountIdentifier:i});return e.removeItem(o,Hp.THROTTLING)},e}(),yg=function(){function e(e,t){this.networkClient=e,this.cacheManager=t}return e.prototype.sendPostRequest=function(e,t,n){return fp(this,void 0,void 0,(function(){var r;return pp(this,(function(i){switch(i.label){case 0:return mg.preProcess(this.cacheManager,e),[4,this.networkClient.sendPostRequestAsync(t,n)];case 1:return r=i.sent(),mg.postProcess(this.cacheManager,e,r),[2,r]}}))}))},e}(),vg=function(){function e(e){var t,n,r,i,o,s,a,c,u,l,h,d;this.config=(n=(t=e).authOptions,r=t.systemOptions,i=t.loggerOptions,o=t.storageInterface,s=t.networkInterface,a=t.cryptoInterface,c=t.clientCredentials,u=t.libraryInfo,l=t.serverTelemetryManager,h=t.persistencePlugin,d=t.serializableCache,{authOptions:dp(dp({},cg),n),systemOptions:dp(dp({},ug),r),loggerOptions:dp(dp({},lg),i),storageInterface:o||new ag,networkInterface:s||hg,cryptoInterface:a||dg,clientCredentials:c||pg,libraryInfo:dp(dp({},fg),u),serverTelemetryManager:l||null,persistencePlugin:h||null,serializableCache:d||null}),this.logger=new Ip(this.config.loggerOptions),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new yg(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,tg.setTrustedAuthoritiesFromConfig(this.config.authOptions.knownAuthorities,this.config.authOptions.cloudDiscoveryMetadata),this.authority=this.config.authOptions.authority}return e.prototype.createDefaultTokenRequestHeaders=function(){var e=this.createDefaultLibraryHeaders();return e[Cp.CONTENT_TYPE]="application/x-www-form-urlencoded;charset=utf-8",e[Cp.X_MS_LIB_CAPABILITY]=Cp.X_MS_LIB_CAPABILITY_VALUE,this.serverTelemetryManager&&(e[Cp.X_CLIENT_CURR_TELEM]=this.serverTelemetryManager.generateCurrentRequestHeaderValue(),e[Cp.X_CLIENT_LAST_TELEM]=this.serverTelemetryManager.generateLastRequestHeaderValue()),e},e.prototype.createDefaultLibraryHeaders=function(){var e={};return e[Tp.X_CLIENT_SKU]=this.config.libraryInfo.sku,e[Tp.X_CLIENT_VER]=this.config.libraryInfo.version,e[Tp.X_CLIENT_OS]=this.config.libraryInfo.os,e[Tp.X_CLIENT_CPU]=this.config.libraryInfo.cpu,e},e.prototype.executePostToTokenEndpoint=function(e,t,n,r){return fp(this,void 0,void 0,(function(){var i;return pp(this,(function(o){switch(o.label){case 0:return[4,this.networkManager.sendPostRequest(r,e,{body:t,headers:n})];case 1:return i=o.sent(),this.config.serverTelemetryManager&&i.status<500&&429!==i.status&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,i]}}))}))},e}(),bg=function(){function e(){}return e.validateRedirectUri=function(e){if(_p.isEmpty(e))throw Qp.createRedirectUriEmptyError()},e.validatePrompt=function(e){if([Np.LOGIN,Np.SELECT_ACCOUNT,Np.CONSENT,Np.NONE].indexOf(e)<0)throw Qp.createInvalidPromptError(e)},e.validateClaims=function(e){try{JSON.parse(e)}catch(t){throw Qp.createInvalidClaimsRequestError()}},e.validateCodeChallengeParams=function(e,t){if(_p.isEmpty(e)||_p.isEmpty(t))throw Qp.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(t)},e.validateCodeChallengeMethod=function(e){if([Bp.PLAIN,Bp.S256].indexOf(e)<0)throw Qp.createInvalidCodeChallengeMethodError()},e.sanitizeEQParams=function(e,t){return e?(t.forEach((function(t,n){e[n]&&delete e[n]})),e):null},e}(),wg=function(){function e(){this.parameters=new Map}return e.prototype.addResponseTypeCode=function(){this.parameters.set(Tp.RESPONSE_TYPE,encodeURIComponent("code"))},e.prototype.addResponseMode=function(e){this.parameters.set(Tp.RESPONSE_MODE,encodeURIComponent(e||Dp.QUERY))},e.prototype.addScopes=function(e,t){void 0===t&&(t=!0);var n=t?gp(e||[],[Pp,kp]):e||[],r=new Zp(n);this.parameters.set(Tp.SCOPE,encodeURIComponent(r.printScopes()))},e.prototype.addClientId=function(e){this.parameters.set(Tp.CLIENT_ID,encodeURIComponent(e))},e.prototype.addRedirectUri=function(e){bg.validateRedirectUri(e),this.parameters.set(Tp.REDIRECT_URI,encodeURIComponent(e))},e.prototype.addDomainHint=function(e){this.parameters.set(Up.DOMAIN_HINT,encodeURIComponent(e))},e.prototype.addLoginHint=function(e){this.parameters.set(Up.LOGIN_HINT,encodeURIComponent(e))},e.prototype.addSid=function(e){this.parameters.set(Up.SID,encodeURIComponent(e))},e.prototype.addClaims=function(e,t){var n=this.addClientCapabilitiesToClaims(e,t);bg.validateClaims(n),this.parameters.set(Tp.CLAIMS,encodeURIComponent(n))},e.prototype.addCorrelationId=function(e){this.parameters.set(Tp.CLIENT_REQUEST_ID,encodeURIComponent(e))},e.prototype.addLibraryInfo=function(e){this.parameters.set(Tp.X_CLIENT_SKU,e.sku),this.parameters.set(Tp.X_CLIENT_VER,e.version),this.parameters.set(Tp.X_CLIENT_OS,e.os),this.parameters.set(Tp.X_CLIENT_CPU,e.cpu)},e.prototype.addPrompt=function(e){bg.validatePrompt(e),this.parameters.set(""+Tp.PROMPT,encodeURIComponent(e))},e.prototype.addState=function(e){_p.isEmpty(e)||this.parameters.set(Tp.STATE,encodeURIComponent(e))},e.prototype.addNonce=function(e){this.parameters.set(Tp.NONCE,encodeURIComponent(e))},e.prototype.addCodeChallengeParams=function(e,t){if(bg.validateCodeChallengeParams(e,t),!e||!t)throw Qp.createInvalidCodeChallengeParamsError();this.parameters.set(Tp.CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(Tp.CODE_CHALLENGE_METHOD,encodeURIComponent(t))},e.prototype.addAuthorizationCode=function(e){this.parameters.set(Tp.CODE,encodeURIComponent(e))},e.prototype.addDeviceCode=function(e){this.parameters.set(Tp.DEVICE_CODE,encodeURIComponent(e))},e.prototype.addRefreshToken=function(e){this.parameters.set(Tp.REFRESH_TOKEN,encodeURIComponent(e))},e.prototype.addCodeVerifier=function(e){this.parameters.set(Tp.CODE_VERIFIER,encodeURIComponent(e))},e.prototype.addClientSecret=function(e){this.parameters.set(Tp.CLIENT_SECRET,encodeURIComponent(e))},e.prototype.addClientAssertion=function(e){this.parameters.set(Tp.CLIENT_ASSERTION,encodeURIComponent(e))},e.prototype.addClientAssertionType=function(e){this.parameters.set(Tp.CLIENT_ASSERTION_TYPE,encodeURIComponent(e))},e.prototype.addOboAssertion=function(e){this.parameters.set(Tp.OBO_ASSERTION,encodeURIComponent(e))},e.prototype.addRequestTokenUse=function(e){this.parameters.set(Tp.REQUESTED_TOKEN_USE,encodeURIComponent(e))},e.prototype.addGrantType=function(e){this.parameters.set(Tp.GRANT_TYPE,encodeURIComponent(e))},e.prototype.addClientInfo=function(){this.parameters.set("client_info","1")},e.prototype.addExtraQueryParameters=function(e){var t=this;bg.sanitizeEQParams(e,this.parameters),Object.keys(e).forEach((function(n){t.parameters.set(n,e[n])}))},e.prototype.addClientCapabilitiesToClaims=function(e,t){var n;if(_p.isEmpty(e))n={};else try{n=JSON.parse(e)}catch(r){throw Qp.createInvalidClaimsRequestError()}return t&&t.length>0&&(n.hasOwnProperty(Ap.ACCESS_TOKEN)||(n[Ap.ACCESS_TOKEN]={}),n[Ap.ACCESS_TOKEN][Ap.XMS_CC]={values:t}),JSON.stringify(n)},e.prototype.addUsername=function(e){this.parameters.set($p.username,e)},e.prototype.addPassword=function(e){this.parameters.set($p.password,e)},e.prototype.addPopToken=function(e){_p.isEmpty(e)||(this.parameters.set(Tp.TOKEN_TYPE,zp.POP),this.parameters.set(Tp.REQ_CNF,encodeURIComponent(e)))},e.prototype.createQueryString=function(){var e=new Array;return this.parameters.forEach((function(t,n){e.push(n+"="+t)})),e.join("&")},e}(),_g=function(){function e(t,n){if(_p.isEmpty(t))throw wp.createTokenNullOrEmptyError(t);this.rawToken=t,this.claims=e.extractTokenClaims(t,n)}return e.extractTokenClaims=function(e,t){var n=_p.decodeAuthToken(e);if(!n)return null;try{var r=t.base64Decode(n.JWSPayload);return JSON.parse(r)}catch(i){throw wp.createTokenParsingError(i)}},e}(),Cg=function(){function e(){}return e.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)},e.isTokenExpired=function(t,n){var r=Number(t)||0;return e.nowSeconds()+n>r},e}(),Sg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hp(t,e),t.createIdTokenEntity=function(e,n,r,i,o,s){var a=new t;return a.credentialType=Vp.ID_TOKEN,a.homeAccountId=e,a.environment=n,a.clientId=i,a.secret=r,a.realm=o,a.oboAssertion=s,a},t.isIdTokenEntity=function(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===Vp.ID_TOKEN},t}(Yp),Eg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hp(t,e),t.createAccessTokenEntity=function(e,n,r,i,o,s,a,c,u,l){var h=new t;h.homeAccountId=e,h.credentialType=Vp.ACCESS_TOKEN,h.secret=r;var d=Cg.nowSeconds();return h.cachedAt=d.toString(),h.expiresOn=a.toString(),h.extendedExpiresOn=c.toString(),h.environment=n,h.clientId=i,h.realm=o,h.target=s,h.oboAssertion=l,h.tokenType=_p.isEmpty(u)?zp.BEARER:u,h},t.isAccessTokenEntity=function(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.hasOwnProperty("target")&&e.credentialType===Vp.ACCESS_TOKEN},t}(Yp),Tg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hp(t,e),t.createRefreshTokenEntity=function(e,n,r,i,o,s){var a=new t;return a.clientId=i,a.credentialType=Vp.REFRESH_TOKEN,a.environment=n,a.homeAccountId=e,a.secret=r,a.oboAssertion=s,o&&(a.familyId=o),a},t.isRefreshTokenEntity=function(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===Vp.REFRESH_TOKEN},t}(Yp),Ag=["interaction_required","consent_required","login_required"],Ig=["message_only","additional_action","basic_action","user_password_expired","consent_required"],Og=function(e){function t(n,r,i){var o=e.call(this,n,r,i)||this;return o.name="InteractionRequiredAuthError",Object.setPrototypeOf(o,t.prototype),o}return hp(t,e),t.isInteractionRequiredError=function(e,t,n){var r=!_p.isEmpty(e)&&Ag.indexOf(e)>-1,i=!_p.isEmpty(n)&&Ig.indexOf(n)>-1,o=!_p.isEmpty(t)&&Ag.some((function(e){return t.indexOf(e)>-1}));return r||o||i},t}(gg),xg=function(e,t,n,r,i){this.account=e,this.idToken=t,this.accessToken=n,this.refreshToken=r,this.appMetadata=i},Pg=function(){function e(){}return e.setRequestState=function(t,n,r){var i=e.generateLibraryState(t,r);return _p.isEmpty(n)?i:i+"|"+n},e.generateLibraryState=function(e,t){if(!e)throw wp.createNoCryptoObjectError("generateLibraryState");var n={id:e.createNewGuid(),ts:Cg.nowSeconds()};t&&(n.meta=t);var r=JSON.stringify(n);return e.base64Encode(r)},e.parseRequestState=function(e,t){if(!e)throw wp.createNoCryptoObjectError("parseRequestState");if(_p.isEmpty(t))throw wp.createInvalidStateError(t,"Null, undefined or empty state");try{var n=decodeURIComponent(t).split("|"),r=n[0],i=n.length>1?n.slice(1).join("|"):"",o=e.base64Decode(r),s=JSON.parse(o);return{userRequestState:_p.isEmpty(i)?"":i,libraryState:s}}catch(a){throw wp.createInvalidStateError(t,a)}},e}();!function(e){e.SW="sw",e.UHW="uhw"}(ig||(ig={}));var kg,Rg,Mg,Ug,Ng,Dg=function(){function e(e){this.cryptoUtils=e}return e.prototype.generateCnf=function(e,t){return fp(this,void 0,void 0,(function(){var n;return pp(this,(function(r){switch(r.label){case 0:return[4,this.cryptoUtils.getPublicKeyThumbprint(e,t)];case 1:return n=r.sent(),[2,this.cryptoUtils.base64Encode(JSON.stringify({kid:n,xms_ksl:ig.SW}))]}}))}))},e.prototype.signPopToken=function(e,t,n){return fp(this,void 0,void 0,(function(){var r,i,o;return pp(this,(function(s){switch(s.label){case 0:return r=_g.extractTokenClaims(e,this.cryptoUtils),i=new eg(n),o=i.getUrlComponents(),[4,this.cryptoUtils.signJwt({at:e,ts:""+Cg.nowSeconds(),m:t.toUpperCase(),u:o.HostNameAndPort||"",nonce:this.cryptoUtils.createNewGuid(),p:o.AbsolutePath,q:[[],o.QueryString]},r.cnf.kid)];case 1:return[2,s.sent()]}}))}))},e}(),Lg=function(){function e(){}return e.prototype.generateAppMetadataKey=function(){return e.generateAppMetadataCacheKey(this.environment,this.clientId)},e.generateAppMetadataCacheKey=function(e,t){return[Gp,e,t].join(Fp.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAppMetadataEntity=function(t,n,r){var i=new e;return i.clientId=t,i.environment=n,r&&(i.familyId=r),i},e.isAppMetadataEntity=function(e,t){return 0===e.indexOf(Gp)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")},e}(),jg=function(){function e(e,t){this.cache=e,this.hasChanged=t}return Object.defineProperty(e.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!0,configurable:!0}),e}(),Fg=function(){function e(e,t,n,r,i,o){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=i,this.persistencePlugin=o}return e.prototype.validateServerAuthorizationCodeResponse=function(e,t,n){if(decodeURIComponent(e.state)!==decodeURIComponent(t))throw wp.createStateMismatchError();if(e.error||e.error_description||e.suberror){if(Og.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new Og(e.error,e.error_description,e.suberror);throw new gg(e.error,e.error_description,e.suberror)}e.client_info&&rg(e.client_info,n)},e.prototype.validateTokenResponse=function(e){if(e.error||e.error_description||e.suberror){if(Og.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new Og(e.error,e.error_description,e.suberror);throw new gg(e.error,e.error_codes+" - ["+e.timestamp+"]: "+e.error_description+" - Correlation ID: "+e.correlation_id+" - Trace ID: "+e.trace_id)}},e.prototype.handleServerTokenResponse=function(t,n,r,i,o,s,a,c,u){return fp(this,void 0,void 0,(function(){var l,h,d,f,p;return pp(this,(function(g){switch(g.label){case 0:if(l=null,!_p.isEmpty(t.id_token)&&(l=new _g(t.id_token,this.cryptoObj),!_p.isEmpty(o)&&l.claims.nonce!==o))throw wp.createNonceMismatchError();this.homeAccountIdentifier=og.generateHomeAccountId(t.client_info,n.authorityType,this.logger,this.cryptoObj,l),h=null,_p.isEmpty(s)||(h=Pg.parseRequestState(this.cryptoObj,s)),d=this.generateCacheRecord(t,l,n,h&&h.libraryState,a,c),g.label=1;case 1:return g.trys.push([1,,4,7]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new jg(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(f)]):[3,3];case 2:g.sent(),g.label=3;case 3:return u&&d.account&&(p=d.account.generateAccountKey(),!this.cacheStorage.getAccount(p))?(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,null]):(this.cacheStorage.saveCacheRecord(d),[3,7]);case 4:return this.persistencePlugin&&this.serializableCache&&f?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(f)]):[3,6];case 5:g.sent(),g.label=6;case 6:return[7];case 7:return[2,e.generateAuthenticationResult(this.cryptoObj,d,l,!1,h,r,i)]}}))}))},e.prototype.generateCacheRecord=function(e,t,n,r,i,o){var s=ng.generateEnvironmentFromAuthority(n);if(_p.isEmpty(s))throw wp.createInvalidCacheEnvironmentError();var a=null,c=null;_p.isEmpty(e.id_token)||(a=Sg.createIdTokenEntity(this.homeAccountIdentifier,s,e.id_token,this.clientId,t.claims.tid||"",o),c=this.generateAccountEntity(e,t,n,o));var u=null;if(!_p.isEmpty(e.access_token)){var l=e.scope?Zp.fromString(e.scope):new Zp(i||[]),h=Cg.nowSeconds(),d=(r?r.ts:h)+e.expires_in,f=d+e.ext_expires_in;u=Eg.createAccessTokenEntity(this.homeAccountIdentifier,s,e.access_token,this.clientId,t?t.claims.tid||"":n.tenant,l.printScopes(),d,f,e.token_type,o)}var p=null;_p.isEmpty(e.refresh_token)||(p=Tg.createRefreshTokenEntity(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,o));var g=null;return _p.isEmpty(e.foci)||(g=Lg.createAppMetadataEntity(this.clientId,s,e.foci)),new xg(c,a,u,p,g)},e.prototype.generateAccountEntity=function(e,t,n,r){if(n.authorityType===Jp.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),og.createGenericAccount(n,this.homeAccountIdentifier,t,r);if(_p.isEmpty(e.client_info)&&"AAD"===n.protocolMode)throw wp.createClientInfoEmptyError(e.client_info);return e.client_info?og.createAccount(e.client_info,this.homeAccountIdentifier,n,t,r):og.createGenericAccount(n,this.homeAccountIdentifier,t,r)},e.generateAuthenticationResult=function(e,t,n,r,i,o,s){return fp(this,void 0,void 0,(function(){var a,c,u,l,h;return pp(this,(function(d){switch(d.label){case 0:return a="",c=[],u=null,l=null,h=null,t.accessToken?t.accessToken.tokenType!==zp.POP?[3,2]:[4,new Dg(e).signPopToken(t.accessToken.secret,o,s)]:[3,4];case 1:return a=d.sent(),[3,3];case 2:a=t.accessToken.secret,d.label=3;case 3:c=Zp.fromString(t.accessToken.target).asArray(),u=new Date(1e3*Number(t.accessToken.expiresOn)),l=new Date(1e3*Number(t.accessToken.extendedExpiresOn)),d.label=4;case 4:return t.appMetadata&&(h=t.appMetadata.familyId===Kp?Kp:null),[2,{uniqueId:n?n.claims.oid||n.claims.sub:"",tenantId:n?n.claims.tid:"",scopes:c,account:t.account?t.account.getAccountInfo():null,idToken:n?n.rawToken:"",idTokenClaims:n?n.claims:null,accessToken:a,fromCache:r,expiresOn:u,extExpiresOn:l,familyId:h,tokenType:t.accessToken?t.accessToken.tokenType:"",state:i?i.userRequestState:""}]}}))}))},e}(),Vg=function(e){function t(t){return e.call(this,t)||this}return hp(t,e),t.prototype.getAuthCodeUrl=function(e){return fp(this,void 0,void 0,(function(){var t;return pp(this,(function(n){return t=this.createAuthCodeUrlQueryString(e),[2,this.authority.authorizationEndpoint+"?"+t]}))}))},t.prototype.acquireToken=function(e,t,n){return fp(this,void 0,void 0,(function(){var r,i;return pp(this,(function(o){switch(o.label){case 0:if(this.logger.info("in acquireToken call"),!e||_p.isEmpty(e.code))throw wp.createTokenRequestCannotBeMadeError();return[4,this.executeTokenRequest(this.authority,e)];case 1:return r=o.sent(),(i=new Fg(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(r.body),[4,i.handleServerTokenResponse(r.body,this.authority,e.resourceRequestMethod,e.resourceRequestUri,t,n)];case 2:return[2,o.sent()]}}))}))},t.prototype.handleFragmentResponse=function(e,t){var n=new Fg(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger),r=new eg(e),i=eg.getDeserializedHash(r.getHash());return n.validateServerAuthorizationCodeResponse(i,t,this.cryptoUtils),i.code},t.prototype.getLogoutUri=function(e){if(!e)throw Qp.createEmptyLogoutRequestError();e.account?this.cacheManager.removeAccount(og.generateAccountCacheKey(e.account)):this.cacheManager.clear();var t=e.postLogoutRedirectUri?"?"+Tp.POST_LOGOUT_URI+"="+encodeURIComponent(e.postLogoutRedirectUri):"",n=e.correlationId?"&"+Tp.CLIENT_REQUEST_ID+"="+encodeURIComponent(e.correlationId):"";return""+this.authority.endSessionEndpoint+t+n},t.prototype.executeTokenRequest=function(e,t){return fp(this,void 0,void 0,(function(){var n,r,i;return pp(this,(function(o){switch(o.label){case 0:return n={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes},[4,this.createTokenRequestBody(t)];case 1:return r=o.sent(),i=this.createDefaultTokenRequestHeaders(),[2,this.executePostToTokenEndpoint(e.tokenEndpoint,r,i,n)]}}))}))},t.prototype.createTokenRequestBody=function(e){return fp(this,void 0,void 0,(function(){var t,n,r,i;return pp(this,(function(o){switch(o.label){case 0:return(t=new wg).addClientId(this.config.authOptions.clientId),t.addRedirectUri(e.redirectUri),t.addScopes(e.scopes),t.addAuthorizationCode(e.code),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(t.addClientAssertion((n=this.config.clientCredentials.clientAssertion).assertion),t.addClientAssertionType(n.assertionType)),t.addGrantType(Lp.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme!==zp.POP?[3,2]:[4,new Dg(this.cryptoUtils).generateCnf(e.resourceRequestMethod,e.resourceRequestUri)];case 1:r=o.sent(),t.addPopToken(r),o.label=2;case 2:return i=e.correlationId||this.config.cryptoInterface.createNewGuid(),t.addCorrelationId(i),(!_p.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),[2,t.createQueryString()]}}))}))},t.prototype.createAuthCodeUrlQueryString=function(e){var t=new wg;t.addClientId(this.config.authOptions.clientId);var n=gp(e.scopes||[],e.extraScopesToConsent||[]);t.addScopes(n),t.addRedirectUri(e.redirectUri);var r=e.correlationId||this.config.cryptoInterface.createNewGuid();return t.addCorrelationId(r),t.addResponseMode(e.responseMode),t.addResponseTypeCode(),t.addLibraryInfo(this.config.libraryInfo),t.addClientInfo(),e.codeChallenge&&t.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&t.addPrompt(e.prompt),e.domainHint&&t.addDomainHint(e.domainHint),e.sid?t.addSid(e.sid):e.loginHint?t.addLoginHint(e.loginHint):e.account&&e.account.username&&t.addLoginHint(e.account.username),e.nonce&&t.addNonce(e.nonce),e.state&&t.addState(e.state),(!_p.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()},t}(vg),Hg=(function(e){function t(t){return e.call(this,t)||this}hp(t,e),t.prototype.acquireToken=function(e){return fp(this,void 0,void 0,(function(){var t,n,r;return pp(this,(function(i){switch(i.label){case 0:return[4,this.getDeviceCode(e)];case 1:return t=i.sent(),e.deviceCodeCallback(t),[4,this.acquireTokenWithDeviceCode(e,t)];case 2:return n=i.sent(),(r=new Fg(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(n),[4,r.handleServerTokenResponse(n,this.authority,e.resourceRequestMethod,e.resourceRequestUri)];case 3:return[2,i.sent()]}}))}))},t.prototype.getDeviceCode=function(e){return fp(this,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t=this.createQueryString(e),n=this.createDefaultTokenRequestHeaders(),[2,this.executePostRequestToDeviceCodeEndpoint(this.authority.deviceCodeEndpoint,t,n,{clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes})]}))}))},t.prototype.executePostRequestToDeviceCodeEndpoint=function(e,t,n,r){return fp(this,void 0,void 0,(function(){var i;return pp(this,(function(o){switch(o.label){case 0:return[4,this.networkManager.sendPostRequest(r,e,{body:t,headers:n})];case 1:return[2,{userCode:(i=o.sent().body).user_code,deviceCode:i.device_code,verificationUri:i.verification_uri,expiresIn:i.expires_in,interval:i.interval,message:i.message}]}}))}))},t.prototype.createQueryString=function(e){var t=new wg;return t.addScopes(e.scopes),t.addClientId(this.config.authOptions.clientId),(!_p.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()},t.prototype.acquireTokenWithDeviceCode=function(e,t){return fp(this,void 0,void 0,(function(){var n,r,i,o,s=this;return pp(this,(function(a){return n=this.createTokenRequestBody(e,t),r=this.createDefaultTokenRequestHeaders(),i=Cg.nowSeconds()+t.expiresIn,o=1e3*t.interval,[2,new Promise((function(t,a){var c=setInterval((function(){return fp(s,void 0,void 0,(function(){var o,s;return pp(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),e.cancel?(this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),clearInterval(c),a(wp.createDeviceCodeCancelledError()),[3,4]):[3,1];case 1:return Cg.nowSeconds()>i?(this.logger.error("Device code expired. Expiration time of device code was "+i),clearInterval(c),a(wp.createDeviceCodeExpiredError()),[3,4]):[3,2];case 2:return[4,this.executePostToTokenEndpoint(this.authority.tokenEndpoint,n,r,{clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes})];case 3:(o=u.sent()).body&&"authorization_pending"==o.body.error?this.logger.info(o.body.error_description):(clearInterval(c),t(o.body)),u.label=4;case 4:return[3,6];case 5:return s=u.sent(),clearInterval(c),a(s),[3,6];case 6:return[2]}}))}))}),o)}))]}))}))},t.prototype.createTokenRequestBody=function(e,t){var n=new wg;n.addScopes(e.scopes),n.addClientId(this.config.authOptions.clientId),n.addGrantType(Lp.DEVICE_CODE_GRANT),n.addDeviceCode(t.deviceCode);var r=e.correlationId||this.config.cryptoInterface.createNewGuid();return n.addCorrelationId(r),n.addClientInfo(),(!_p.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),n.createQueryString()}}(vg),function(e){function t(t){return e.call(this,t)||this}return hp(t,e),t.prototype.acquireToken=function(e){return fp(this,void 0,void 0,(function(){var t,n;return pp(this,(function(r){switch(r.label){case 0:return[4,this.executeTokenRequest(e,this.authority)];case 1:return t=r.sent(),(n=new Fg(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(t.body),[2,n.handleServerTokenResponse(t.body,this.authority,e.resourceRequestMethod,e.resourceRequestUri,null,null,null,null,!0)]}}))}))},t.prototype.acquireTokenByRefreshToken=function(e){return fp(this,void 0,void 0,(function(){var t;return pp(this,(function(n){if(!e)throw Qp.createEmptyTokenRequestError();if(!e.account)throw wp.createNoAccountInSilentRequestError();if(this.cacheManager.isAppMetadataFOCI(e.account.environment,this.config.authOptions.clientId))try{return[2,this.acquireTokenWithCachedRefreshToken(e,!0)]}catch(r){if(t=r instanceof gg&&"invalid_grant"===r.errorCode&&"client_mismatch"===r.subError,r instanceof wp&&r.errorCode===vp||t)return[2,this.acquireTokenWithCachedRefreshToken(e,!1)];throw r}return[2,this.acquireTokenWithCachedRefreshToken(e,!1)]}))}))},t.prototype.acquireTokenWithCachedRefreshToken=function(e,t){return fp(this,void 0,void 0,(function(){var n,r;return pp(this,(function(i){if(!(n=this.cacheManager.readRefreshTokenFromCache(this.config.authOptions.clientId,e.account,t)))throw wp.createNoTokensFoundError();return r=dp(dp({},e),{refreshToken:n.secret}),[2,this.acquireToken(r)]}))}))},t.prototype.executeTokenRequest=function(e,t){return fp(this,void 0,void 0,(function(){var n,r;return pp(this,(function(i){switch(i.label){case 0:return[4,this.createTokenRequestBody(e)];case 1:return n=i.sent(),r=this.createDefaultTokenRequestHeaders(),[2,this.executePostToTokenEndpoint(t.tokenEndpoint,n,r,{clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes})]}}))}))},t.prototype.createTokenRequestBody=function(e){return fp(this,void 0,void 0,(function(){var t,n,r,i,o,s;return pp(this,(function(a){switch(a.label){case 0:return(t=new wg).addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes),t.addGrantType(Lp.REFRESH_TOKEN_GRANT),t.addClientInfo(),n=e.correlationId||this.config.cryptoInterface.createNewGuid(),t.addCorrelationId(n),t.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(t.addClientAssertion((r=this.config.clientCredentials.clientAssertion).assertion),t.addClientAssertionType(r.assertionType)),e.authenticationScheme!==zp.POP?[3,2]:(i=new Dg(this.cryptoUtils),s=(o=t).addPopToken,[4,i.generateCnf(e.resourceRequestMethod,e.resourceRequestUri)]);case 1:s.apply(o,[a.sent()]),a.label=2;case 2:return(!_p.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),[2,t.createQueryString()]}}))}))},t}(vg)),qg=(function(e){function t(t){return e.call(this,t)||this}hp(t,e),t.prototype.acquireToken=function(e){return fp(this,void 0,void 0,(function(){var t;return pp(this,(function(n){switch(n.label){case 0:return this.scopeSet=new Zp(e.scopes||[]),e.skipCache?[4,this.executeTokenRequest(e,this.authority)]:[3,2];case 1:return[2,n.sent()];case 2:return[4,this.getCachedAuthenticationResult()];case 3:return null==(t=n.sent())?[3,4]:[2,t];case 4:return[4,this.executeTokenRequest(e,this.authority)];case 5:return[2,n.sent()]}}))}))},t.prototype.getCachedAuthenticationResult=function(){return fp(this,void 0,void 0,(function(){var e;return pp(this,(function(t){switch(t.label){case 0:return!(e=this.readAccessTokenFromCache())||Cg.isTokenExpired(e.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)?[2,null]:[4,Fg.generateAuthenticationResult(this.cryptoUtils,{account:null,accessToken:e,idToken:null,refreshToken:null,appMetadata:null},null,!0)];case 1:return[2,t.sent()]}}))}))},t.prototype.readAccessTokenFromCache=function(){var e={homeAccountId:"",environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Vp.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()},t=this.cacheManager.getCredentialsFilteredBy(e),n=Object.keys(t.accessTokens).map((function(e){return t.accessTokens[e]}));if(n.length<1)return null;if(n.length>1)throw wp.createMultipleMatchingTokensInCacheError();return n[0]},t.prototype.executeTokenRequest=function(e,t){return fp(this,void 0,void 0,(function(){var n,r,i,o;return pp(this,(function(s){switch(s.label){case 0:return n=this.createTokenRequestBody(e),r=this.createDefaultTokenRequestHeaders(),[4,this.executePostToTokenEndpoint(t.tokenEndpoint,n,r,{clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes})];case 1:return i=s.sent(),(o=new Fg(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(i.body),[4,o.handleServerTokenResponse(i.body,this.authority,e.resourceRequestMethod,e.resourceRequestUri,null,null,e.scopes)];case 2:return[2,s.sent()]}}))}))},t.prototype.createTokenRequestBody=function(e){var t=new wg;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes,!1),t.addGrantType(Lp.CLIENT_CREDENTIALS_GRANT);var n=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var r=this.config.clientCredentials.clientAssertion;t.addClientAssertion(r.assertion),t.addClientAssertionType(r.assertionType)}return(!_p.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}}(vg),function(e){function t(t){return e.call(this,t)||this}hp(t,e),t.prototype.acquireToken=function(e){return fp(this,void 0,void 0,(function(){var t;return pp(this,(function(n){switch(n.label){case 0:return this.scopeSet=new Zp(e.scopes||[]),e.skipCache?[4,this.executeTokenRequest(e,this.authority)]:[3,2];case 1:return[2,n.sent()];case 2:return null==(t=this.getCachedAuthenticationResult(e))?[3,3]:[2,t];case 3:return[4,this.executeTokenRequest(e,this.authority)];case 4:return[2,n.sent()]}}))}))},t.prototype.getCachedAuthenticationResult=function(e){return fp(this,void 0,void 0,(function(){var t,n,r,i;return pp(this,(function(o){switch(o.label){case 0:return!(t=this.readAccessTokenFromCache(e))||Cg.isTokenExpired(t.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)?[2,null]:(n=this.readIdTokenFromCache(e),r=null,i=null,n&&(r=new _g(n.secret,this.config.cryptoInterface),i=this.readAccountFromCache({homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:null,localAccountId:r.claims.oid?r.claims.oid:r.claims.sub})),[4,Fg.generateAuthenticationResult(this.cryptoUtils,{account:i,accessToken:t,idToken:n,refreshToken:null,appMetadata:null},r,!0)]);case 1:return[2,o.sent()]}}))}))},t.prototype.readAccessTokenFromCache=function(e){var t={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Vp.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase(),oboAssertion:e.oboAssertion},n=this.cacheManager.getCredentialsFilteredBy(t),r=Object.keys(n.accessTokens).map((function(e){return n.accessTokens[e]})),i=r.length;if(i<1)return null;if(i>1)throw wp.createMultipleMatchingTokensInCacheError();return r[0]},t.prototype.readIdTokenFromCache=function(e){var t=this.cacheManager.getCredentialsFilteredBy({environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Vp.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,oboAssertion:e.oboAssertion}),n=Object.keys(t.idTokens).map((function(e){return t.idTokens[e]}));return n.length<1?null:n[0]},t.prototype.readAccountFromCache=function(e){return this.cacheManager.readAccountFromCache(e)},t.prototype.executeTokenRequest=function(e,t){return fp(this,void 0,void 0,(function(){var n,r,i,o;return pp(this,(function(s){switch(s.label){case 0:return n=this.createTokenRequestBody(e),r=this.createDefaultTokenRequestHeaders(),[4,this.executePostToTokenEndpoint(t.tokenEndpoint,n,r,{clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes})];case 1:return i=s.sent(),(o=new Fg(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(i.body),[4,o.handleServerTokenResponse(i.body,this.authority,e.resourceRequestMethod,e.resourceRequestUri,null,null,e.scopes,e.oboAssertion)];case 2:return[2,s.sent()]}}))}))},t.prototype.createTokenRequestBody=function(e){var t=new wg;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes),t.addGrantType(Lp.JWT_BEARER),t.addClientInfo();var n=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(n),t.addRequestTokenUse(Tp.ON_BEHALF_OF),t.addOboAssertion(e.oboAssertion),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var r=this.config.clientCredentials.clientAssertion;t.addClientAssertion(r.assertion),t.addClientAssertionType(r.assertionType)}return t.createQueryString()}}(vg),function(e){function t(t){return e.call(this,t)||this}return hp(t,e),t.prototype.acquireToken=function(e){return fp(this,void 0,void 0,(function(){var t;return pp(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.acquireCachedToken(e)];case 1:return[2,n.sent()];case 2:if((t=n.sent())instanceof wp&&t.errorCode===bp)return[2,new Hg(this.config).acquireTokenByRefreshToken(e)];throw t;case 3:return[2]}}))}))},t.prototype.acquireCachedToken=function(e){return fp(this,void 0,void 0,(function(){var t,n,r;return pp(this,(function(i){switch(i.label){case 0:if(!e)throw Qp.createEmptyTokenRequestError();if(!e.account)throw wp.createNoAccountInSilentRequestError();if(t=new Zp(e.scopes||[]),n=e.authority||ng.generateEnvironmentFromAuthority(this.authority),r=this.cacheManager.readCacheRecord(e.account,this.config.authOptions.clientId,t,n),!this.isRefreshRequired(e,r.accessToken))return[3,1];throw wp.createRefreshRequiredError();case 1:return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(r,e.resourceRequestMethod,e.resourceRequestUri)];case 2:return[2,i.sent()]}}))}))},t.prototype.generateResultFromCacheRecord=function(e,t,n){return fp(this,void 0,void 0,(function(){var r;return pp(this,(function(i){switch(i.label){case 0:return r=new _g(e.idToken.secret,this.config.cryptoInterface),[4,Fg.generateAuthenticationResult(this.cryptoUtils,e,r,!0,null,t,n)];case 1:return[2,i.sent()]}}))}))},t.prototype.isRefreshRequired=function(e,t){return!(!e.forceRefresh&&!e.claims&&t&&!Cg.isTokenExpired(t.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))},t}(vg)),Bg=(function(e){function t(t){return e.call(this,t)||this}hp(t,e),t.prototype.acquireToken=function(e){return fp(this,void 0,void 0,(function(){var t,n;return pp(this,(function(r){switch(r.label){case 0:return this.logger.info("in acquireToken call"),[4,this.executeTokenRequest(this.authority,e)];case 1:return t=r.sent(),(n=new Fg(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(t.body),[2,n.handleServerTokenResponse(t.body,this.authority)]}}))}))},t.prototype.executeTokenRequest=function(e,t){return fp(this,void 0,void 0,(function(){var n,r,i;return pp(this,(function(o){switch(o.label){case 0:return n={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes},[4,this.createTokenRequestBody(t)];case 1:return r=o.sent(),i=this.createDefaultTokenRequestHeaders(),[2,this.executePostToTokenEndpoint(e.tokenEndpoint,r,i,n)]}}))}))},t.prototype.createTokenRequestBody=function(e){var t=new wg;t.addClientId(this.config.authOptions.clientId),t.addUsername(e.username),t.addPassword(e.password),t.addScopes(e.scopes),t.addGrantType(Lp.RESOURCE_OWNER_PASSWORD_GRANT),t.addClientInfo();var n=e.correlationId||this.config.cryptoInterface.createNewGuid();return t.addCorrelationId(n),(!_p.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}}(vg),function(){function e(){}return e.createDiscoveredInstance=function(t,n,r){return fp(this,void 0,void 0,(function(){var i,o;return pp(this,(function(s){switch(s.label){case 0:if((i=e.createInstance(t,n,r)).discoveryComplete())return[2,i];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,i.resolveEndpointsAsync()];case 2:return s.sent(),[2,i];case 3:throw o=s.sent(),wp.createEndpointDiscoveryIncompleteError(o);case 4:return[2]}}))}))},e.createInstance=function(e,t,n){if(_p.isEmpty(e))throw Qp.createUrlEmptyError();return new ng(e,t,n)},e}()),zg=function(){function e(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return e.isServerTelemetryEntity=function(e,t){var n=0===e.indexOf(Wp.CACHE_KEY),r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r},e}(),Gg=function(){function e(){}return e.isThrottlingEntity=function(e,t){var n=!1;e&&(n=0===e.indexOf("throttling"));var r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r},e}(),Kg=function(){function e(e,t){this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.forceRefresh=e.forceRefresh||!1,this.telemetryCacheKey=Wp.CACHE_KEY+Fp.CACHE_KEY_SEPARATOR+e.clientId}return e.prototype.generateCurrentRequestHeaderValue=function(){return[Wp.SCHEMA_VERSION,""+this.apiId+Wp.VALUE_SEPARATOR+(this.forceRefresh?1:0),""].join(Wp.CATEGORY_SEPARATOR)},e.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests(),n=e.maxErrorsToSend(t),r=t.failedRequests.slice(0,2*n).join(Wp.VALUE_SEPARATOR),i=t.errors.slice(0,n).join(Wp.VALUE_SEPARATOR),o=t.errors.length,s=[o,n<o?Wp.OVERFLOW_TRUE:Wp.OVERFLOW_FALSE].join(Wp.VALUE_SEPARATOR);return[Wp.SCHEMA_VERSION,t.cacheHits,r,i,s].join(Wp.CATEGORY_SEPARATOR)},e.prototype.cacheFailedRequest=function(e){var t=this.getLastRequests();t.failedRequests.push(this.apiId,this.correlationId),_p.isEmpty(e.suberror)?_p.isEmpty(e.errorCode)?e&&e.toString()?t.errors.push(e.toString()):t.errors.push(Wp.UNKNOWN_ERROR):t.errors.push(e.errorCode):t.errors.push(e.suberror),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)},e.prototype.incrementCacheHits=function(){var e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits},e.prototype.getLastRequests=function(){var e=new zg;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e},e.prototype.clearTelemetryCache=function(){var t=this.getLastRequests(),n=e.maxErrorsToSend(t);if(n===t.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{var r=new zg;r.failedRequests=t.failedRequests.slice(2*n),r.errors=t.errors.slice(n),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}},e.maxErrorsToSend=function(e){var t,n=0,r=0,i=e.errors.length;for(t=0;t<i;t++){var o=e.failedRequests[2*t+1]||"",s=e.errors[t]||"";if(!((r+=(e.failedRequests[2*t]||"").toString().length+o.toString().length+s.length+3)<Wp.MAX_HEADER_BYTES))break;n+=1}return n},e}(),Wg="interaction.status",$g="interaction_in_progress";!function(e){e.LocalStorage="localStorage",e.SessionStorage="sessionStorage",e.MemoryStorage="memoryStorage"}(kg||(kg={})),function(e){e.GET="GET",e.POST="POST"}(Rg||(Rg={})),function(e){e.AUTHORITY="authority",e.ACQUIRE_TOKEN_ACCOUNT="acquireToken.account",e.SESSION_STATE="session.state",e.REQUEST_STATE="request.state",e.NONCE_IDTOKEN="nonce.id_token",e.ORIGIN_URI="request.origin",e.RENEW_STATUS="token.renew.status",e.URL_HASH="urlHash",e.REQUEST_PARAMS="request.params",e.SCOPES="scopes"}(Mg||(Mg={})),function(e){e[e.acquireTokenRedirect=861]="acquireTokenRedirect",e[e.acquireTokenPopup=862]="acquireTokenPopup",e[e.ssoSilent=863]="ssoSilent",e[e.acquireTokenSilent_authCode=864]="acquireTokenSilent_authCode",e[e.handleRedirectPromise=865]="handleRedirectPromise",e[e.acquireTokenSilent_silentFlow=61]="acquireTokenSilent_silentFlow"}(Ug||(Ug={})),function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent"}(Ng||(Ng={}));var Jg,Yg={scopes:[Pp,kp]},Qg="jwk",Zg=function(){function e(){}return e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e}(),Xg=function(){function e(e){this.cryptoObj=e}return e.prototype.generateGuid=function(){try{var e=new Uint8Array(16);return this.cryptoObj.getRandomValues(e),e[6]|=64,e[6]&=79,e[8]|=128,e[8]&=191,Zg.decimalToHex(e[0])+Zg.decimalToHex(e[1])+Zg.decimalToHex(e[2])+Zg.decimalToHex(e[3])+"-"+Zg.decimalToHex(e[4])+Zg.decimalToHex(e[5])+"-"+Zg.decimalToHex(e[6])+Zg.decimalToHex(e[7])+"-"+Zg.decimalToHex(e[8])+Zg.decimalToHex(e[9])+"-"+Zg.decimalToHex(e[10])+Zg.decimalToHex(e[11])+Zg.decimalToHex(e[12])+Zg.decimalToHex(e[13])+Zg.decimalToHex(e[14])+Zg.decimalToHex(e[15])}catch(s){for(var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",n="0123456789abcdef",r=0,i="",o=0;o<36;o++)"-"!==t[o]&&"4"!==t[o]&&(r=16*Math.random()|0),"x"===t[o]?i+=n[r]:"y"===t[o]?(r&=3,i+=n[r|=8]):i+=t[o];return i}},e.isGuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e}(),em=function(){function e(){}return e.stringToUtf8Arr=function(e){for(var t,n=0,r=e.length,i=0;i<r;i++)n+=(t=e.charCodeAt(i))<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;for(var o=new Uint8Array(n),s=0,a=0;s<n;a++)(t=e.charCodeAt(a))<128?o[s++]=t:t<2048?(o[s++]=192+(t>>>6),o[s++]=128+(63&t)):t<65536?(o[s++]=224+(t>>>12),o[s++]=128+(t>>>6&63),o[s++]=128+(63&t)):t<2097152?(o[s++]=240+(t>>>18),o[s++]=128+(t>>>12&63),o[s++]=128+(t>>>6&63),o[s++]=128+(63&t)):t<67108864?(o[s++]=248+(t>>>24),o[s++]=128+(t>>>18&63),o[s++]=128+(t>>>12&63),o[s++]=128+(t>>>6&63),o[s++]=128+(63&t)):(o[s++]=252+(t>>>30),o[s++]=128+(t>>>24&63),o[s++]=128+(t>>>18&63),o[s++]=128+(t>>>12&63),o[s++]=128+(t>>>6&63),o[s++]=128+(63&t));return o},e.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},e.utf8ArrToString=function(e){for(var t="",n=void 0,r=e.length,i=0;i<r;i++)n=e[i],t+=String.fromCharCode(n>251&&n<254&&i+5<r?1073741824*(n-252)+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>247&&n<252&&i+4<r?(n-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>239&&n<248&&i+3<r?(n-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:n>223&&n<240&&i+2<r?(n-224<<12)+(e[++i]-128<<6)+e[++i]-128:n>191&&n<224&&i+1<r?(n-192<<6)+e[++i]-128:n);return t},e}(),tm=function(){function e(){}return e.prototype.urlEncode=function(e){return encodeURIComponent(this.encode(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))},e.prototype.urlEncodeArr=function(e){return this.base64EncArr(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype.encode=function(e){var t=em.stringToUtf8Arr(e);return this.base64EncArr(t)},e.prototype.base64EncArr=function(e){for(var t=(3-e.length%3)%3,n="",r=void 0,i=e.length,o=0,s=0;s<i;s++)o|=e[s]<<(16>>>(r=s%3)&24),2!==r&&e.length-s!=1||(n+=String.fromCharCode(this.uint6ToB64(o>>>18&63),this.uint6ToB64(o>>>12&63),this.uint6ToB64(o>>>6&63),this.uint6ToB64(63&o)),o=0);return 0===t?n:n.substring(0,n.length-t)+(1===t?"=":"==")},e.prototype.uint6ToB64=function(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65},e}(),nm=function(){function e(){}return e.prototype.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Invalid base64 string")}var n=this.base64DecToArr(t);return em.utf8ArrToString(n)},e.prototype.base64DecToArr=function(e,t){for(var n=e.replace(/[^A-Za-z0-9\+\/]/g,""),r=n.length,i=t?Math.ceil((3*r+1>>>2)/t)*t:3*r+1>>>2,o=new Uint8Array(i),s=void 0,a=void 0,c=0,u=0,l=0;l<r;l++)if(a=3&l,c|=this.b64ToUint6(n.charCodeAt(l))<<18-6*a,3===a||r-l==1){for(s=0;s<3&&u<i;s++,u++)o[u]=c>>>(16>>>s&24)&255;c=0}return o},e.prototype.b64ToUint6=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0},e}(),rm=function(e){function t(n,r){var i=e.call(this,n,r)||this;return Object.setPrototypeOf(i,t.prototype),i.name="BrowserAuthError",i}return ip(t,e),t.createPkceNotGeneratedError=function(e){return new t("pkce_not_created","The PKCE code challenge and verifier could not be generated. Detail:"+e)},t.createCryptoNotAvailableError=function(e){return new t("crypto_nonexistent","The crypto object or function is not available. Detail:"+e)},t.createHttpMethodNotImplementedError=function(e){return new t("http_method_not_implemented","The HTTP method given has not been implemented in this library. Given Method: "+e)},t.createEmptyNavigationUriError=function(){return new t("empty_navigate_uri","Navigation URI is empty. Please check stack trace for more info.")},t.createEmptyHashError=function(e){return new t("hash_empty_error","Hash value cannot be processed because it is empty. Given Url: "+e)},t.createInteractionInProgressError=function(){return new t("interaction_in_progress","Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.")},t.createPopupWindowError=function(e){var n="Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.";return new t("popup_window_error",n=_p.isEmpty(e)?n:n+" Details: "+e)},t.createEmptyWindowCreatedError=function(){return new t("empty_window_error","window.open returned null or undefined window object.")},t.createUserCancelledError=function(){return new t("user_cancelled","User cancelled the flow.")},t.createMonitorWindowTimeoutError=function(){return new t("monitor_window_timeout","Token acquisition in popup failed due to timeout.")},t.createRedirectInIframeError=function(e){return new t("redirect_in_iframe","Code flow is not supported inside an iframe. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs. (window.parent !== window) => "+e)},t.createBlockReloadInHiddenIframeError=function(){return new t("block_iframe_reload","Request was blocked inside an iframe because MSAL detected an authentication response. Please ensure monitorWindowForHash was called.")},t.createIframeClosedPrematurelyError=function(){return new t("iframe_closed_prematurely","The iframe being monitored was closed prematurely.")},t.createSilentSSOInsufficientInfoError=function(){return new t("silent_sso_error","Silent SSO could not be completed - insufficient information was provided. Please provide either a loginHint or sid.")},t.createSilentPromptValueError=function(e){return new t("silent_prompt_value_error","The value given for the prompt value is not valid for silent requests - must be set to 'none'. Given value: "+e)},t.createTokenRequestCacheError=function(e){return new t("token_request_cache_error","The token request could not be fetched from the cache correctly. Error Detail: "+e)},t.createInvalidCacheTypeError=function(){return new t("invalid_cache_type","Invalid cache type")},t.createNonBrowserEnvironmentError=function(){return new t("non_browser_environment","Login and token requests are not supported in non-browser environments.")},t}(yp),im=function(){function e(e){this.base64Encode=new tm,this.cryptoObj=e}return e.prototype.generateCodes=function(){return sp(this,void 0,void 0,(function(){var e,t;return ap(this,(function(n){switch(n.label){case 0:return e=this.generateCodeVerifier(),[4,this.generateCodeChallengeFromVerifier(e)];case 1:return t=n.sent(),[2,{verifier:e,challenge:t}]}}))}))},e.prototype.generateCodeVerifier=function(){try{var e=new Uint8Array(32);return this.cryptoObj.getRandomValues(e),this.base64Encode.urlEncodeArr(e)}catch(t){throw rm.createPkceNotGeneratedError(t)}},e.prototype.generateCodeChallengeFromVerifier=function(e){return sp(this,void 0,void 0,(function(){var t,n;return ap(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.cryptoObj.sha256Digest(e)];case 1:return t=r.sent(),[2,this.base64Encode.urlEncodeArr(new Uint8Array(t))];case 2:throw n=r.sent(),rm.createPkceNotGeneratedError(n);case 3:return[2]}}))}))},e}(),om="SHA-256",sm=new Uint8Array([1,0,1]),am=function(){function e(){if(!this.hasCryptoAPI())throw rm.createCryptoNotAvailableError("Browser crypto or msCrypto object not available.");this._keygenAlgorithmOptions={name:"RSASSA-PKCS1-v1_5",hash:om,modulusLength:2048,publicExponent:sm}}return e.prototype.sha256Digest=function(e){return sp(this,void 0,void 0,(function(){var t;return ap(this,(function(n){return t=em.stringToUtf8Arr(e),[2,this.hasIECrypto()?this.getMSCryptoDigest(om,t):this.getSubtleCryptoDigest(om,t)]}))}))},e.prototype.getRandomValues=function(e){var t=window.msCrypto||window.crypto;if(!t.getRandomValues)throw rm.createCryptoNotAvailableError("getRandomValues does not exist.");t.getRandomValues(e)},e.prototype.generateKeyPair=function(e,t){return sp(this,void 0,void 0,(function(){return ap(this,(function(n){return[2,this.hasIECrypto()?this.msCryptoGenerateKey(e,t):window.crypto.subtle.generateKey(this._keygenAlgorithmOptions,e,t)]}))}))},e.prototype.exportJwk=function(e){return sp(this,void 0,void 0,(function(){return ap(this,(function(t){return[2,this.hasIECrypto()?this.msCryptoExportJwk(e):window.crypto.subtle.exportKey(Qg,e)]}))}))},e.prototype.importJwk=function(t,n,r){return sp(this,void 0,void 0,(function(){var i,o;return ap(this,(function(s){return i=e.getJwkString(t),o=em.stringToArrayBuffer(i),[2,this.hasIECrypto()?this.msCryptoImportKey(o,n,r):window.crypto.subtle.importKey(Qg,t,this._keygenAlgorithmOptions,n,r)]}))}))},e.prototype.sign=function(e,t){return sp(this,void 0,void 0,(function(){return ap(this,(function(n){return[2,this.hasIECrypto()?this.msCryptoSign(e,t):window.crypto.subtle.sign(this._keygenAlgorithmOptions,e,t)]}))}))},e.prototype.hasCryptoAPI=function(){return this.hasIECrypto()||this.hasBrowserCrypto()},e.prototype.hasIECrypto=function(){return"msCrypto"in window},e.prototype.hasBrowserCrypto=function(){return"crypto"in window},e.prototype.getSubtleCryptoDigest=function(e,t){return sp(this,void 0,void 0,(function(){return ap(this,(function(n){return[2,window.crypto.subtle.digest(e,t)]}))}))},e.prototype.getMSCryptoDigest=function(e,t){return sp(this,void 0,void 0,(function(){return ap(this,(function(n){return[2,new Promise((function(n,r){var i=window.msCrypto.subtle.digest(e,t.buffer);i.addEventListener("complete",(function(e){n(e.target.result)})),i.addEventListener("error",(function(e){r(e)}))}))]}))}))},e.prototype.msCryptoGenerateKey=function(e,t){return sp(this,void 0,void 0,(function(){var n=this;return ap(this,(function(r){return[2,new Promise((function(r,i){var o=window.msCrypto.subtle.generateKey(n._keygenAlgorithmOptions,e,t);o.addEventListener("complete",(function(e){r(e.target.result)})),o.addEventListener("error",(function(e){i(e)}))}))]}))}))},e.prototype.msCryptoExportJwk=function(e){return sp(this,void 0,void 0,(function(){return ap(this,(function(t){return[2,new Promise((function(t,n){var r=window.msCrypto.subtle.exportKey(Qg,e);r.addEventListener("complete",(function(e){var r=em.utf8ArrToString(new Uint8Array(e.target.result)).replace(/\r/g,"").replace(/\n/g,"").replace(/\t/g,"").split(" ").join("").replace("\0","");try{t(JSON.parse(r))}catch(e){n(e)}})),r.addEventListener("error",(function(e){n(e)}))}))]}))}))},e.prototype.msCryptoImportKey=function(e,t,n){return sp(this,void 0,void 0,(function(){var r=this;return ap(this,(function(i){return[2,new Promise((function(i,o){var s=window.msCrypto.subtle.importKey(Qg,e,r._keygenAlgorithmOptions,t,n);s.addEventListener("complete",(function(e){i(e.target.result)})),s.addEventListener("error",(function(e){o(e)}))}))]}))}))},e.prototype.msCryptoSign=function(e,t){return sp(this,void 0,void 0,(function(){var n=this;return ap(this,(function(r){return[2,new Promise((function(r,i){var o=window.msCrypto.subtle.sign(n._keygenAlgorithmOptions,e,t);o.addEventListener("complete",(function(e){r(e.target.result)})),o.addEventListener("error",(function(e){i(e)}))}))]}))}))},e.getJwkString=function(e){return JSON.stringify(e,Object.keys(e).sort())},e}(),cm=function(){function e(e,t,n){this.dbName=e,this.tableName=t,this.version=n,this.dbOpen=!1}return e.prototype.open=function(){return sp(this,void 0,void 0,(function(){var e=this;return ap(this,(function(t){return[2,new Promise((function(t,n){var r=window.indexedDB.open(e.dbName,e.version);r.addEventListener("upgradeneeded",(function(t){t.target.result.createObjectStore(e.tableName)})),r.addEventListener("success",(function(n){e.db=n.target.result,e.dbOpen=!0,t()})),r.addEventListener("error",(function(e){return n(e)}))}))]}))}))},e.prototype.get=function(e){return sp(this,void 0,void 0,(function(){var t=this;return ap(this,(function(n){switch(n.label){case 0:return this.dbOpen?[3,2]:[4,this.open()];case 1:n.sent(),n.label=2;case 2:return[2,new Promise((function(n,r){var i=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);i.addEventListener("success",(function(e){return n(e.target.result)})),i.addEventListener("error",(function(e){return r(e)}))}))]}}))}))},e.prototype.put=function(e,t){return sp(this,void 0,void 0,(function(){var n=this;return ap(this,(function(r){switch(r.label){case 0:return this.dbOpen?[3,2]:[4,this.open()];case 1:r.sent(),r.label=2;case 2:return[2,new Promise((function(r,i){var o=n.db.transaction([n.tableName],"readwrite").objectStore(n.tableName).put(t,e);o.addEventListener("success",(function(e){return r(e.target.result)})),o.addEventListener("error",(function(e){return i(e)}))}))]}}))}))},e}(),um=function(){function e(){this.browserCrypto=new am,this.b64Encode=new tm,this.b64Decode=new nm,this.guidGenerator=new Xg(this.browserCrypto),this.pkceGenerator=new im(this.browserCrypto),this.cache=new cm(e.DB_NAME,e.TABLE_NAME,e.DB_VERSION)}return e.prototype.createNewGuid=function(){return this.guidGenerator.generateGuid()},e.prototype.base64Encode=function(e){return this.b64Encode.encode(e)},e.prototype.base64Decode=function(e){return this.b64Decode.decode(e)},e.prototype.generatePkceCodes=function(){return sp(this,void 0,void 0,(function(){return ap(this,(function(e){return[2,this.pkceGenerator.generateCodes()]}))}))},e.prototype.getPublicKeyThumbprint=function(t,n){return sp(this,void 0,void 0,(function(){var r,i,o,s,a,c,u;return ap(this,(function(l){switch(l.label){case 0:return[4,this.browserCrypto.generateKeyPair(e.EXTRACTABLE,e.POP_KEY_USAGES)];case 1:return r=l.sent(),[4,this.browserCrypto.exportJwk(r.publicKey)];case 2:return i=l.sent(),o=am.getJwkString({e:i.e,kty:i.kty,n:i.n}),[4,this.browserCrypto.sha256Digest(o)];case 3:return s=l.sent(),a=this.b64Encode.urlEncodeArr(new Uint8Array(s)),[4,this.browserCrypto.exportJwk(r.privateKey)];case 4:return c=l.sent(),[4,this.browserCrypto.importJwk(c,!1,["sign"])];case 5:return u=l.sent(),this.cache.put(a,{privateKey:u,publicKey:r.publicKey,requestMethod:t,requestUri:n}),[2,a]}}))}))},e.prototype.signJwt=function(e,t){return sp(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l;return ap(this,(function(h){switch(h.label){case 0:return[4,this.cache.get(t)];case 1:return n=h.sent(),[4,this.browserCrypto.exportJwk(n.publicKey)];case 2:return r=h.sent(),i=am.getJwkString(r),o=this.b64Encode.urlEncode(JSON.stringify({alg:r.alg,type:Qg})),e.cnf={jwk:JSON.parse(i)},s=this.b64Encode.urlEncode(JSON.stringify(e)),c=em.stringToArrayBuffer(a=o+"."+s),[4,this.browserCrypto.sign(n.privateKey,c)];case 3:return u=h.sent(),l=this.b64Encode.urlEncodeArr(new Uint8Array(u)),[2,a+"."+l]}}))}))},e.POP_KEY_USAGES=["sign","verify"],e.EXTRACTABLE=!0,e.DB_VERSION=1,e.TABLE_NAME=(e.DB_NAME="msal.db")+".keys",e}(),lm=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.name="BrowserConfigurationAuthError",Object.setPrototypeOf(i,t.prototype),i}return ip(t,e),t.createRedirectUriEmptyError=function(){return new t("redirect_uri_empty","A redirect URI is required for all calls, and none has been set.")},t.createPostLogoutRedirectUriEmptyError=function(){return new t("post_logout_uri_empty","A post logout redirect has not been set.")},t.createStorageNotSupportedError=function(e){return new t("storage_not_supported","Given storage configuration option was not supported. Given Location: "+e)},t.createInvalidCallbackObjectError=function(e){return new t("invalid_callback_object","The object passed for the callback was invalid. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics. Given value for callback function: "+e)},t.createRedirectCallbacksNotSetError=function(){return new t("no_redirect_callbacks","No redirect callbacks have been set. Please call setRedirectCallbacks() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.")},t.createInMemoryRedirectUnavailableError=function(){return new t("in_mem_redirect_unavailable","Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true.")},t}(yp),hm=function(){function e(e){this.validateWindowStorage(e),this.cacheLocation=e}return Object.defineProperty(e.prototype,"windowStorage",{get:function(){return this._windowStorage||(this._windowStorage=window[this.cacheLocation]),this._windowStorage},enumerable:!0,configurable:!0}),e.prototype.validateWindowStorage=function(e){if(e!==kg.LocalStorage&&e!==kg.SessionStorage)throw lm.createStorageNotSupportedError(e);if(!window[e])throw lm.createStorageNotSupportedError(e)},e.prototype.getItem=function(e){return this.windowStorage.getItem(e)},e.prototype.setItem=function(e,t){this.windowStorage.setItem(e,t)},e.prototype.removeItem=function(e){this.windowStorage.removeItem(e)},e.prototype.getKeys=function(){return Object.keys(this.windowStorage)},e.prototype.containsKey=function(e){return this.windowStorage.hasOwnProperty(e)},e}(),dm=function(){function e(){this.cache=new Map}return e.prototype.getItem=function(e){return this.cache.get(e)||null},e.prototype.setItem=function(e,t){this.cache.set(e,t)},e.prototype.removeItem=function(e){this.cache.delete(e)},e.prototype.getKeys=function(){var e=[];return this.cache.forEach((function(t,n){e.push(n)})),e},e.prototype.containsKey=function(e){return this.cache.has(e)},e}(),fm=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.COOKIE_LIFE_MULTIPLIER=864e5,o.cacheConfig=n,o.clientId=t,o.cryptoImpl=r,o.logger=i,o.browserStorage=o.setupBrowserStorage(n.cacheLocation),o.migrateCacheEntries(),o}return ip(t,e),t.prototype.setupBrowserStorage=function(e){switch(e){case kg.LocalStorage:case kg.SessionStorage:try{return new hm(e)}catch(t){return this.logger.verbose(t),this.cacheConfig.cacheLocation=kg.MemoryStorage,new dm}case kg.MemoryStorage:default:return new dm}},t.prototype.migrateCacheEntries=function(){var e=this,t="msal."+Sp.CLIENT_INFO,n="msal."+Sp.ERROR,r="msal."+Sp.ERROR_DESC,i=[this.browserStorage.getItem("msal."+Sp.ID_TOKEN),this.browserStorage.getItem(t),this.browserStorage.getItem(n),this.browserStorage.getItem(r)];[Sp.ID_TOKEN,Sp.CLIENT_INFO,Sp.ERROR,Sp.ERROR_DESC].forEach((function(t,n){return e.migrateCacheEntry(t,i[n])}))},t.prototype.migrateCacheEntry=function(e,t){t&&this.setTemporaryCache(e,t,!0)},t.prototype.validateAndParseJson=function(e){try{var t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch(n){return null}},t.prototype.getItem=function(e){return this.browserStorage.getItem(e)},t.prototype.setItem=function(e,t){this.browserStorage.setItem(e,t)},t.prototype.getAccount=function(e){var t=this.getItem(e);if(_p.isEmpty(t))return null;var n=this.validateAndParseJson(t),r=sg.toObject(new og,n);return og.isAccountEntity(r)?r:null},t.prototype.setAccount=function(e){var t=e.generateAccountKey();this.setItem(t,JSON.stringify(e))},t.prototype.getIdTokenCredential=function(e){var t=this.getItem(e);if(_p.isEmpty(t))return null;var n=this.validateAndParseJson(t),r=sg.toObject(new Sg,n);return Sg.isIdTokenEntity(r)?r:null},t.prototype.setIdTokenCredential=function(e){var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e))},t.prototype.getAccessTokenCredential=function(e){var t=this.getItem(e);if(_p.isEmpty(t))return null;var n=this.validateAndParseJson(t),r=sg.toObject(new Eg,n);return Eg.isAccessTokenEntity(r)?r:null},t.prototype.setAccessTokenCredential=function(e){var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e))},t.prototype.getRefreshTokenCredential=function(e){var t=this.getItem(e);if(_p.isEmpty(t))return null;var n=this.validateAndParseJson(t),r=sg.toObject(new Tg,n);return Tg.isRefreshTokenEntity(r)?r:null},t.prototype.setRefreshTokenCredential=function(e){var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e))},t.prototype.getAppMetadata=function(e){var t=this.getItem(e);if(_p.isEmpty(t))return null;var n=this.validateAndParseJson(t),r=sg.toObject(new Lg,n);return Lg.isAppMetadataEntity(e,r)?r:null},t.prototype.setAppMetadata=function(e){var t=e.generateAppMetadataKey();this.setItem(t,JSON.stringify(e))},t.prototype.getServerTelemetry=function(e){var t=this.getItem(e);if(_p.isEmpty(t))return null;var n=this.validateAndParseJson(t),r=sg.toObject(new zg,n);return zg.isServerTelemetryEntity(e,r)?r:null},t.prototype.setServerTelemetry=function(e,t){this.setItem(e,JSON.stringify(t))},t.prototype.getThrottlingCache=function(e){var t=this.getItem(e);if(_p.isEmpty(t))return null;var n=this.validateAndParseJson(t),r=sg.toObject(new Gg,n);return Gg.isThrottlingEntity(e,r)?r:null},t.prototype.setThrottlingCache=function(e,t){this.setItem(e,JSON.stringify(t))},t.prototype.getTemporaryCache=function(e,t){var n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){var r=this.getItemCookie(n);if(r)return r}var i=this.getItem(n);return _p.isEmpty(i)?null:i},t.prototype.setTemporaryCache=function(e,t,n){var r=n?this.generateCacheKey(e):e;this.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&this.setItemCookie(r,t)},t.prototype.removeItem=function(e){return this.browserStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&this.clearItemCookie(e),!0},t.prototype.containsKey=function(e){return this.browserStorage.containsKey(e)},t.prototype.getKeys=function(){return this.browserStorage.getKeys()},t.prototype.clear=function(){var e=this;this.removeAllAccounts(),this.removeAppMetadata(),this.browserStorage.getKeys().forEach((function(t){!e.browserStorage.containsKey(t)||-1===t.indexOf(Op)&&-1===t.indexOf(e.clientId)||e.removeItem(t)}))},t.prototype.setItemCookie=function(e,t,n){var r=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/;";n&&(r+="expires="+this.getCookieExpirationTime(n)+";"),document.cookie=r},t.prototype.getItemCookie=function(e){for(var t=encodeURIComponent(e)+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return""},t.prototype.clearItemCookie=function(e){this.setItemCookie(e,"",-1)},t.prototype.clearMsalCookie=function(e){var t=e?this.generateNonceKey(e):this.generateStateKey(Mg.NONCE_IDTOKEN);this.clearItemCookie(this.generateStateKey(e)),this.clearItemCookie(t),this.clearItemCookie(this.generateCacheKey(Mg.ORIGIN_URI))},t.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()},t.prototype.getCache=function(){return this.browserStorage},t.prototype.setCache=function(){},t.prototype.generateCacheKey=function(e){return this.validateAndParseJson(e)?JSON.stringify(e):_p.startsWith(e,Op)||_p.startsWith(e,Sp.ADAL_ID_TOKEN)?e:"msal."+this.clientId+"."+e},t.prototype.generateAuthorityKey=function(e){var t=Pg.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(Mg.AUTHORITY+"."+t)},t.prototype.generateNonceKey=function(e){var t=Pg.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(Mg.NONCE_IDTOKEN+"."+t)},t.prototype.generateStateKey=function(e){var t=Pg.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(Mg.REQUEST_STATE+"."+t)},t.prototype.setAuthorityCache=function(e,t){var n=this.generateAuthorityKey(t);this.setItem(n,e)},t.prototype.getCachedAuthority=function(e){var t=this.generateStateKey(e),n=this.getTemporaryCache(t);if(!n)return null;var r=this.generateAuthorityKey(n);return this.getTemporaryCache(r)},t.prototype.updateCacheEntries=function(e,t,n){var r=this.generateStateKey(e);this.setTemporaryCache(r,e,!1);var i=this.generateNonceKey(e);this.setTemporaryCache(i,t,!1),this.setAuthorityCache(n,e)},t.prototype.resetRequestCache=function(e){var t=this;this.getKeys().forEach((function(n){_p.isEmpty(e)||-1===n.indexOf(e)||t.removeItem(n)})),e&&(this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(Mg.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(Mg.ORIGIN_URI)),this.removeItem(this.generateCacheKey(Mg.URL_HASH))},t.prototype.cleanRequest=function(e){if(this.removeItem(this.generateCacheKey(Wg)),e){var t=this.generateStateKey(e),n=this.getItem(t);this.resetRequestCache(n||"")}},t.prototype.cacheCodeRequest=function(e,t){var n=t.base64Encode(JSON.stringify(e));this.setTemporaryCache(Mg.REQUEST_PARAMS,n,!0)},t.prototype.getCachedRequest=function(e,t){try{var n=this.getTemporaryCache(Mg.REQUEST_PARAMS,!0),r=JSON.parse(t.base64Decode(n));if(this.removeItem(this.generateCacheKey(Mg.REQUEST_PARAMS)),_p.isEmpty(r.authority)){var i=this.generateAuthorityKey(e),o=this.getTemporaryCache(i);r.authority=o}return r}catch(s){throw rm.createTokenRequestCacheError(s)}},t}(sg),pm=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return sp(this,void 0,void 0,(function(){var n,r;return ap(this,(function(i){switch(i.label){case 0:return[4,fetch(e,{method:Rg.GET,headers:this.getFetchHeaders(t)})];case 1:return n=i.sent(),r={headers:this.getHeaderDict(n.headers)},[4,n.json()];case 2:return[2,(r.body=i.sent(),r.status=n.status,r)]}}))}))},e.prototype.sendPostRequestAsync=function(e,t){return sp(this,void 0,void 0,(function(){var n,r,i;return ap(this,(function(o){switch(o.label){case 0:return n=t&&t.body||"",[4,fetch(e,{method:Rg.POST,headers:this.getFetchHeaders(t),body:n})];case 1:return r=o.sent(),i={headers:this.getHeaderDict(r.headers)},[4,r.json()];case 2:return[2,(i.body=o.sent(),i.status=r.status,i)]}}))}))},e.prototype.getFetchHeaders=function(e){var t=new Headers;return e&&e.headers?(Object.keys(e.headers).forEach((function(n){t.append(n,e.headers[n])})),t):t},e.prototype.getHeaderDict=function(e){var t={};return e.forEach((function(e,n){t[n]=e})),t},e}(),gm=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return sp(this,void 0,void 0,(function(){return ap(this,(function(n){return[2,this.sendRequestAsync(e,Rg.GET,t)]}))}))},e.prototype.sendPostRequestAsync=function(e,t){return sp(this,void 0,void 0,(function(){return ap(this,(function(n){return[2,this.sendRequestAsync(e,Rg.POST,t)]}))}))},e.prototype.sendRequestAsync=function(e,t,n){var r=this;return new Promise((function(i,o){var s=new XMLHttpRequest;if(s.open(t,e,!0),r.setXhrHeaders(s,n),s.onload=function(){(s.status<200||s.status>=300)&&o(s.responseText);try{var e=JSON.parse(s.responseText),t={headers:r.getHeaderDict(s),body:e,status:s.status};i(t)}catch(n){o(s.responseText)}},s.onerror=function(){o(s.status)},"POST"===t&&n.body)s.send(n.body);else{if("GET"!==t)throw rm.createHttpMethodNotImplementedError(t);s.send()}}))},e.prototype.setXhrHeaders=function(e,t){t&&t.headers&&Object.keys(t.headers).forEach((function(n){e.setRequestHeader(n,t.headers[n])}))},e.prototype.getHeaderDict=function(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return t.forEach((function(e){var t=e.split(": "),r=t.shift(),i=t.join(": ");n[r]=i})),n},e}(),mm=function(){function e(){}return e.navigateWindow=function(e,t,n,r){return r?window.location.replace(e):window.location.assign(e),new Promise((function(e){setTimeout((function(){n.warning("Expected to navigate away from the current page but timeout occurred."),e()}),t)}))},e.clearHash=function(){"function"==typeof history.replaceState?history.replaceState(null,null,""+window.location.pathname+window.location.search):window.location.hash=""},e.replaceHash=function(e){var t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""},e.isInIframe=function(){return window.parent!==window},e.getCurrentUri=function(){return window.location.href.split("?")[0].split("#")[0]},e.getHomepage=function(){var e=new eg(window.location.href).getUrlComponents();return e.Protocol+"//"+e.HostNameAndPort+"/"},e.getBrowserNetworkClient=function(){return window.fetch&&window.Headers?new pm:new gm},e.blockReloadInHiddenIframes=function(){if(eg.hashContainsKnownProperties(window.location.hash)&&e.isInIframe())throw rm.createBlockReloadInHiddenIframeError()},e.blockNonBrowserEnvironment=function(e){if(!e)throw rm.createNonBrowserEnvironmentError()},e.detectIEOrEdge=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/"),r=e.indexOf("Edge/");return t>0||n>0||r>0},e}(),ym=function(){function e(){}return e.extractBrowserRequestState=function(e,t){if(_p.isEmpty(t))return null;try{return Pg.parseRequestState(e,t).libraryState.meta}catch(n){throw wp.createInvalidStateError(t,n)}},e.parseServerResponseFromHash=function(e){if(!e)return{};var t=new eg(e);return eg.getDeserializedHash(t.getHash())},e}(),vm=function(){function e(e,t,n){this.authModule=e,this.browserStorage=t,this.browserCrypto=n}return e.prototype.initiateAuthRequest=function(e,t,n,r){if(_p.isEmpty(e))throw this.authModule.logger.info("Navigate url is empty"),rm.createEmptyNavigationUriError();r&&this.browserStorage.setTemporaryCache(Mg.ORIGIN_URI,r,!0),this.browserStorage.setTemporaryCache(Wg,$g,!0),this.browserStorage.cacheCodeRequest(t,this.browserCrypto),this.authModule.logger.infoPii("Navigate to:"+e);var i=mm.isInIframe();if(i)throw rm.createRedirectInIframeError(i);return mm.navigateWindow(e,n,this.authModule.logger)},e.prototype.handleCodeResponse=function(e,t){return sp(this,void 0,void 0,(function(){var n,r,i,o,s,a,c;return ap(this,(function(u){switch(u.label){case 0:if(_p.isEmpty(e))throw rm.createEmptyHashError(e);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Wg)),n=ym.parseServerResponseFromHash(e),r=this.browserStorage.generateStateKey(n.state),i=this.browserStorage.getTemporaryCache(r),o=this.authModule.handleFragmentResponse(e,i),s=this.browserStorage.generateNonceKey(i),a=this.browserStorage.getTemporaryCache(s),this.authCodeRequest=this.browserStorage.getCachedRequest(i,this.browserCrypto),this.authCodeRequest.code=o,t&&mg.removeThrottle(this.browserStorage,t,this.authCodeRequest.authority,this.authCodeRequest.scopes),[4,this.authModule.acquireToken(this.authCodeRequest,a,i)];case 1:return c=u.sent(),this.browserStorage.cleanRequest(n.state),[2,c]}}))}))},e}(),bm=function(){function e(e,t){this.authModule=e,this.browserStorage=t}return e.prototype.handleCodeResponse=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return ap(this,(function(c){switch(c.label){case 0:if(_p.isEmpty(e))throw rm.createEmptyHashError(e);return t=ym.parseServerResponseFromHash(e),n=this.browserStorage.generateStateKey(t.state),r=this.browserStorage.getTemporaryCache(n),i=this.authModule.handleFragmentResponse(e,r),o=this.browserStorage.generateNonceKey(r),s=this.browserStorage.getTemporaryCache(o),this.authCodeRequest.code=i,[4,this.authModule.acquireToken(this.authCodeRequest,s,r)];case 1:return a=c.sent(),this.browserStorage.cleanRequest(t.state),[2,a]}}))}))},e}(),wm=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.unloadWindow=r.unloadWindow.bind(r),r}return ip(t,e),t.prototype.initiateAuthRequest=function(e,t,n){if(_p.isEmpty(e))throw this.authModule.logger.error("Navigate url is empty"),rm.createEmptyNavigationUriError();return this.authCodeRequest=t,this.browserStorage.setTemporaryCache(Wg,$g,!0),this.authModule.logger.infoPii("Navigate to:"+e),this.openPopup(e,n)},t.prototype.monitorPopupForHash=function(e,t){var n=this;return new Promise((function(r,i){var o=t/50,s=0,a=setInterval((function(){if(e.closed)return n.cleanPopup(),clearInterval(a),void i(rm.createUserCancelledError());var t;try{t=e.location.href}catch(u){}if(!_p.isEmpty(t)&&"about:blank"!==t){s++;var c=e.location.hash;return eg.hashContainsKnownProperties(c)?(n.cleanPopup(e),clearInterval(a),void r(c)):s>o?(n.cleanPopup(e),clearInterval(a),void i(rm.createMonitorWindowTimeoutError())):void 0}}),50)}))},t.prototype.openPopup=function(e,n){try{var r=void 0;if(n?(r=n).location.assign(e):void 0===n&&(r=t.openSizedPopup(e)),!r)throw rm.createEmptyWindowCreatedError();return r.focus&&r.focus(),this.currentWindow=r,window.addEventListener("beforeunload",this.unloadWindow),r}catch(i){throw this.authModule.logger.error("error opening popup "+i.message),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Wg)),rm.createPopupWindowError(i.toString())}},t.openSizedPopup=function(e){void 0===e&&(e="about:blank");var t=window.screenLeft?window.screenLeft:window.screenX,n=window.screenTop?window.screenTop:window.screenY,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=Math.max(0,r/2-241.5+t),s=Math.max(0,i/2-300+n);return window.open(e,"MSAL.JS","width=483, height=600, top="+s+", left="+o)},t.prototype.unloadWindow=function(e){this.browserStorage.cleanRequest(),this.currentWindow.close(),delete e.returnValue},t.prototype.cleanPopup=function(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Wg))},t}(bm),_m=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.loadFrameTimeout=r,i}return ip(t,e),t.prototype.initiateAuthRequest=function(e,t){return sp(this,void 0,void 0,(function(){var n;return ap(this,(function(r){switch(r.label){case 0:if(_p.isEmpty(e))throw this.authModule.logger.info("Navigate url is empty"),rm.createEmptyNavigationUriError();return this.authCodeRequest=t,this.loadFrameTimeout?[4,this.loadFrame(e)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=this.loadFrameSync(e),r.label=3;case 3:return[2,n]}}))}))},t.prototype.monitorIframeForHash=function(e,t){var n=this;return new Promise((function(r,i){var o=window.performance.now()+t,s=setInterval((function(){if(window.performance.now()>o)return n.removeHiddenIframe(e),clearInterval(s),void i(rm.createMonitorWindowTimeoutError());var t;try{t=e.contentWindow.location.href}catch(c){}if(!_p.isEmpty(t)){var a=e.contentWindow.location.hash;return eg.hashContainsKnownProperties(a)?(n.removeHiddenIframe(e),clearInterval(s),void r(a)):void 0}}),50)}))},t.prototype.loadFrame=function(e){var t=this;return new Promise((function(n,r){setTimeout((function(){var i=t.loadFrameSync(e);i?n(i):r("Unable to load iframe")}),t.loadFrameTimeout)}))},t.prototype.loadFrameSync=function(e){var t=this.createHiddenIframe();return t.src=e,t},t.prototype.createHiddenIframe=function(){var e=document.createElement("iframe");return e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(e),e},t.prototype.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},t}(bm);!function(e){e.LOGIN_START="msal:loginStart",e.LOGIN_SUCCESS="msal:loginSuccess",e.LOGIN_FAILURE="msal:loginFailure",e.ACQUIRE_TOKEN_START="msal:acquireTokenStart",e.ACQUIRE_TOKEN_SUCCESS="msal:acquireTokenSuccess",e.ACQUIRE_TOKEN_FAILURE="msal:acquireTokenFailure",e.ACQUIRE_TOKEN_NETWORK_START="msal:acquireTokenFromNetworkStart",e.SSO_SILENT_START="msal:ssoSilentStart",e.SSO_SILENT_SUCCESS="msal:ssoSilentSuccess",e.SSO_SILENT_FAILURE="msal:ssoSilentFailure",e.HANDLE_REDIRECT_START="msal:handleRedirectStart",e.HANDLE_REDIRECT_END="msal:handleRedirectEnd",e.LOGOUT_START="msal:logoutStart",e.LOGOUT_SUCCESS="msal:logoutSuccess",e.LOGOUT_FAILURE="msal:logoutFailure"}(Jg||(Jg={}));var Cm=function(e){function t(t){return e.call(this,t)||this}return ip(t,e),t.prototype.loginRedirect=function(e){return sp(this,void 0,void 0,(function(){return ap(this,(function(t){return[2,this.acquireTokenRedirect(e||Yg)]}))}))},t.prototype.loginPopup=function(e){return this.acquireTokenPopup(e||Yg)},t.prototype.acquireTokenSilent=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i,o;return ap(this,(function(s){switch(s.label){case 0:this.preflightBrowserEnvironmentCheck(Ng.Silent),t=op(op({},e),this.initializeBaseRequest(e)),this.emitEvent(Jg.ACQUIRE_TOKEN_START,Ng.Silent,e),s.label=1;case 1:return s.trys.push([1,4,,9]),n=this.initializeServerTelemetryManager(Ug.acquireTokenSilent_silentFlow,t.correlationId),[4,this.createSilentFlowClient(n,t.authority)];case 2:return[4,s.sent().acquireCachedToken(t)];case 3:return r=s.sent(),this.emitEvent(Jg.ACQUIRE_TOKEN_SUCCESS,Ng.Silent,r),[2,r];case 4:s.sent(),s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.acquireTokenByRefreshToken(e)];case 6:return i=s.sent(),this.emitEvent(Jg.ACQUIRE_TOKEN_SUCCESS,Ng.Silent,i),[2,i];case 7:throw o=s.sent(),this.emitEvent(Jg.ACQUIRE_TOKEN_FAILURE,Ng.Silent,null,o),o;case 8:return[3,9];case 9:return[2]}}))}))},t}(function(){function e(e){this.isBrowserEnvironment="undefined"!=typeof window,this.isBrowserEnvironment&&(this.config=function(e){var t=e.auth,n=e.cache,r=e.system,i={clientId:"",authority:"https://login.microsoftonline.com/common/",knownAuthorities:[],cloudDiscoveryMetadata:"",redirectUri:"",postLogoutRedirectUri:"",navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Xp.AAD},o={cacheLocation:kg.SessionStorage,storeAuthStateInCookie:!1},s=op(op({},ug),{loggerOptions:{loggerCallback:function(){},piiLoggingEnabled:!1},networkClient:mm.getBrowserNetworkClient(),windowHashTimeout:6e4,iframeHashTimeout:6e3,loadFrameTimeout:mm.detectIEOrEdge()?500:0,redirectNavigationTimeout:3e4,asyncPopups:!1});return{auth:op(op({},i),t),cache:op(op({},o),n),system:op(op({},s),r)}}(e),this.browserCrypto=new um,this.networkClient=this.config.system.networkClient,this.logger=new Ip(this.config.system.loggerOptions),this.browserStorage=new fm(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger),this.eventCallbacks=new Map,tg.setTrustedAuthoritiesFromConfig(this.config.auth.knownAuthorities,this.config.auth.cloudDiscoveryMetadata),this.defaultAuthority=null)}return e.prototype.handleRedirectPromise=function(e){return sp(this,void 0,void 0,(function(){var t,n=this;return ap(this,(function(r){return this.emitEvent(Jg.HANDLE_REDIRECT_START,Ng.Redirect),t=this.getAllAccounts(),this.isBrowserEnvironment?[2,this.handleRedirectResponse(e).then((function(e){if(e){var r=t.length<n.getAllAccounts().length;n.emitEvent(r?Jg.LOGIN_SUCCESS:Jg.ACQUIRE_TOKEN_SUCCESS,Ng.Redirect,e)}return n.emitEvent(Jg.HANDLE_REDIRECT_END,Ng.Redirect),e})).catch((function(e){throw n.emitEvent(t.length>0?Jg.ACQUIRE_TOKEN_FAILURE:Jg.LOGIN_FAILURE,Ng.Redirect,null,e),n.emitEvent(Jg.HANDLE_REDIRECT_END,Ng.Redirect),e}))]:[2,null]}))}))},e.prototype.handleRedirectResponse=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i,o,s;return ap(this,(function(a){switch(a.label){case 0:return this.interactionInProgress()?(t=this.getRedirectResponseHash(e||window.location.hash),_p.isEmpty(t)?[2,null]:(n=this.browserStorage.getTemporaryCache(Mg.ORIGIN_URI,!0),r=eg.removeHashFromUrl(n||""),i=eg.removeHashFromUrl(window.location.href),r===i&&this.config.auth.navigateToLoginRequestUrl?[4,this.handleHash(t)]:[3,2])):(this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null]);case 1:return o=a.sent(),n.indexOf("#")>-1&&mm.replaceHash(n),[2,o];case 2:return this.config.auth.navigateToLoginRequestUrl?[3,3]:[2,this.handleHash(t)];case 3:return mm.isInIframe()?[3,7]:(this.browserStorage.setTemporaryCache(Mg.URL_HASH,t,!0),n&&"null"!==n?[3,5]:(s=mm.getHomepage(),this.browserStorage.setTemporaryCache(Mg.ORIGIN_URI,s,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),[4,mm.navigateWindow(s,this.config.system.redirectNavigationTimeout,this.logger,!0)]));case 4:return a.sent(),[3,7];case 5:return[4,mm.navigateWindow(n,this.config.system.redirectNavigationTimeout,this.logger,!0)];case 6:a.sent(),a.label=7;case 7:return[2,null]}}))}))},e.prototype.getRedirectResponseHash=function(e){var t=eg.hashContainsKnownProperties(e),n=this.browserStorage.getTemporaryCache(Mg.URL_HASH,!0);this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Mg.URL_HASH));var r=t?e:n;if(r){var i=eg.getDeserializedHash(r);return ym.extractBrowserRequestState(this.browserCrypto,i.state).interactionType!==Ng.Redirect?null:(mm.clearHash(),r)}var o=ym.parseServerResponseFromHash(e);return this.browserStorage.cleanRequest(o.state),null},e.prototype.handleHash=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return ap(this,(function(c){switch(c.label){case 0:t=this.browserStorage.getTemporaryCache(Mg.REQUEST_PARAMS,!0),n=JSON.parse(this.browserCrypto.base64Decode(t)),r=this.initializeServerTelemetryManager(Ug.handleRedirectPromise,n.correlationId),i=ym.parseServerResponseFromHash(e),c.label=1;case 1:return c.trys.push([1,4,,5]),o=this.browserStorage.getCachedAuthority(i.state),[4,this.createAuthCodeClient(r,o)];case 2:return s=c.sent(),[4,new vm(s,this.browserStorage,this.browserCrypto).handleCodeResponse(e,this.config.auth.clientId)];case 3:return[2,c.sent()];case 4:throw a=c.sent(),r.cacheFailedRequest(a),this.browserStorage.cleanRequest(i.state),a;case 5:return[2]}}))}))},e.prototype.acquireTokenRedirect=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,c,u;return ap(this,(function(l){switch(l.label){case 0:this.preflightBrowserEnvironmentCheck(Ng.Redirect),t=this.getAllAccounts().length>0,this.emitEvent(t?Jg.ACQUIRE_TOKEN_START:Jg.LOGIN_START,Ng.Redirect,e),n=this.preflightInteractiveRequest(e,Ng.Redirect),r=this.initializeServerTelemetryManager(Ug.acquireTokenRedirect,n.correlationId),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,this.initializeAuthorizationCodeRequest(n)];case 2:return i=l.sent(),[4,this.createAuthCodeClient(r,n.authority)];case 3:return o=l.sent(),s=new vm(o,this.browserStorage,this.browserCrypto),[4,o.getAuthCodeUrl(n)];case 4:return a=l.sent(),c=e&&e.redirectStartPage||window.location.href,[2,s.initiateAuthRequest(a,i,this.config.system.redirectNavigationTimeout,c)];case 5:throw u=l.sent(),this.emitEvent(t?Jg.ACQUIRE_TOKEN_FAILURE:Jg.LOGIN_FAILURE,Ng.Redirect,null,u),r.cacheFailedRequest(u),this.browserStorage.cleanRequest(n.state),u;case 6:return[2]}}))}))},e.prototype.acquireTokenPopup=function(e){try{this.preflightBrowserEnvironmentCheck(Ng.Popup)}catch(n){return Promise.reject(n)}if(this.config.system.asyncPopups)return this.acquireTokenPopupAsync(e);var t=wm.openSizedPopup();return this.acquireTokenPopupAsync(e,t)},e.prototype.acquireTokenPopupAsync=function(e,t){return sp(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l,h,d,f;return ap(this,(function(p){switch(p.label){case 0:n=this.getAllAccounts(),this.emitEvent(n.length>0?Jg.ACQUIRE_TOKEN_START:Jg.LOGIN_START,Ng.Popup,e),r=this.preflightInteractiveRequest(e,Ng.Popup),i=this.initializeServerTelemetryManager(Ug.acquireTokenPopup,r.correlationId),p.label=1;case 1:return p.trys.push([1,7,,8]),[4,this.initializeAuthorizationCodeRequest(r)];case 2:return o=p.sent(),[4,this.createAuthCodeClient(i,r.authority)];case 3:return[4,(s=p.sent()).getAuthCodeUrl(r)];case 4:return a=p.sent(),c=new wm(s,this.browserStorage),u=c.initiateAuthRequest(a,o,t),[4,c.monitorPopupForHash(u,this.config.system.windowHashTimeout)];case 5:return l=p.sent(),mg.removeThrottle(this.browserStorage,this.config.auth.clientId,o.authority,o.scopes),[4,c.handleCodeResponse(l)];case 6:return h=p.sent(),d=n.length<this.getAllAccounts().length,this.emitEvent(d?Jg.LOGIN_SUCCESS:Jg.ACQUIRE_TOKEN_SUCCESS,Ng.Popup,h),[2,h];case 7:throw f=p.sent(),this.emitEvent(n.length>0?Jg.ACQUIRE_TOKEN_FAILURE:Jg.LOGIN_FAILURE,Ng.Popup,null,f),i.cacheFailedRequest(f),this.browserStorage.cleanRequest(r.state),f;case 8:return[2]}}))}))},e.prototype.ssoSilent=function(e){return sp(this,void 0,void 0,(function(){var t,n;return ap(this,(function(r){switch(r.label){case 0:this.preflightBrowserEnvironmentCheck(Ng.Silent),this.emitEvent(Jg.SSO_SILENT_START,Ng.Silent,e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.acquireTokenByIframe(e)];case 2:return t=r.sent(),this.emitEvent(Jg.SSO_SILENT_SUCCESS,Ng.Silent,t),[2,t];case 3:throw n=r.sent(),this.emitEvent(Jg.SSO_SILENT_FAILURE,Ng.Silent,null,n),n;case 4:return[2]}}))}))},e.prototype.acquireTokenByIframe=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i,o,s;return ap(this,(function(a){switch(a.label){case 0:if(_p.isEmpty(e.loginHint)&&_p.isEmpty(e.sid)&&(!e.account||_p.isEmpty(e.account.username)))throw rm.createSilentSSOInsufficientInfoError();if(e.prompt&&e.prompt!==Np.NONE)throw rm.createSilentPromptValueError(e.prompt);t=this.initializeAuthorizationRequest(op(op({},e),{prompt:Np.NONE}),Ng.Silent),n=this.initializeServerTelemetryManager(Ug.ssoSilent,t.correlationId),a.label=1;case 1:return a.trys.push([1,6,,7]),[4,this.initializeAuthorizationCodeRequest(t)];case 2:return r=a.sent(),[4,this.createAuthCodeClient(n,t.authority)];case 3:return[4,(i=a.sent()).getAuthCodeUrl(t)];case 4:return o=a.sent(),[4,this.silentTokenHelper(o,r,i)];case 5:return[2,a.sent()];case 6:throw s=a.sent(),n.cacheFailedRequest(s),this.browserStorage.cleanRequest(t.state),s;case 7:return[2]}}))}))},e.prototype.acquireTokenByRefreshToken=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i,o;return ap(this,(function(s){switch(s.label){case 0:this.emitEvent(Jg.ACQUIRE_TOKEN_NETWORK_START,Ng.Silent,e),mm.blockReloadInHiddenIframes(),t=op(op({},e),this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(Ug.acquireTokenSilent_silentFlow,t.correlationId),s.label=1;case 1:return s.trys.push([1,4,,7]),[4,this.createRefreshTokenClient(n,t.authority)];case 2:return[4,s.sent().acquireTokenByRefreshToken(t)];case 3:return[2,s.sent()];case 4:return r=s.sent(),n.cacheFailedRequest(r),i=r instanceof Og,o="invalid_grant"===r.errorCode,r instanceof gg&&o&&!i?[4,this.acquireTokenByIframe(e)]:[3,6];case 5:return[2,s.sent()];case 6:throw r;case 7:return[2]}}))}))},e.prototype.silentTokenHelper=function(e,t,n){return sp(this,void 0,void 0,(function(){var r,i,o;return ap(this,(function(s){switch(s.label){case 0:return[4,(r=new _m(n,this.browserStorage,this.config.system.loadFrameTimeout)).initiateAuthRequest(e,t)];case 1:return i=s.sent(),[4,r.monitorIframeForHash(i,this.config.system.iframeHashTimeout)];case 2:return o=s.sent(),[2,r.handleCodeResponse(o)]}}))}))},e.prototype.logout=function(e){return sp(this,void 0,void 0,(function(){var t,n,r,i;return ap(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.preflightBrowserEnvironmentCheck(Ng.Silent),this.emitEvent(Jg.LOGOUT_START,Ng.Redirect,e),t=this.initializeLogoutRequest(e),[4,this.createAuthCodeClient(null,t&&t.authority)];case 1:return n=o.sent(),r=n.getLogoutUri(t),this.emitEvent(Jg.LOGOUT_SUCCESS,Ng.Redirect,t),[2,mm.navigateWindow(r,this.config.system.redirectNavigationTimeout,this.logger)];case 2:throw i=o.sent(),this.emitEvent(Jg.LOGOUT_FAILURE,Ng.Redirect,null,i),i;case 3:return[2]}}))}))},e.prototype.getAllAccounts=function(){return this.isBrowserEnvironment?this.browserStorage.getAllAccounts():[]},e.prototype.getAccountByUsername=function(e){var t=this.getAllAccounts();return!_p.isEmpty(e)&&t&&t.length&&t.filter((function(t){return t.username.toLowerCase()===e.toLowerCase()}))[0]||null},e.prototype.getAccountByHomeId=function(e){var t=this.getAllAccounts();return!_p.isEmpty(e)&&t&&t.length&&t.filter((function(t){return t.homeAccountId===e}))[0]||null},e.prototype.getAccountByLocalId=function(e){var t=this.getAllAccounts();return!_p.isEmpty(e)&&t&&t.length&&t.filter((function(t){return t.localAccountId===e}))[0]||null},e.prototype.getRedirectUri=function(e){return e||this.config.auth.redirectUri||mm.getCurrentUri()},e.prototype.getPostLogoutRedirectUri=function(e){return e||this.config.auth.postLogoutRedirectUri||mm.getCurrentUri()},e.prototype.getDiscoveredDefaultAuthority=function(){return sp(this,void 0,void 0,(function(){var e;return ap(this,(function(t){switch(t.label){case 0:return this.defaultAuthority?[3,2]:(e=this,[4,Bg.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.config.auth.protocolMode)]);case 1:e.defaultAuthority=t.sent(),t.label=2;case 2:return[2,this.defaultAuthority]}}))}))},e.prototype.interactionInProgress=function(){return this.browserStorage.getTemporaryCache(Wg,!0)===$g},e.prototype.createAuthCodeClient=function(e,t){return sp(this,void 0,void 0,(function(){var n;return ap(this,(function(r){switch(r.label){case 0:return[4,this.getClientConfiguration(e,t)];case 1:return n=r.sent(),[2,new Vg(n)]}}))}))},e.prototype.createSilentFlowClient=function(e,t){return sp(this,void 0,void 0,(function(){var n;return ap(this,(function(r){switch(r.label){case 0:return[4,this.getClientConfiguration(e,t)];case 1:return n=r.sent(),[2,new qg(n)]}}))}))},e.prototype.createRefreshTokenClient=function(e,t){return sp(this,void 0,void 0,(function(){var n;return ap(this,(function(r){switch(r.label){case 0:return[4,this.getClientConfiguration(e,t)];case 1:return n=r.sent(),[2,new Hg(n)]}}))}))},e.prototype.getClientConfiguration=function(e,t){return sp(this,void 0,void 0,(function(){var n;return ap(this,(function(r){switch(r.label){case 0:return _p.isEmpty(t)||t===this.config.auth.authority?[3,2]:[4,Bg.createDiscoveredInstance(t,this.config.system.networkClient,this.config.auth.protocolMode)];case 1:return n=r.sent(),[3,4];case 2:return[4,this.getDiscoveredDefaultAuthority()];case 3:n=r.sent(),r.label=4;case 4:return[2,{authOptions:{clientId:this.config.auth.clientId,authority:n,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,clientCapabilities:this.config.auth.clientCapabilities,protocolMode:this.config.auth.protocolMode},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds},loggerOptions:{loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:"msal.js.browser",version:"2.6.0",cpu:"",os:""}}]}}))}))},e.prototype.preflightInteractiveRequest=function(e,t){if(mm.blockReloadInHiddenIframes(),this.interactionInProgress())throw rm.createInteractionInProgressError();return this.initializeAuthorizationRequest(e,t)},e.prototype.preflightBrowserEnvironmentCheck=function(e){if(mm.blockNonBrowserEnvironment(this.isBrowserEnvironment),mm.blockReloadInHiddenIframes(),e===Ng.Redirect&&this.config.cache.cacheLocation===kg.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw lm.createInMemoryRedirectUnavailableError()},e.prototype.initializeBaseRequest=function(e){var t=op({},e);return _p.isEmpty(t.authority)&&(t.authority=this.config.auth.authority),t.correlationId=e&&e.correlationId||this.browserCrypto.createNewGuid(),t},e.prototype.initializeServerTelemetryManager=function(e,t,n){return new Kg({clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1},this.browserStorage)},e.prototype.setDefaultScopes=function(e){return op(op({},e),{scopes:up(e&&e.scopes||[])})},e.prototype.initializeAuthorizationRequest=function(e,t){var n=op(op({},e),this.setDefaultScopes(e));if(n.redirectUri=this.getRedirectUri(n.redirectUri),_p.isEmpty(n.loginHint)){var r=this.browserStorage.getTemporaryCache(Sp.ADAL_ID_TOKEN);if(!_p.isEmpty(r)){var i=new _g(r,this.browserCrypto);this.browserStorage.removeItem(Sp.ADAL_ID_TOKEN),i.claims&&i.claims.upn&&(n.loginHint=i.claims.upn)}}return n.state=Pg.setRequestState(this.browserCrypto,e&&e.state||"",{interactionType:t}),_p.isEmpty(n.nonce)&&(n.nonce=this.browserCrypto.createNewGuid()),n.responseMode=Dp.FRAGMENT,n=op(op({},n),this.initializeBaseRequest(n)),this.browserStorage.updateCacheEntries(n.state,n.nonce,n.authority),n},e.prototype.initializeAuthorizationCodeRequest=function(e){return sp(this,void 0,void 0,(function(){var t,n;return ap(this,(function(r){switch(r.label){case 0:return[4,this.browserCrypto.generatePkceCodes()];case 1:return t=r.sent(),n=op(op({},e),{redirectUri:e.redirectUri,code:"",codeVerifier:t.verifier}),e.codeChallenge=t.challenge,e.codeChallengeMethod="S256",[2,n]}}))}))},e.prototype.initializeLogoutRequest=function(e){var t=op({},e);return _p.isEmpty(t.authority)&&(t.authority=this.config.auth.authority),t.correlationId=t&&t.correlationId||this.browserCrypto.createNewGuid(),t.postLogoutRedirectUri=this.getPostLogoutRedirectUri(e?e.postLogoutRedirectUri:""),t},e.prototype.emitEvent=function(e,t,n,r){var i=this;if(this.isBrowserEnvironment){var o={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};this.logger.info("Emitting event: "+e),this.eventCallbacks.forEach((function(t,n){i.logger.verbose("Emitting event to callback "+n+": "+e),t.apply(null,[o])}))}},e.prototype.addEventCallback=function(e){if(this.isBrowserEnvironment){var t=this.browserCrypto.createNewGuid();return this.eventCallbacks.set(t,e),this.logger.verbose("Event callback registered with id: "+t),t}return null},e.prototype.removeEventCallback=function(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback "+e+" removed.")},e.prototype.getLogger=function(){return this.logger},e.prototype.setLogger=function(e){this.logger=e},e}());class Sm{constructor({username:e,accessToken:t,expiresOn:n}){this.username=e,this.accessToken=t,this.expiresOn=n}isValid(){return Date.now()<this.expiresOn}}let Em=(()=>{class e{constructor(){console.log("[AuthService.constructor]: initialising msal client");const e={auth:{clientId:"bd058f85-2ba7-47fe-bc12-1f8061beacbc",redirectUri:"https://d3nn161xdywwor.cloudfront.net"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}};this.request={scopes:["user.read"]},this.msalClient=new Cm(e)}init(){return Cf(this,void 0,void 0,(function*(){const e=yield this.msalClient.handleRedirectPromise();if(null==e?void 0:e.account.username)return console.log("[AuthService.init]: User is coming from microsoft login page"),!0;{const e=this.msalClient.getAllAccounts();if(null===e||0===e.length)return console.log("[AuthService.init]: User is not logged in"),!1;if(e.length>1)throw console.error("[AuthService.init]: Multiple accounts are logged in"),new Error("Multiple accounts are logged in");if(1===e.length)return console.log("[AuthService.init]: User is already logged in"),!0}}))}isLoggedIn(){return Cf(this,void 0,void 0,(function*(){return""!==(yield this.getAccessToken(df))}))}getUsername(){const e=this.msalClient.getAllAccounts();let t=null;return 1===(null==e?void 0:e.length)?t=e[0].username:e&&e.length>1&&console.error("[AuthService.getUsername]: Multiple users logged in"),t}login(e){e&&(this.request.scopes=e);try{console.log("[AuthService.login]: Redirecting to MS login page"),this.msalClient.loginRedirect(this.request)}catch(t){throw console.error("[AuthService.getUsername]: Failed to redirect to microsoft login page "+t),new Error("Failed to redirect to microsoft login page")}}getAccessToken(e){return Cf(this,void 0,void 0,(function*(){console.log("[AuthService.getAccessToken]: getting access token");const t=yield this.getAccessTokenWithExpiry(e);return(null==t?void 0:t.accessToken)||""}))}getAccessTokenWithExpiry(e){return Cf(this,void 0,void 0,(function*(){this.request.account=this.msalClient.getAccountByUsername(this.getUsername()),e&&(this.request.scopes=e);try{console.log("[AuthService.getAccessTokenWithExpiry]: getting the access token silently from msalClient");const e=yield this.msalClient.acquireTokenSilent(this.request);return(null==e?void 0:e.accessToken)?new Sm({username:this.getUsername(),accessToken:e.accessToken,expiresOn:new Date(e.expiresOn).getTime()}):(console.log("[AuthService.getAccessTokenWithExpiry]: msalClient.acquireTokenSilent returns null"),null)}catch(t){return t instanceof Og&&(console.warn("`[AuthService.getAccessTokenWithExpiry]: Silent token acquisition failed; acquiring token using redirect"),this.msalClient.acquireTokenRedirect(this.request)),console.log("[AuthService.getAccessTokenWithExpiry]: msalClient.acquireTokenSilent throws error"),null}}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Tm=(()=>{class e{constructor(e,t){this.document=e,this.msTeams=t,this.window=this.document.defaultView}getUsername(){return this.authState.username}resetAuthState(){console.log("[TeamsAuthService.resetAuthState]"),this.authState=null,localStorage.clear(),this.window.location.reload()}getAccessTokenWithExpiry(e){return console.log("[TeamsAuthService.getAccessTokenWithExpiry]: opening auth page"),new Promise((e,t)=>{this.msTeams.authentication.authenticate({url:window.location.origin+"/#/teamsauthpopup",width:600,height:535,successCallback:t=>{const{username:n,accessToken:r,expiresOn:i}=JSON.parse(t);this.authState=new Sm({username:n,accessToken:r,expiresOn:i}),e(this.authState)},failureCallback:e=>{t(e)}})})}}return e.\u0275fac=function(t){return new(t||e)(We(Ic),We(ff))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Am=(()=>{class e{constructor(e,t){this.authService=e,this.teamsAuthService=t,this.speedDialContacts1=[],this.speedDialContacts2=[],this.contactsUpdated=new S,console.log("[ContactService.constructor]: intialising MicrosoftGraphClient"),this.setAuthProviderForTeams()}get speedDialContactIds(){return[...this.speedDialContacts1,...this.speedDialContacts2]}set speedDialContactIds(e){const t=[...e],n=t.splice(0,10);this.speedDialContacts1=n,this.speedDialContacts2=t}get contactsUpdatedObserver(){return this.contactsUpdated.asObservable()}setAuthProviderForTeams(e=!1){return Cf(this,void 0,void 0,(function*(){return console.log("[ContactService.setAuthProviderForTeams]: intialising MicrosoftGraphClient with forTeams: "+e),this.tokenProvider=e?this.teamsAuthService:this.authService,new Promise((e,t)=>{let n=this.teamsAuthService.authState;this.msGraphClient=ep.init({authProvider:r=>Cf(this,void 0,void 0,(function*(){if(n)n.isValid()||(console.log("[ContactService]: token is exprired, obtaining token silently"),n=yield this.authService.getAccessTokenWithExpiry(df));else{console.log("[ContactService]: User is coming from login page, open login popup");try{n=yield this.tokenProvider.getAccessTokenWithExpiry(df)}catch(i){t("Failed to get acess token"+i)}}this.teamsAuthService.authState=n,(null==n?void 0:n.accessToken)?(r(null,n.accessToken),e()):(r("Failed to get acess token",""),t("Failed to get acess token"))}))})})}))}getContact(e){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.getContact]: id: "+e);try{const t=yield this.msGraphClient.api("/users/"+e).get();return new np(t)}catch(t){throw console.error("[ContactService.getContact]: Failed to get contact "+t.body),JSON.parse(t.body)}}))}getContactBatch(e){return Cf(this,void 0,void 0,(function*(){if(console.log("[ContactService.getContactBatch]: ids: "+e),0===e.length)return[];const t={requests:e.map((e,t)=>({url:"/users/"+e,method:"GET",id:t+1}))};try{return(yield this.msGraphClient.api("/$batch").post(t)).responses.filter(e=>200===e.status).map(e=>e.body).map(e=>new np(e))}catch(n){throw console.error("[ContactService.getContactBatch]: Failed to get contacts "+n.body),JSON.parse(n.body)}}))}getContacts(e=""){return Cf(this,void 0,void 0,(function*(){if(console.log("[ContactService.getContacts]: contactName: "+e),""===e)return[];const t=`startsWith(givenName,'${e}') or startsWith(surName,'${e}') or startsWith(displayName,'${e}')`,n={requests:[{url:"/users?$count=true&$top=5&$filter="+t,method:"GET",id:"1"},{url:"/me/contacts?$count=true&$top=5&$filter="+t,method:"GET",id:"2"}]};try{return(yield this.msGraphClient.api("/$batch").post(n)).responses.filter(e=>200===e.status).map(e=>e.body.value).flat().map(e=>new np(e))}catch(r){throw console.error("[ContactService.getContacts]: Failed to fetch users "+r.body),JSON.parse(r.body)}}))}getPersonalContacts(){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.getPersonalContacts]:");try{return(yield this.msGraphClient.api("/me/contacts?$top=500").get()).value.map(e=>new np(e))}catch(e){throw console.error("[ContactService.getPersonalContacts]: Failed to fetch personal contacts "+e.body),JSON.parse(e.body)}}))}getContactPhoto(e){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.getContactPhoto]: id: "+e);try{const t=yield this.msGraphClient.api(`/users/${e}/photo/$value`).get(),n=URL.createObjectURL(t);return{id:e,photo:`url(${n})`}}catch(t){return console.log("[ContactService.getContactPhoto]: Failed to get contact photo "+t.body),{id:e,photo:""}}}))}getContactPhones(e){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.getContactPhoneNumber]: id: "+e);try{const t=yield this.msGraphClient.api(`/users/${e}/profile/phones`).version("beta").select("number,type").get();return{id:e,allPhones:t.value}}catch(t){return console.log("[ContactService.getContactPhoneNumber]: Failed to get contact phone numbers "+t.body),{id:e,allPhones:[]}}}))}getContactPhotoBatch(e){return Cf(this,void 0,void 0,(function*(){if(console.log("[ContactService.getContactPhotoBatch]: ids: "+e),0===e.length)return[];const t={requests:e.map((e,t)=>({url:`/users/${e}/photo/$value`,method:"GET",id:e}))};try{return(yield this.msGraphClient.api("/$batch").post(t)).responses.filter(e=>200===e.status).map(e=>({id:e.id,photo:"data:image/jpeg;base64,"+e.body}))}catch(n){throw console.error("[ContactService.getContactBatch]: Failed to get contacts "+n.body),JSON.parse(n.body)}}))}getSpeedDialContactIdsListOne(){return Cf(this,void 0,void 0,(function*(){return yield this.getSpeedDialContactIdsList("first")}))}getSpeedDialContactIdsListTwo(){return Cf(this,void 0,void 0,(function*(){return yield this.getSpeedDialContactIdsList("second")}))}getSpeedDialContactIdsList(e){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.getSpeedDialContactIdsList]: getting speed dial contacts list type : "+e);try{const t=yield this.msGraphClient.api("/me/extensions/mitel-speeddial-contacts-"+e).get();return"first"===e?this.speedDialContacts1=t.contacts:this.speedDialContacts2=t.contacts,t.contacts}catch(t){if("ResourceNotFound"!==JSON.parse(t.body).code)throw console.error("[ContactService.getSpeedDialContactIdsList]: Failed to fetch contacts in speed dial list  "+t.body),JSON.parse(t.body);const n={"@odata.type":"microsoft.graph.openTypeExtension",extensionName:"mitel-speeddial-contacts-"+e,contacts:[]};try{return yield this.msGraphClient.api("/me/extensions").post(n),[]}catch(t){throw console.error("[ContactService.getSpeedDialContactIdsList]: Failed to create dial list open extention speed dial list  "+t.body),JSON.parse(t.body)}}}))}upadateSpeedDialContactsListOne(e){return Cf(this,void 0,void 0,(function*(){return yield this.upadateSpeedDialContacts("first",e)}))}upadateSpeedDialContactsListTwo(e){return Cf(this,void 0,void 0,(function*(){return yield this.upadateSpeedDialContacts("second",e)}))}upadateSpeedDialContacts(e,t){return Cf(this,void 0,void 0,(function*(){console.log(`[ContactService.upadateSpeedDialContacts]: list type: ${e}, contactIds: ${JSON.stringify(t)}`);const n={contacts:t=t.map(e=>({i:e.i,n:e.n.trim().substr(-4)}))};try{yield this.msGraphClient.api("/me/extensions/mitel-speeddial-contacts-"+e).update(n)}catch(r){throw console.error("[ContactService.upadateSpeedDialContactsListOne]: Failed to update contacts in speed dial list  "+r.body),JSON.parse(r.body)}}))}deleteOldSpeedDialContacts(){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.deleteSpeedDialContacts]");try{yield this.msGraphClient.api("/me/extensions/mitel-speeddial-contacts").delete()}catch(e){throw console.error("[ContactService.deleteOldSpeedDialContacts]: Failed to update contacts in speed dial list  "+e.body),JSON.parse(e.body)}}))}addContact(e){return Cf(this,void 0,void 0,(function*(){if(console.log("[ContactService.addContact]: contact: "+JSON.stringify(e)),this.speedDialContactIds.some(t=>e.id===t.i))return;const t=[...this.speedDialContactIds,{i:e.id,n:e.selectedPhoneNumber}];try{yield this.updateSpeedDialContacts(t),this.contactsUpdated.next({operation:tp.Add,contactDetails:e})}catch(n){throw console.error("[ContactService.addContact]: Failed to add contact in speed dial list "+n.body),n}}))}updateContact(e){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.deleteContact]: contact: "+JSON.stringify(e));try{const t=[...this.speedDialContactIds];t.find(t=>e.id===t.i).n=e.selectedPhoneNumber,yield this.updateSpeedDialContacts(t)}catch(t){throw console.error("[ContactService.updateContact]: Failed to update contact in speed dial list "+t.body),t}}))}deleteContact(e){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.deleteContact]: contact: "+JSON.stringify(e));try{const t=[...this.speedDialContactIds].filter(t=>t.i!==e.id);yield this.updateSpeedDialContacts(t),this.contactsUpdated.next({operation:tp.Delete,contactDetails:e})}catch(t){throw console.error("[ContactService.deleteContact]: Failed to delete contact in speed dial list "+t.body),t}}))}updateSpeedDialContacts(e){return Cf(this,void 0,void 0,(function*(){const t=e.splice(0,10);yield this.upadateSpeedDialContactsListOne(t),this.speedDialContacts1=t,yield this.upadateSpeedDialContactsListTwo(e),this.speedDialContacts2=e}))}getMyDetails(){return Cf(this,void 0,void 0,(function*(){console.log("[ContactService.getMyDetails]");try{return yield this.msGraphClient.api("me").get()}catch(e){throw console.error("[ContactService.getMyDetails]: Failed to get my details "+e.body),JSON.parse(e.body)}}))}getConversationMembers(e){return Cf(this,void 0,void 0,(function*(){try{return(yield this.msGraphClient.api(`me/chats/${e}/members`).version("beta").get()).value}catch(t){throw console.error("[ContactService.getConversation]: Failed to get my details "+t.body),JSON.parse(t.body)}}))}}return e.\u0275fac=function(t){return new(t||e)(We(Em),We(Tm))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Im(e){return!!e&&(e instanceof v||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function Om(...e){if(1===e.length){const t=e[0];if(c(t))return xm(t,null);if(u(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return xm(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return xm(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(A(e=>t(...e)))}return xm(e,null)}function xm(e,t){return new v(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const c=D(e[a]);let u=!1;n.add(c.subscribe({next:e=>{u||(u=!0,s++),i[a]=e},error:e=>n.error(e),complete:()=>{o++,o!==r&&u||(s===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}class Pm extends h{constructor(e,t){super()}schedule(e,t=0){return this}}class km extends Pm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class Rm extends km{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let Mm=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class Um extends Mm{constructor(e,t=Mm.now){super(e,()=>Um.delegate&&Um.delegate!==this?Um.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Um.delegate&&Um.delegate!==this?Um.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class Nm extends Um{}const Dm=new Nm(Rm);let Lm=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Nu(this.value);case"E":return e=this.error,new v(t=>t.error(e));case"C":return Gu()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class jm extends p{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(jm.dispatch,this.delay,new Fm(e,this.destination)))}_next(e){this.scheduleMessage(Lm.createNext(e))}_error(e){this.scheduleMessage(Lm.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Lm.createComplete()),this.unsubscribe()}}class Fm{constructor(e,t){this.notification=e,this.destination=t}}class Vm extends S{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Hm(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new w;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(e),o=new _(this,e)),r&&e.add(e=new jm(e,r)),t)for(let s=0;s<i&&!e.closed;s++)e.next(n[s]);else for(let s=0;s<i&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||Dm).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r}}class Hm{constructor(e,t){this.time=e,this.value=t}}function qm(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,c=!1;return function(u){let l;s++,!i||a?(a=!1,i=new Vm(e,t,r),l=i.subscribe(this),o=u.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){c=!0,o=void 0,i.complete()}})):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),o&&!c&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}class Bm{}let zm=(()=>{class e extends Bm{getTranslation(e){return Nu({})}}return e.\u0275fac=function(t){return Gm(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const Gm=ur(zm);class Km{}let Wm=(()=>{class e{handle(e){return e.key}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();function $m(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;let n,r,i,o=typeof e;if(o==typeof t&&"object"==o){if(!Array.isArray(e)){if(Array.isArray(t))return!1;for(r in i=Object.create(null),e){if(!$m(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&void 0!==t[r])return!1;return!0}if(!Array.isArray(t))return!1;if((n=e.length)==t.length){for(r=0;r<n;r++)if(!$m(e[r],t[r]))return!1;return!0}}return!1}function Jm(e){return null!=e}function Ym(e){return e&&"object"==typeof e&&!Array.isArray(e)}class Qm{}let Zm=(()=>{class e extends Qm{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(e,t){let n;return n="string"==typeof e?this.interpolateString(e,t):"function"==typeof e?this.interpolateFunction(e,t):e,n}getValue(e,t){let n="string"==typeof t?t.split("."):[t];t="";do{t+=n.shift(),!Jm(e)||!Jm(e[t])||"object"!=typeof e[t]&&n.length?n.length?t+=".":e=void 0:(e=e[t],t="")}while(n.length);return e}interpolateFunction(e,t){return e(t)}interpolateString(e,t){return t?e.replace(this.templateMatcher,(e,n)=>{let r=this.getValue(t,n);return Jm(r)?r:e}):e}}return e.\u0275fac=function(t){return Xm(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const Xm=ur(Zm);class ey{}let ty=(()=>{class e extends ey{compile(e,t){return e}compileTranslations(e,t){return e}}return e.\u0275fac=function(t){return ny(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const ny=ur(ty);class ry{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new ma,this.onLangChange=new ma,this.onDefaultLangChange=new ma}}const iy=new De("USE_STORE"),oy=new De("USE_DEFAULT_LANG"),sy=new De("DEFAULT_LANGUAGE"),ay=new De("USE_EXTEND");let cy=(()=>{class e{constructor(e,t,n,r,i,o=!0,s=!1,a=!1,c){this.store=e,this.currentLoader=t,this.compiler=n,this.parser=r,this.missingTranslationHandler=i,this.useDefaultLang=o,this.isolate=s,this.extend=a,this.pending=!1,this._onTranslationChange=new ma,this._onLangChange=new ma,this._onDefaultLangChange=new ma,this._langs=[],this._translations={},this._translationRequests={},c&&this.setDefaultLang(c)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}setDefaultLang(e){if(e===this.defaultLang)return;let t=this.retrieveTranslations(e);void 0!==t?(null==this.defaultLang&&(this.defaultLang=e),t.pipe(hl(1)).subscribe(t=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return Nu(this.translations[e]);let t=this.retrieveTranslations(e);return void 0!==t?(this.currentLang||(this.currentLang=e),t.pipe(hl(1)).subscribe(t=>{this.changeLang(e)}),t):(this.changeLang(e),Nu(this.translations[e]))}retrieveTranslations(e){let t;return(void 0===this.translations[e]||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),t=this._translationRequests[e]),t}getTranslation(e){this.pending=!0;const t=this.currentLoader.getTranslation(e).pipe(qm(1),hl(1));return this.loadingTranslations=t.pipe(A(t=>this.compiler.compileTranslations(t,e)),qm(1),hl(1)),this.loadingTranslations.subscribe({next:t=>{this.translations[e]=this.extend&&this.translations[e]?Object.assign(Object.assign({},t),this.translations[e]):t,this.updateLangs(),this.pending=!1},error:e=>{this.pending=!1}}),t}setTranslation(e,t,n=!1){t=this.compiler.compileTranslations(t,e),this.translations[e]=(n||this.extend)&&this.translations[e]?function e(t,n){let r=Object.assign({},t);return Ym(t)&&Ym(n)&&Object.keys(n).forEach(i=>{Ym(n[i])?i in t?r[i]=e(t[i],n[i]):Object.assign(r,{[i]:n[i]}):Object.assign(r,{[i]:n[i]})}),r}(this.translations[e],t):t,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(e=>{-1===this.langs.indexOf(e)&&this.langs.push(e)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,t,n){let r;if(t instanceof Array){let r={},i=!1;for(let o of t)r[o]=this.getParsedResult(e,o,n),Im(r[o])&&(i=!0);return i?Om(t.map(e=>Im(r[e])?r[e]:Nu(r[e]))).pipe(A(e=>{let n={};return e.forEach((e,r)=>{n[t[r]]=e}),n})):r}if(e&&(r=this.parser.interpolate(this.parser.getValue(e,t),n)),void 0===r&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],t),n)),void 0===r){let e={key:t,translateService:this};void 0!==n&&(e.interpolateParams=n),r=this.missingTranslationHandler.handle(e)}return void 0!==r?r:t}get(e,t){if(!Jm(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(wl(n=>Im(n=this.getParsedResult(n,e,t))?n:Nu(n)));{let n=this.getParsedResult(this.translations[this.currentLang],e,t);return Im(n)?n:Nu(n)}}getStreamOnTranslationChange(e,t){if(!Jm(e)||!e.length)throw new Error('Parameter "key" required');return pl(Ku(()=>this.get(e,t)),this.onTranslationChange.pipe(cl(n=>{const r=this.getParsedResult(n.translations,e,t);return"function"==typeof r.subscribe?r:Nu(r)})))}stream(e,t){if(!Jm(e)||!e.length)throw new Error('Parameter "key" required');return pl(Ku(()=>this.get(e,t)),this.onLangChange.pipe(cl(n=>{const r=this.getParsedResult(n.translations,e,t);return Im(r)?r:Nu(r)})))}instant(e,t){if(!Jm(e)||!e.length)throw new Error('Parameter "key" required');let n=this.getParsedResult(this.translations[this.currentLang],e,t);if(Im(n)){if(e instanceof Array){let t={};return e.forEach((n,r)=>{t[e[r]]=e[r]}),t}return e}return n}set(e,t,n=this.currentLang){this.translations[n][e]=this.compiler.compile(t,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==e?(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}}return e.\u0275fac=function(t){return new(t||e)(We(ry),We(Bm),We(ey),We(Qm),We(Km),We(oy),We(iy),We(ay),We(sy))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),uy=(()=>{class e{constructor(e,t){this.translate=e,this._ref=t,this.value=""}updateValue(e,t,n){let r=t=>{this.value=void 0!==t?t:e,this.lastKey=e,this._ref.markForCheck()};if(n){let i=this.translate.getParsedResult(n,e,t);Im(i.subscribe)?i.subscribe(r):r(i)}this.translate.get(e,t).subscribe(r)}transform(e,...t){if(!e||!e.length)return e;if($m(e,this.lastKey)&&$m(t,this.lastParams))return this.value;let n;if(Jm(t[0])&&t.length)if("string"==typeof t[0]&&t[0].length){let e=t[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{n=JSON.parse(e)}catch(r){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+t[0])}}else"object"!=typeof t[0]||Array.isArray(t[0])||(n=t[0]);return this.lastKey=e,this.lastParams=t,this.updateValue(e,n),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(t=>{this.lastKey&&t.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,n,t.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(t=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,n,t.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,n))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return e.\u0275fac=function(t){return new(t||e)(No(cy),function(e=oe.Default){const t=Qi(!0);if(null!=t||e&oe.Optional)return t;Nt("ChangeDetectorRef")}())},e.\u0275pipe=yt({name:"translate",type:e,pure:!1}),e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),ly=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[t.loader||{provide:Bm,useClass:zm},t.compiler||{provide:ey,useClass:ty},t.parser||{provide:Qm,useClass:Zm},t.missingTranslationHandler||{provide:Km,useClass:Wm},ry,{provide:iy,useValue:t.isolate},{provide:oy,useValue:t.useDefaultLang},{provide:ay,useValue:t.extend},{provide:sy,useValue:t.defaultLanguage},cy]}}static forChild(t={}){return{ngModule:e,providers:[t.loader||{provide:Bm,useClass:zm},t.compiler||{provide:ey,useClass:ty},t.parser||{provide:Qm,useClass:Zm},t.missingTranslationHandler||{provide:Km,useClass:Wm},{provide:iy,useValue:t.isolate},{provide:oy,useValue:t.useDefaultLang},{provide:ay,useValue:t.extend},{provide:sy,useValue:t.defaultLanguage},cy]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)}}),e})();const hy=new De("NgValueAccessor"),dy={provide:hy,useExisting:_e(()=>fy),multi:!0};let fy=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(No(Rs),No(Os))},e.\u0275dir=mt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[Es([dy])]}),e})();const py={provide:hy,useExisting:_e(()=>my),multi:!0},gy=new De("CompositionEventMode");let my=(()=>{class e{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Ac()?Ac().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(No(Rs),No(Os),No(gy,8))},e.\u0275dir=mt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Ko("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[Es([py])]}),e})(),yy=(()=>{class e{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=mt({type:e}),e})();class vy extends yy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}let by=(()=>{class e extends class{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(No(vy,2))},e.\u0275dir=mt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&ts("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[wo]}),e})();function wy(e){return null==e||0===e.length}function _y(e){return null!=e&&"number"==typeof e.length}const Cy=new De("NgValidators"),Sy=new De("NgAsyncValidators"),Ey=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ty{static min(e){return t=>{if(wy(t.value)||wy(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(wy(t.value)||wy(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return wy(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return wy(e.value)||Ey.test(e.value)?null:{email:!0}}static minLength(e){return t=>wy(t.value)||!_y(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}static maxLength(e){return t=>_y(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}static pattern(e){if(!e)return Ty.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(wy(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Ay);return 0==t.length?null:function(e){return Oy(xy(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(Ay);return 0==t.length?null:function(e){return Om(xy(e,t).map(Iy)).pipe(A(Oy))}}}function Ay(e){return null!=e}function Iy(e){const t=zo(e)?D(e):e;return Go(t),t}function Oy(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function xy(e,t){return t.map(t=>t(e))}function Py(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}const ky={provide:hy,useExisting:_e(()=>Ry),multi:!0};let Ry=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(No(Rs),No(Os))},e.\u0275dir=mt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Es([ky])]}),e})();const My={provide:hy,useExisting:_e(()=>Ny),multi:!0};let Uy=(()=>{class e{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),Ny=(()=>{class e{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(vy),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return e.\u0275fac=function(t){return new(t||e)(No(Rs),No(Os),No(Uy),No(mo))},e.\u0275dir=mt({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Es([My])]}),e})();const Dy={provide:hy,useExisting:_e(()=>Ly),multi:!0};let Ly=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(No(Rs),No(Os))},e.\u0275dir=mt({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Es([Dy])]}),e})();const jy={provide:hy,useExisting:_e(()=>Fy),multi:!0};let Fy=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(No(Rs),No(Os))},e.\u0275dir=mt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Es([jy])]}),e})();const Vy={provide:hy,useExisting:_e(()=>Hy),multi:!0};let Hy=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(No(Rs),No(Os))},e.\u0275dir=mt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Es([Vy])]}),e})();function qy(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function By(e){return null!=e?Ty.compose(Py(e)):null}function zy(e){return null!=e?Ty.composeAsync(Py(e)):null}const Gy=[fy,Ly,Ry,Fy,Hy,Ny],Ky="VALID",Wy="INVALID",$y="PENDING",Jy="DISABLED";function Yy(e){return(ev(e)?e.validators:e)||null}function Qy(e){return Array.isArray(e)?By(e):e||null}function Zy(e,t){return(ev(t)?t.asyncValidators:e)||null}function Xy(e){return Array.isArray(e)?zy(e):e||null}function ev(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class tv{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Qy(this._rawValidators),this._composedAsyncValidatorFn=Xy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ky}get invalid(){return this.status===Wy}get pending(){return this.status==$y}get disabled(){return this.status===Jy}get enabled(){return this.status!==Jy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Qy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Xy(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$y,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jy,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ky,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Ky&&this.status!==$y||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jy:Ky}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$y,this._hasOwnPendingAsyncValidator=!0;const t=Iy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof rv?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof iv&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ma,this.statusChanges=new ma}_calculateStatus(){return this._allControlsDisabled()?Jy:this.errors?Wy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($y)?$y:this._anyControlsHaveStatus(Wy)?Wy:Ky}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ev(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class nv extends tv{constructor(e=null,t,n){super(Yy(t),Zy(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class rv extends tv{constructor(e,t,n){super(Yy(t),Zy(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof nv?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class iv extends tv{constructor(e,t,n){super(Yy(t),Zy(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof nv?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const ov=new De("NgModelWithFormControlWarning"),sv={provide:vy,useExisting:_e(()=>av)};let av=(()=>{class e extends vy{constructor(e,t,n,r){super(),this._ngModelWarningConfig=r,this.update=new ma,this._ngModelWarningSent=!1,this._rawValidators=e||[],this._rawAsyncValidators=t||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t);let n=void 0,r=void 0,i=void 0;return t.forEach(e=>{var t;e.constructor===my?n=e:(t=e,Gy.some(e=>t.constructor===e)?r=e:i=e)}),i||r||n||null}(0,n)}set isDisabled(e){}ngOnChanges(t){var n,r,i,o;this._isControlChanged(t)&&((i=this.form).validator=Ty.compose([i.validator,(o=this).validator]),i.asyncValidator=Ty.composeAsync([i.asyncValidator,o.asyncValidator]),o.valueAccessor.writeValue(i.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&qy(e,t)})}(i,o),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(i,o),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&qy(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(i,o),o.valueAccessor.setDisabledState&&i.registerOnDisabledChange(e=>{o.valueAccessor.setDisabledState(e)}),o._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>i.updateValueAndValidity())}),o._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>i.updateValueAndValidity())}),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(t,this.viewModel)&&(n=e,this,r=this._ngModelWarningConfig,mr()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return By(this._rawValidators)}get asyncValidator(){return zy(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return e.\u0275fac=function(t){return new(t||e)(No(Cy,10),No(Sy,10),No(hy,10),No(ov,8))},e.\u0275dir=mt({type:e,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Es([sv]),wo,Lt]}),e._ngModelWarningSentOnce=!1,e})(),cv=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)}}),e})(),uv=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r=null,i=null,o=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,i=null!=t.asyncValidators?t.asyncValidators:null,o=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,i=null!=t.asyncValidator?t.asyncValidator:null)),new rv(n,{asyncValidators:i,updateOn:o,validators:r})}control(e,t,n){return new nv(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new iv(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof nv||e instanceof rv||e instanceof iv?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),lv=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:ov,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[uv,Uy],imports:[cv]}),e})();const hv=new Um(km);class dv{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new fv(e,this.dueTime,this.scheduler))}}class fv extends p{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(pv,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function pv(e){e.debouncedNext()}class gv{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new mv(e,this.compare,this.keySelector))}}class mv extends p{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}let yv=(()=>{class e{constructor(e){this.elementRef=e}ngAfterViewInit(){setTimeout(()=>{const e=this.elementRef.nativeElement;e.offsetWidth<e.scrollWidth&&(e.title=e.innerHTML)},300)}}return e.\u0275fac=function(t){return new(t||e)(No(Os))},e.\u0275dir=mt({type:e,selectors:[["","tooltip",""]]}),e})(),vv=(()=>{class e{constructor(e){this.elementRef=e}ngAfterViewInit(){this.elementRef.nativeElement.style.background=["#866ebb","#4887bc","#c37996","#48b7cb","#d4b39e","#c6be5a","#80aeb1","#80d9eb","#ee778e","#e1a966","#eb8162","#a09cd4","#7e858b"][Math.floor(12*Math.random())]}}return e.\u0275fac=function(t){return new(t||e)(No(Os))},e.\u0275dir=mt({type:e,selectors:[["","randomColor",""]]}),e})(),bv=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-spinner"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(e,t){1&e&&Vo(0,"div",0)},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px}#app-loader[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{animation:spin 2s linear infinite}.loader[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:10px;height:10px}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),e})();const wv=["textbox"],_v=function(e){return{"background-image":e}};function Cv(e,t){if(1&e&&Vo(0,"img",11),2&e){const e=Jo().$implicit;Do("ngStyle",ha(1,_v,e.photo))}}function Sv(e,t){if(1&e&&(jo(0,"div",12),jo(1,"div",13),ss(2),Fo(),Fo()),2&e){const e=Jo().$implicit;Ur(2),as(e.initials)}}function Ev(e,t){if(1&e){const e=Bo();jo(0,"button",16),Ko("click",(function(t){an(e);const n=Jo(2),r=n.$implicit,i=n.index;return Jo(2).addContact(t,r,i)})),ss(1),pa(2,"translate"),Fo()}2&e&&(Ur(1),cs(" ",ga(2,1,"speed-dial.actions.add")," "))}function Tv(e,t){1&e&&(jo(0,"div",17),Vo(1,"app-spinner"),Fo())}function Av(e,t){if(1&e&&(jo(0,"div"),Uo(1,Ev,3,3,"button",14),Uo(2,Tv,2,0,"div",15),Fo()),2&e){const e=Jo().index,t=Jo(2);Ur(1),Do("ngIf",t.inProgressIndex!==e),Ur(1),Do("ngIf",t.inProgressIndex===e)}}function Iv(e,t){if(1&e){const e=Bo();jo(0,"div",5),Ko("click",(function(){an(e);const n=t.$implicit;return Jo(2).selectContact(n)})),jo(1,"div",6),Uo(2,Cv,1,3,"img",7),Uo(3,Sv,3,1,"div",8),jo(4,"div",9),ss(5),Fo(),Uo(6,Av,3,2,"div",10),Fo(),Fo()}if(2&e){const e=t.$implicit,n=Jo(2);Ur(2),Do("ngIf",e.photo),Ur(1),Do("ngIf",!e.photo),Ur(2),as(e.displayName),Ur(1),Do("ngIf",n.isActionAdd)}}const Ov=function(e,t){return{"contact-list-hide":e,"add-contact-search-result":t}};function xv(e,t){if(1&e&&(jo(0,"div",3),Uo(1,Iv,7,4,"div",4),Fo()),2&e){const e=Jo();Do("ngClass",(n=2,r=Ov,i=e.isContactSelected,o=e.isActionAdd,function(e,t,n,r,i,o,s){const a=t+n;return Ro(e,a,i,o)?Po(e,a+2,s?r.call(s,i,o):r(i,o)):da(e,a+2)}(on(),pn(),n,r,i,o,s))),Ur(1),Do("ngForOf",e.contacts)}var n,r,i,o,s}const Pv=function(e){return{"add-contact-search-box":e}};let kv=(()=>{class e{constructor(e,t){this.contactService=e,this.elementRef=t,this.isContactSelected=!1,this.contacts=[],this.error="",this.contactSearchField=new nv,this.contactPhotos=[],this.showSearchResult=!0,this.selected=new ma,this.digits=new ma,this.placeHolderText=""}set searchText(e){this.contactSearchField.setValue(e)}ngOnInit(){this.contactSearchSubscription=this.contactSearchField.valueChanges.pipe(A(e=>e.trim()),function(e,t=hv){return n=>n.lift(new dv(e,t))}(500),e=>e.lift(new gv(void 0,void 0)),cl(e=>this.getContacts(e))).subscribe(()=>this.isContactSelected=!1)}ngAfterViewInit(){this.textbox.nativeElement.focus()}ngOnDestroy(){this.contactSearchSubscription.unsubscribe()}get isActionAdd(){return"add"===this.action}getContacts(e=""){return Cf(this,void 0,void 0,(function*(){try{return this.digits.emit(e),this.contacts=yield this.contactService.getContacts(e),console.log("[ContactListComponent.getContacts] getting all contacts phone number"),Om([...this.contacts.map(e=>this.updateContactPhones(e))]).subscribe(()=>{console.log("[ContactListComponent.getContacts] getting contacts photos"),Om([...this.contacts.map(e=>this.updateContactPhoto(e))]).subscribe(()=>{})}),this.contacts}catch(t){console.error(t.message),this.error=t.message}}))}updateContactPhones(e){return Cf(this,void 0,void 0,(function*(){const t=yield this.contactService.getContactPhones(e.id);return e.updatePhones(t)}))}updateContactPhoto(e){return Cf(this,void 0,void 0,(function*(){const t=yield this.contactService.getContactPhoto(e.id);return e.updatePhoto(t)}))}selectContact(e){this.isActionAdd||(this.isContactSelected=!0,this.contactSearchField.setValue("",{emitEvent:!1}),this.digits.emit(""),this.selected.emit(e))}addContact(e,t,n){e.target.disabled=!0,this.inProgressIndex=n,this.selected.emit(t)}clickout(e){"BUTTON"!==e.target.tagName&&(this.showSearchResult=this.elementRef.nativeElement.contains(e.target))}displaySearchResult(){this.showSearchResult=!0}}return e.\u0275fac=function(t){return new(t||e)(No(Am),No(Os))},e.\u0275cmp=lt({type:e,selectors:[["app-contact-list"]],viewQuery:function(e,t){var n,r,i,o,s,a;1&e&&(o=wv,s=!0,function(e,t,n,r,i,o){e.firstCreatePass&&function(e,t,n){null===e.queries&&(e.queries=new Ca),e.queries.track(new Sa(t,-1))}(e,new _a(n,r,!1,i)),function(e,t){const n=new va;ti(e,t,n,n.destroy),null===t[19]&&(t[19]=new wa),t[19].queries.push(new ba(n))}(e,t)}(sn(),on(),o,s,a)),2&e&&function(e){const t=on(),n=sn(),r=vn();bn(r+1);const i=Ia(n,r);if(e.dirty&&Qt(t)===i.metadata.isStatic){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?function e(t,n,r,i){const o=t.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Aa(t,n,o,r);for(let t=0;t<s.length;t+=2){const r=s[t];if(r>0)i.push(a[t/2]);else{const o=s[t+1],a=n[-r];for(let t=Ct;t<a.length;t++){const n=a[t];n[17]===n[3]&&e(n[1],n,o,i)}if(null!==a[9]){const t=a[9];for(let n=0;n<t.length;n++){const r=t[n];e(r[1],r,o,i)}}}}}return i}(n,t,r,[]):Aa(n,t,i,r);e.reset(o),e.notifyOnChanges()}return!0}return!1}((r=on(),i=vn(),n=r[19].queries[i].queryList))&&(t.textbox=n.first)},hostBindings:function(e,t){1&e&&Ko("click",(function(e){return t.clickout(e)}),!1,Mt)},inputs:{action:"action",searchText:"searchText",placeHolderText:"placeHolderText"},outputs:{selected:"selected",digits:"digits"},decls:3,vars:6,consts:[["type","text",1,"contact-list-search-box",3,"ngClass","placeholder","formControl","focus"],["textbox",""],["class","contact-list-search-results",3,"ngClass",4,"ngIf"],[1,"contact-list-search-results",3,"ngClass"],["class","contact-list-search-result",3,"click",4,"ngFor","ngForOf"],[1,"contact-list-search-result",3,"click"],[1,"contact-list-search-result-container"],["class","avatar-container",3,"ngStyle",4,"ngIf"],["randomColor","","class","avatar-container avatar",4,"ngIf"],["tooltip","",1,"contact-display-name"],[4,"ngIf"],[1,"avatar-container",3,"ngStyle"],["randomColor","",1,"avatar-container","avatar"],[1,"avatar-text"],["class","add-contact",3,"click",4,"ngIf"],["class","add-in-progress",4,"ngIf"],[1,"add-contact",3,"click"],[1,"add-in-progress"]],template:function(e,t){1&e&&(jo(0,"input",0,1),Ko("focus",(function(){return t.displaySearchResult()})),Fo(),Uo(2,xv,2,5,"div",2)),2&e&&(Yo("placeholder",t.placeHolderText),Do("ngClass",ha(4,Pv,t.isActionAdd))("formControl",t.contactSearchField),Ur(2),Do("ngIf",t.showSearchResult))},directives:[my,Jc,by,av,Xc,Qc,yv,nu,vv,bv],pipes:[uy],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.contact-list-search-box[_ngcontent-%COMP%]{width:300px;height:40px;border:0;outline:0;font-size:18px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;text-indent:5px;color:#002856;background:#ebeff3;border-radius:4px;min-width:300px}.contact-list-search-box[_ngcontent-%COMP%]:focus{background-image:none}[_ngcontent-%COMP%]::placeholder{color:#1f1f1f}.add-contact-search-box[_ngcontent-%COMP%]{width:450px;background:#fff;border:1px solid #d1d6db;box-sizing:border-box;font-size:14px}.contact-list-search-results[_ngcontent-%COMP%]{position:absolute;width:300px;max-height:27.4285em;overflow:auto;background-color:#fff;border:.1px solid #ebeff3;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.16);z-index:100;min-width:300px}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]{cursor:pointer;height:45px;font-size:16px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]{display:flex;height:45px;background:#f8f9fb;align-items:center;justify-content:flex-start;margin-top:5px}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]:hover   .add-contact[_ngcontent-%COMP%]{display:block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:700;font-size:14px;line-height:19px;text-align:center;text-transform:uppercase;color:#0073d0;margin-left:10px;border:none;background:none;cursor:pointer}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{position:relative;top:7%;left:5%;width:38px;height:38px;border-radius:50%;background-repeat:no-repeat;background-size:38px 38px}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]   .avatar-text[_ngcontent-%COMP%]{padding:7px 4px 4px}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]   .add-contact[_ngcontent-%COMP%]{display:none}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]   .add-in-progress[_ngcontent-%COMP%]{margin-left:20px}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;color:#fff;background-color:salmon}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .contact-list-search-result-container[_ngcontent-%COMP%]   .contact-display-name[_ngcontent-%COMP%]{font-weight:700;font-size:16px;overflow:hidden;text-overflow:ellipsis;width:220px;white-space:nowrap;margin-left:30px}.contact-list-search-results[_ngcontent-%COMP%]   .contact-list-search-result[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border:.5px solid #000;width:90%;margin-left:10px;margin-top:5px}.contact-list-search-results[_ngcontent-%COMP%]   .disable-click[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.contact-list-hide[_ngcontent-%COMP%]{display:none}.add-contact-search-result[_ngcontent-%COMP%]{width:350px}.hide-placeholder[_ngcontent-%COMP%]{background-image:none}"]}),e})(),Rv=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-loading"]],decls:49,vars:0,consts:[[1,"container"],[1,"post"],[1,"avatar"],[1,"line"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Vo(2,"div",2),Vo(3,"div",3),Vo(4,"div",3),Fo(),jo(5,"div",1),Vo(6,"div",2),Vo(7,"div",3),Vo(8,"div",3),Fo(),jo(9,"div",1),Vo(10,"div",2),Vo(11,"div",3),Vo(12,"div",3),Fo(),jo(13,"div",1),Vo(14,"div",2),Vo(15,"div",3),Vo(16,"div",3),Fo(),jo(17,"div",1),Vo(18,"div",2),Vo(19,"div",3),Vo(20,"div",3),Fo(),jo(21,"div",1),Vo(22,"div",2),Vo(23,"div",3),Vo(24,"div",3),Fo(),jo(25,"div",1),Vo(26,"div",2),Vo(27,"div",3),Vo(28,"div",3),Fo(),jo(29,"div",1),Vo(30,"div",2),Vo(31,"div",3),Vo(32,"div",3),Fo(),jo(33,"div",1),Vo(34,"div",2),Vo(35,"div",3),Vo(36,"div",3),Fo(),jo(37,"div",1),Vo(38,"div",2),Vo(39,"div",3),Vo(40,"div",3),Fo(),jo(41,"div",1),Vo(42,"div",2),Vo(43,"div",3),Vo(44,"div",3),Fo(),jo(45,"div",1),Vo(46,"div",2),Vo(47,"div",3),Vo(48,"div",3),Fo(),Fo())},styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.container[_ngcontent-%COMP%]{height:60vh;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.post[_ngcontent-%COMP%]{margin-right:50px}.post[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:52px;height:52px;background-color:#ccc;border-radius:25%;margin:8px;animation:shine-avatar 2s ease-out infinite}.post[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{float:left;background-image:linear-gradient(90deg,#f4f4f4,hsla(0,0%,89.8%,.8) 40px,#f4f4f4 80px);background-size:600px}.post[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:140px;height:16px;margin-top:12px;border-radius:7px;animation:shine-lines 2s ease-out infinite}.post[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%] + .line[_ngcontent-%COMP%]{margin-top:11px;width:100px}.post[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%] ~ .line[_ngcontent-%COMP%]{background-color:#ddd;margin-top:40px;margin-left:-100px}@keyframes shine-lines{0%{background-position:-100px}40%,to{background-position:140px}}@keyframes shine-avatar{0%{background-position:-32px}40%,to{background-position:208px}}"]}),e})();const Mv=function(e){return{"background-image":e}};function Uv(e,t){if(1&e&&Vo(0,"div",12),2&e){const e=Jo(2);Do("ngStyle",ha(1,Mv,e.contact.photo))}}function Nv(e,t){if(1&e&&(jo(0,"div",13),jo(1,"div",14),ss(2),Fo(),Fo()),2&e){const e=Jo(2);Ur(2),as(e.contact.initials)}}function Dv(e,t){if(1&e){const e=Bo();Ho(0),jo(1,"div",17),Ko("click",(function(){an(e);const n=t.$implicit,r=Jo(3);return r.selectPhoneNumber(r.contact,n)})),ss(2),Fo(),qo()}if(2&e){const e=t.$implicit;Ur(2),as(e.number)}}function Lv(e,t){if(1&e&&(jo(0,"div",15),Uo(1,Dv,3,1,"ng-container",16),Fo()),2&e){const e=Jo(2);Ur(1),Do("ngForOf",e.contact.filteredPhoneNumbers)}}function jv(e,t){if(1&e){const e=Bo();jo(0,"div",18),Ko("click",(function(){return an(e),Jo(2).togglePhoneList()})),Fo()}}function Fv(e,t){if(1&e){const e=Bo();jo(0,"div",19),Ko("click",(function(){an(e);const t=Jo(2);return t.deleteContact(t.contact)})),Fo()}}function Vv(e,t){1&e&&(jo(0,"div",20),Vo(1,"app-spinner"),Fo())}function Hv(e,t){if(1&e){const e=Bo();jo(0,"div",1),Uo(1,Uv,1,3,"div",2),Uo(2,Nv,3,1,"div",3),jo(3,"div",4),ss(4),Fo(),jo(5,"div",5),ss(6),Fo(),Uo(7,Lv,2,1,"div",6),Uo(8,jv,1,0,"div",7),jo(9,"div",8),Uo(10,Fv,1,0,"div",9),Uo(11,Vv,2,0,"div",10),jo(12,"div",11),Ko("click",(function(){an(e);const t=Jo();return t.dialHandler(t.contact)})),Fo(),Fo(),Fo()}if(2&e){const e=Jo();Ur(1),Do("ngIf",e.contact.photo),Ur(1),Do("ngIf",!e.contact.photo),Ur(2),as(e.contact.displayName),Ur(2),cs(" ",e.contact.selectedPhoneNumber," "),Ur(1),Do("ngIf",e.showAllPhones),Ur(1),Do("ngIf",e.contact.hasMoreThanOnePhoneNumbers),Ur(2),Do("ngIf",!e.isDeleteInProgress),Ur(1),Do("ngIf",e.isDeleteInProgress)}}let qv=(()=>{class e{constructor(e,t,n){this.contactService=e,this.softphoneLauncher=t,this.elementRef=n,this.error="",this.dial=new ma,this.showAllPhones=!1,this.isDeleteInProgress=!1}ngOnInit(){}togglePhoneList(){this.showAllPhones=!this.showAllPhones}selectPhoneNumber(e,t){e.selectPhoneNumber(t.number),this.showAllPhones=!1}dialHandler(e){this.contactService.updateContact(e),this.softphoneLauncher.dial(e.selectedPhoneNumber)}deleteContact(e){return Cf(this,void 0,void 0,(function*(){try{this.isDeleteInProgress=!0,yield this.contactService.deleteContact(e)}catch(t){this.isDeleteInProgress=!1,console.error(t.message),this.error=t.message}}))}clickout(e){this.elementRef.nativeElement.contains(e.target)||(this.showAllPhones=!1)}}return e.\u0275fac=function(t){return new(t||e)(No(Am),No(gf),No(Os))},e.\u0275cmp=lt({type:e,selectors:[["app-contact"]],hostBindings:function(e,t){1&e&&Ko("click",(function(e){return t.clickout(e)}),!1,Mt)},inputs:{contact:"contact"},outputs:{dial:"dial"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["class","avatar-container",3,"ngStyle",4,"ngIf"],["randomColor","","class","avatar-container avatar",4,"ngIf"],["tooltip","",1,"speed-dial-name"],[1,"speed-dial-number"],["class","speed-dial-dropdown",4,"ngIf"],["class","speed-dial-dropdown-icon",3,"click",4,"ngIf"],[1,"call-delete-container"],["class","speed-dial-delete",3,"click",4,"ngIf"],["class","delete-in-progress",4,"ngIf"],[1,"speed-dial-call",3,"click"],[1,"avatar-container",3,"ngStyle"],["randomColor","",1,"avatar-container","avatar"],[1,"avatar-text"],[1,"speed-dial-dropdown"],[4,"ngFor","ngForOf"],[1,"phone-number",3,"click"],[1,"speed-dial-dropdown-icon",3,"click"],[1,"speed-dial-delete",3,"click"],[1,"delete-in-progress"]],template:function(e,t){1&e&&Uo(0,Hv,13,8,"div",0),2&e&&Do("ngIf",t.contact)},directives:[Xc,yv,nu,vv,Qc,bv],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.container[_ngcontent-%COMP%]:hover   .call-delete-container[_ngcontent-%COMP%]   .speed-dial-call[_ngcontent-%COMP%]{background:url(call-button-enable.172e3155db2baa95e66b.svg);background-repeat:no-repeat;background-size:15px 15px;background-position:50%}.container[_ngcontent-%COMP%]:hover   .call-delete-container[_ngcontent-%COMP%]   .speed-dial-delete[_ngcontent-%COMP%]{background:url(trash-enable.e0b4bb542f022e4d941d.svg);background-repeat:no-repeat;background-size:16px 16px;background-position:50%}.container[_ngcontent-%COMP%]   .speed-dial-name[_ngcontent-%COMP%]{font-weight:700;font-size:16px;margin-bottom:5px;margin-top:10px}.container[_ngcontent-%COMP%]   .speed-dial-name[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .speed-dial-number[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;color:#464b51;overflow:hidden;text-overflow:ellipsis;width:150px;white-space:nowrap;margin-left:25px}.container[_ngcontent-%COMP%]   .speed-dial-number[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.container[_ngcontent-%COMP%]   .speed-dial-dropdown[_ngcontent-%COMP%]{position:absolute;top:55px;left:59px;width:130px;max-height:27.4285em;overflow:auto;background-color:#fff;border-radius:8px;box-shadow:10px 10px 24px rgba(166,180,200,.5);z-index:100}.container[_ngcontent-%COMP%]   .speed-dial-dropdown[_ngcontent-%COMP%]   .phone-number[_ngcontent-%COMP%]{cursor:pointer;padding-left:7px;padding-top:5px;color:#464b51;height:30px;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.container[_ngcontent-%COMP%]   .speed-dial-dropdown-icon[_ngcontent-%COMP%]{position:absolute;bottom:17px;right:66px;background:url(dropdown.6e55d771a8f92419fbd8.svg);background-repeat:no-repeat;background-size:15px 15px;background-position:50%;width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%]   .avatar-container[_ngcontent-%COMP%]{position:absolute;top:20%;left:5%;width:45px;height:45px;border-radius:50%;background-repeat:no-repeat;background-size:45px 45px}.container[_ngcontent-%COMP%]   .avatar-text[_ngcontent-%COMP%]{padding:8px}.container[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-weight:500;color:#fff}.container[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border:.5px solid #000;width:100%}.container[_ngcontent-%COMP%]   .call-delete-container[_ngcontent-%COMP%]{position:absolute;width:40px;height:70px;right:0;top:0;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .call-delete-container[_ngcontent-%COMP%]   .speed-dial-call[_ngcontent-%COMP%]{background:url(call-button-disable.831414cbbc32aa87096b.svg);background-repeat:no-repeat;background-size:15px 15px;background-position:50%;margin-top:8px;margin-left:10px;width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%]   .call-delete-container[_ngcontent-%COMP%]   .speed-dial-delete[_ngcontent-%COMP%]{background:url(trash-disable.7c16106723ab8c957b17.svg);background-repeat:no-repeat;background-size:16px 16px;background-position:50%;cursor:pointer}.container[_ngcontent-%COMP%]   .call-delete-container[_ngcontent-%COMP%]   .delete-in-progress[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .call-delete-container[_ngcontent-%COMP%]   .speed-dial-delete[_ngcontent-%COMP%]{margin-top:8px;margin-left:10px;width:16px;height:16px}"]}),e})();function Bv(e,t){1&e&&Vo(0,"app-loading")}function zv(e,t){if(1&e&&(jo(0,"div",5),Vo(1,"app-contact",6),Fo()),2&e){const e=Jo().$implicit;Ur(1),Do("contact",e)}}function Gv(e,t){if(1&e&&(Ho(0),Uo(1,zv,2,1,"ng-template",1),qo()),2&e){const e=t.$implicit;Ur(1),Do("ngIf",!!e.displayName)}}function Kv(e,t){if(1&e&&(jo(0,"div",3),Uo(1,Gv,2,1,"ng-container",4),Fo()),2&e){const e=Jo();Ur(1),Do("ngForOf",e.speedDialContacts)}}let Wv=(()=>{class e{constructor(e){this.contactService=e,this.error="",this.speedDialContacts=[],this.savedContactIds=[],this.showLoadingEffect=!0}ngOnInit(){this.getSpeedDialContacts()}ngAfterViewInit(){this.contactsUpdateSubscription=this.contactService.contactsUpdatedObserver.subscribe(e=>{e.operation===tp.Add?this.addContactToList(e.contactDetails):this.deleteContactFromList(e.contactDetails)})}ngOnDestroy(){this.contactsUpdateSubscription.unsubscribe()}getSpeedDialContacts(){return Cf(this,void 0,void 0,(function*(){console.log("[SpeedDialListComponent.getSpeedDialContacts] getting speed dial contact lists"),Om([this.contactService.getSpeedDialContactIdsListOne(),this.contactService.getSpeedDialContactIdsListTwo()]).subscribe(([e,t])=>{this.savedContactIds=this.contactService.speedDialContactIds,console.log("[SpeedDialListComponent.getSpeedDialContacts] getting conatcts details in batches"),Om([this.getContactBatch(e),this.getContactBatch(t),this.getPersonalContacts()]).subscribe(()=>{console.log("[SpeedDialListComponent.getSpeedDialContacts] updating speed dial contacts selected phone number"),this.updateSelectedPhoneNumber(),console.log("[SpeedDialListComponent.getSpeedDialContacts] sorting contacts"),this.sortContacts(),this.correctSpeedDialContactList(),console.log("[SpeedDialListComponent.getSpeedDialContacts] getting all contacts phone number"),Om([...this.speedDialContacts.map(e=>this.updateContactPhones(e))]).subscribe(()=>{console.log("[SpeedDialListComponent.getSpeedDialContacts] getting all contacts photo"),Om([...this.speedDialContacts.map(e=>this.updateContactPhoto(e))]).subscribe(()=>{})})},e=>{console.error(e.message),this.error=e.message},()=>{this.showLoadingEffect=!1})},e=>{console.error(e.message),this.error=e.message})}))}correctSpeedDialContactList(){this.contactService.speedDialContactIds=this.speedDialContacts.map(e=>({i:e.id,n:e.selectedPhoneNumber}))}getContactBatch(e){return Cf(this,void 0,void 0,(function*(){try{const t=e.map(e=>e.i),n=yield this.contactService.getContactBatch(t);this.speedDialContacts=[...this.speedDialContacts,...n]}catch(t){console.error(t.message),this.error=t.message}}))}getPersonalContacts(){return Cf(this,void 0,void 0,(function*(){try{const e=(yield this.contactService.getPersonalContacts()).filter(e=>this.savedContactIds.some(t=>e.id===t.i));this.speedDialContacts=[...this.speedDialContacts,...e]}catch(e){console.error(e.message),this.error=e.message}}))}updateSelectedPhoneNumber(){this.speedDialContacts.forEach(e=>{const t=this.savedContactIds.find(t=>t.i===e.id),n=e.allPhones.find(e=>e.number.substr(-4)===t.n);n&&(e.selectedPhoneNumber=n.number)})}sortContacts(){const e=new Map;this.savedContactIds.forEach((t,n)=>e.set(t.i,{id:t.i,order:n+1})),this.speedDialContacts.sort((t,n)=>e.get(t.id).order-e.get(n.id).order)}updateContactPhoto(e){return Cf(this,void 0,void 0,(function*(){const t=yield this.contactService.getContactPhoto(e.id);return e.updatePhoto(t)}))}updateContactPhones(e){return Cf(this,void 0,void 0,(function*(){const t=yield this.contactService.getContactPhones(e.id);return e.updatePhones(t)}))}addContactToList(e){return Cf(this,void 0,void 0,(function*(){this.speedDialContacts.push(e),this.updateContactPhoto(e),this.updateContactPhones(e)}))}deleteContactFromList(e){this.speedDialContacts=this.speedDialContacts.filter(t=>t.id!==e.id)}}return e.\u0275fac=function(t){return new(t||e)(No(Am))},e.\u0275cmp=lt({type:e,selectors:[["app-speed-dial-list"]],decls:3,vars:2,consts:[[1,"speed-dial-container"],[3,"ngIf"],["class","speed-dial-contacts",4,"ngIf"],[1,"speed-dial-contacts"],[4,"ngFor","ngForOf"],[1,"speed-dial-content"],[3,"contact"]],template:function(e,t){1&e&&(jo(0,"div",0),Uo(1,Bv,1,0,"ng-template",1),Uo(2,Kv,2,1,"div",2),Fo()),2&e&&(Ur(1),Do("ngIf",t.showLoadingEffect),Ur(1),Do("ngIf",!t.showLoadingEffect))},directives:[Xc,Rv,Qc,qv],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.speed-dial-container[_ngcontent-%COMP%]{position:absolute;left:400px;top:15%;height:85%;display:flex;overflow-x:hidden;overflow-y:auto}.speed-dial-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.speed-dial-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}.speed-dial-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.speed-dial-container[_ngcontent-%COMP%]   .speed-dial-contacts[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:flex-start}.speed-dial-container[_ngcontent-%COMP%]   .speed-dial-contacts[_ngcontent-%COMP%]   .speed-dial-content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;height:60px;padding:0 12px 12px;font-size:14px;background:#fff;border-radius:8px;margin-bottom:35px;margin-left:25px;align-items:center;min-width:232px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}"]}),e})(),$v=(()=>{class e{constructor(e,t){this.contactService=e,this.translate=t,this.error="",this.searchPlaceHolderText="",this.add=new ma}ngOnInit(){this.searchPlaceHolderText=this.translate.instant("speed-dial.add.placeholder")}addContact(e){return Cf(this,void 0,void 0,(function*(){try{yield this.contactService.addContact(e),this.raiseAddEvent(e)}catch(t){this.raiseAddEvent(null),this.error=t.message}}))}raiseAddEvent(e){this.add.emit(e)}raiseCancelAddEvent(){this.add.emit("")}}return e.\u0275fac=function(t){return new(t||e)(No(Am),No(cy))},e.\u0275cmp=lt({type:e,selectors:[["app-add-speed-dial"]],outputs:{add:"add"},decls:10,vars:8,consts:[[1,"add-speed-dial-background"],[1,"add-speed-dial-dialog"],[1,"dialog-title"],[3,"placeHolderText","action","selected"],[1,"dialog-actions"],[1,"dialog-action","dialog-action-cancel",3,"click"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),jo(2,"div",2),ss(3),pa(4,"translate"),Fo(),jo(5,"app-contact-list",3),Ko("selected",(function(e){return t.addContact(e)})),Fo(),jo(6,"div",4),jo(7,"span",5),Ko("click",(function(){return t.raiseCancelAddEvent()})),ss(8),pa(9,"translate"),Fo(),Fo(),Fo(),Fo()),2&e&&(Ur(3),as(ga(4,4,"speed-dial.add.dialog-title")),Ur(2),Do("placeHolderText",t.searchPlaceHolderText)("action","add"),Ur(3),as(ga(9,6,"speed-dial.actions.cancel")))},directives:[kv],pipes:[uy],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.add-speed-dial-background[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;overflow:auto;z-index:9999;padding:20px;box-sizing:border-box;text-align:center;background:rgba(238,240,245,.8)}.add-speed-dial-background[_ngcontent-%COMP%]   .add-speed-dial-dialog[_ngcontent-%COMP%]{width:500px;box-sizing:border-box;padding:0 28px;vertical-align:middle;text-align:left;background:#fff;box-shadow:10px 10px 24px rgba(166,180,200,.5),-12px -12px 20px hsla(0,0%,100%,.8);border-radius:16px;height:185px;opacity:1;display:inline-block;margin-top:5%}.add-speed-dial-background[_ngcontent-%COMP%]   .add-speed-dial-dialog[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{min-width:100px;max-width:95%;height:19px;margin:24px 0 20px;font-size:16px;font-weight:700;line-height:19px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;color:#3c3a38}.add-speed-dial-background[_ngcontent-%COMP%]   .add-speed-dial-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;margin-top:24px}.add-speed-dial-background[_ngcontent-%COMP%]   .add-speed-dial-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .dialog-action-cancel[_ngcontent-%COMP%]{color:#cd2b26;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:600;font-size:14px;line-height:19px;text-align:center;text-transform:uppercase;cursor:pointer}.add-speed-dial-background[_ngcontent-%COMP%]   .add-speed-dial-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .dialog-action-add[_ngcontent-%COMP%]{margin-left:12px}"]}),e})();function Jv(e,t){1&e&&Vo(0,"app-speed-dial-list")}function Yv(e,t){if(1&e){const e=Bo();jo(0,"div",12),Vo(1,"div",13),jo(2,"div",14),ss(3,"It looks like you have no contacts yet. Start adding your first contact"),Fo(),jo(4,"button",15),Ko("click",(function(){return an(e),Jo().showAddSpeedDial()})),ss(5),pa(6,"translate"),Fo(),Fo()}2&e&&(Ur(5),cs(" +\xa0",ga(6,1,"speed-dial.add.button-text")," "))}function Qv(e,t){if(1&e){const e=Bo();jo(0,"app-add-speed-dial",16),Ko("add",(function(t){return an(e),Jo().handleAddCancelEvent(t)})),Fo()}}const Zv=function(e,t,n){return{"disable-add-button":e,hide:t,show:n}};let Xv=(()=>{class e{constructor(e,t,n,r){this.document=e,this.contactService=t,this.translate=n,this.softphoneLauncher=r,this.contacts=[],this.speedDialContactIds=[],this.showAddSpeedDialComponent=!1,this.searchText="",this.searchPlaceHolderText="",this.error="",this.window=this.document.defaultView}ngOnInit(){this.translate.get("contact-search.placeholder").subscribe(e=>{this.searchPlaceHolderText=e})}get allowAddingSpeedDialContact(){return this.contactService.speedDialContactIds.length<20}get isSpeedDialContactIdsPresent(){return this.contactService.speedDialContactIds.length>0}showAddSpeedDial(){this.showAddSpeedDialComponent=!0}handleAddCancelEvent(e){this.showAddSpeedDialComponent=!1}updateSearchText(e){this.searchText=e}dialHandler(e){this.softphoneLauncher.dial(e.selectedPhoneNumber)}}return e.\u0275fac=function(t){return new(t||e)(No(Ic),No(Am),No(cy),No(gf))},e.\u0275cmp=lt({type:e,selectors:[["app-dialer-container"]],decls:16,vars:19,consts:[[1,"main-container"],[3,"dialedNumber","digits"],[1,"horizontal-line"],[1,"vertical-line"],[1,"search-box-position",3,"placeHolderText","action","searchText","selected","digits"],[4,"ngIf"],[3,"ngIf"],[1,"speed-dials-container"],[1,"speed-dials-caption"],[1,"speed-dials-notification"],[1,"speed-dial-button",3,"disabled","ngClass","click"],[3,"add",4,"ngIf"],[1,"zero-speed-dial-container"],[1,"address-book"],[1,"message"],[1,"zero-speed-dial-button",3,"click"],[3,"add"]],template:function(e,t){var n,r,i,o,s,a;1&e&&(jo(0,"div",0),jo(1,"app-dialer",1),Ko("digits",(function(e){return t.updateSearchText(e)})),Fo(),Vo(2,"div",2),Vo(3,"div",3),jo(4,"app-contact-list",4),Ko("selected",(function(e){return t.dialHandler(e)}))("digits",(function(e){return t.updateSearchText(e)})),Fo(),Uo(5,Jv,1,0,"app-speed-dial-list",5),Uo(6,Yv,7,3,"ng-template",6),jo(7,"div",7),jo(8,"span",8),ss(9),pa(10,"translate"),Fo(),Vo(11,"span",9),jo(12,"button",10),Ko("click",(function(){return t.showAddSpeedDial()})),ss(13),pa(14,"translate"),Fo(),Fo(),Uo(15,Qv,1,0,"app-add-speed-dial",11),Fo()),2&e&&(Ur(1),Do("dialedNumber",t.searchText),Ur(3),Do("placeHolderText",t.searchPlaceHolderText)("action","dial")("searchText",t.searchText),Ur(1),Do("ngIf",t.isSpeedDialContactIdsPresent),Ur(1),Do("ngIf",!t.isSpeedDialContactIdsPresent),Ur(3),as(ga(10,11,"speed-dial.title")),Ur(3),Do("disabled",!t.allowAddingSpeedDialContact)("ngClass",(n=15,r=Zv,i=!t.allowAddingSpeedDialContact,o=!t.isSpeedDialContactIdsPresent,s=t.isSpeedDialContactIdsPresent,function(e,t,n,r,i,o,s,a){const c=t+n;return function(e,t,n,r,i){const o=Ro(e,t,n,r);return ko(e,t+2,i)||o}(e,c,i,o,s)?Po(e,c+3,a?r.call(a,i,o,s):r(i,o,s)):da(e,c+3)}(on(),pn(),n,r,i,o,s,a))),Ur(1),cs(" +\xa0",ga(14,13,"speed-dial.add.button-text")," "),Ur(2),Do("ngIf",t.showAddSpeedDialComponent))},directives:[yf,kv,Xc,Jc,Wv,$v],pipes:[uy],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.main-container[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;min-width:800px;min-height:600px;overflow-y:hidden;background:#ebeff3}.main-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:0}.search-box-position[_ngcontent-%COMP%]{position:absolute;top:50px;left:40px}.vertical-line[_ngcontent-%COMP%]{position:absolute;top:0;left:350px;border-left:1px solid #d1d6db;height:100%}.horizontal-line[_ngcontent-%COMP%]{position:absolute;top:30px;left:0;border-top:1px solid #d1d6db;width:350px}.speed-dial-button[_ngcontent-%COMP%]{max-width:350px;min-width:100px;height:32px;padding:0 16px 35px;font-size:14px;font-weight:700;color:#fff;line-height:32px;vertical-align:middle;text-align:center;opacity:1;border:none;cursor:pointer;background:linear-gradient(180deg,transparent 2.62%,rgba(0,0,0,.08) 98.87%),#0073d0;box-shadow:10px 10px 24px rgba(166,180,200,.5),-12px -12px 20px hsla(0,0%,100%,.8);border-radius:8px}.speed-dial-button[_ngcontent-%COMP%], .speed-dials-caption[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.speed-dials-caption[_ngcontent-%COMP%]{color:#3c3a38;max-width:400px;height:30px;margin:0 12px 0 32px;font-size:18px;font-weight:600}.speed-dials-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding-top:24px;margin-bottom:32px;margin-left:350px;margin-right:38px}.speed-dials-notification[_ngcontent-%COMP%]{min-width:100px;max-width:930px;height:20px;margin-right:auto;margin-left:6px;color:#999;font-size:12px;line-height:20px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.disable-add-button[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.hide[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:block}.zero-speed-dial-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:60%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center}.zero-speed-dial-container[_ngcontent-%COMP%]   .address-book[_ngcontent-%COMP%]{background-image:url(address-book.b8f9e8d96f95c5c0d2ec.svg);background-repeat:no-repeat;background-size:60px 60px;background-position:50%;width:60px;height:60px;margin-bottom:25px}.zero-speed-dial-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:50px;width:350px}.zero-speed-dial-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], .zero-speed-dial-container[_ngcontent-%COMP%]   .zero-speed-dial-button[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;text-align:center}.zero-speed-dial-container[_ngcontent-%COMP%]   .zero-speed-dial-button[_ngcontent-%COMP%]{max-width:350px;min-width:100px;height:32px;padding:0 16px 35px;font-size:14px;font-weight:700;color:#fff;line-height:32px;vertical-align:middle;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;opacity:1;border:none;cursor:pointer;background:linear-gradient(180deg,transparent 2.62%,rgba(0,0,0,.08) 98.87%),#0073d0;box-shadow:10px 10px 24px rgba(166,180,200,.5),-12px -12px 20px hsla(0,0%,100%,.8);border-radius:8px}"]}),e})(),eb=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=lt({type:e,selectors:[["app-tab"]],decls:1,vars:0,template:function(e,t){1&e&&Vo(0,"app-dialer-container")},directives:[Xv],styles:[""]}),e})(),tb=(()=>{class e{constructor(e,t,n){this.authService=e,this.document=t,this.msTeams=n,this.error="",this.window=this.document.defaultView}ngOnInit(){this.msTeams.initialize(this.window),this.msTeams.getContext(e=>Cf(this,void 0,void 0,(function*(){e&&(yield this.login())})))}login(){return Cf(this,void 0,void 0,(function*(){if(yield this.authService.isLoggedIn())try{const{username:e,accessToken:t,expiresOn:n}=yield this.authService.getAccessTokenWithExpiry(df);if(t){const r=JSON.stringify({username:e,accessToken:t,expiresOn:n});this.msTeams.authentication.notifySuccess(r)}else this.msTeams.authentication.notifyFailure("Unexpected failure - null token received")}catch(e){this.error=e.message,this.msTeams.authentication.notifyFailure(e.message)}else try{this.authService.login(df)}catch(e){this.error=e.message}}))}}return e.\u0275fac=function(t){return new(t||e)(No(Em),No(Ic),No(ff))},e.\u0275cmp=lt({type:e,selectors:[["app-teams-auth-popup"]],decls:2,vars:0,template:function(e,t){1&e&&(jo(0,"p"),ss(1,"Authorizing..."),Fo())},styles:[""]}),e})(),nb=(()=>{class e{constructor(e,t){this.authService=e,this.document=t,this.contacts=[],this.speedDialContacts=[],this.error="",this.contactSearchField=new nv,this.window=this.document.defaultView}ngOnInit(){return Cf(this,void 0,void 0,(function*(){if(!(yield this.authService.isLoggedIn()))try{this.authService.login(df)}catch(e){this.error=e.message}}))}dialHandler(e){console.log(e),this.window.location.href="tel://"+e}}return e.\u0275fac=function(t){return new(t||e)(No(Em),No(Ic))},e.\u0275cmp=lt({type:e,selectors:[["app-web"]],decls:1,vars:0,consts:[[3,"dial"]],template:function(e,t){1&e&&(jo(0,"app-dialer-container",0),Ko("dial",(function(e){return t.dialHandler(e)})),Fo())},directives:[Xv],styles:[""]}),e})(),rb=(()=>{class e{static getComponentUrl(e=""){return new Map([...this.map.entries()].map(([e,t])=>[t,e])).get(e)}static getLoginUrl(e=""){return this.map.get(e)}}return e.map=new Map([["tab","loginhelper"],["conv-member","compose-loginhelper"]]),e})();function ib(e,t){if(1&e){const e=Bo();Ho(0),jo(1,"div",3),ss(2),pa(3,"translate"),Fo(),jo(4,"div",4),ss(5),pa(6,"translate"),Fo(),jo(7,"button",5),Ko("click",(function(){return an(e),Jo().getMyDetails()})),ss(8),pa(9,"translate"),Fo(),qo()}2&e&&(Ur(2),as(ga(3,3,"login.permission")),Ur(3),as(ga(6,5,"login.permission-message")),Ur(3),as(ga(9,7,"login.login-button")))}function ob(e,t){1&e&&(Ho(0),jo(1,"div",6),ss(2),pa(3,"translate"),Fo(),qo()),2&e&&(Ur(2),as(ga(3,1,"login.signing-in")))}function sb(e,t){if(1&e){const e=Bo();Ho(0),jo(1,"div",7),ss(2),pa(3,"translate"),Fo(),jo(4,"button",8),Ko("click",(function(){return an(e),Jo().tryAgain()})),ss(5),pa(6,"translate"),Fo(),qo()}2&e&&(Ur(2),as(ga(3,2,"login.sign-in-fail")),Ur(3),as(ga(6,4,"login.try-again")))}let ab=(()=>{class e{constructor(e,t,n){this.contactService=e,this.router=t,this.activatedRoute=n,this.error="",this.signingIn=!1,this.signInFail=!1}ngOnInit(){return Cf(this,void 0,void 0,(function*(){try{yield this.contactService.setAuthProviderForTeams(!0)}finally{const e=rb.getComponentUrl(this.activatedRoute.snapshot.url[0].path);console.log("[LoginHelperComponent]: reditecting to component: "+e),this.router.navigate([e])}}))}getMyDetails(){return Cf(this,void 0,void 0,(function*(){this.signingIn=!0;try{yield this.contactService.getMyDetails(),yield this.contactService.setAuthProviderForTeams(!1)}catch(e){this.signInFail=!0,this.error="Failed to get access token",console.error(this.error)}finally{this.signingIn=!1}}))}tryAgain(){this.signingIn=!1,this.signInFail=!1;const e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}}return e.\u0275fac=function(t){return new(t||e)(No(Am),No(Gd),No(Ph))},e.\u0275cmp=lt({type:e,selectors:[["app-login-helper"]],decls:5,vars:3,consts:[[1,"outer-container"],[1,"inner-container"],[4,"ngIf"],[1,"header"],[1,"message"],[1,"login-button",3,"click"],[1,"signing-in"],[1,"sign-in-unsuccess"],[1,"try-again-button",3,"click"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Uo(2,ib,10,9,"ng-container",2),Uo(3,ob,4,3,"ng-container",2),Uo(4,sb,7,6,"ng-container",2),Fo(),Fo()),2&e&&(Ur(2),Do("ngIf",!t.signingIn&&!t.signInFail),Ur(1),Do("ngIf",t.signingIn&&!t.signInFail),Ur(1),Do("ngIf",t.signInFail))},directives:[Xc],pipes:[uy],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.outer-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;width:400px;height:300px;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:600;font-size:20px;background:linear-gradient(0deg,hsla(0,0%,100%,.08),hsla(0,0%,100%,.08)),#fff;box-shadow:10px 10px 24px rgba(166,180,200,.5);border-radius:16px}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:50px}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{width:400px;text-align:center}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{color:#fff;cursor:pointer;width:200px;height:40px;font-size:15px;border:none;background:linear-gradient(180deg,transparent 2.62%,rgba(0,0,0,.08) 98.87%),#0073d0;border-radius:8px;margin-top:50px}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%], .outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .signing-in[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .signing-in[_ngcontent-%COMP%]{color:#3c3a38;font-size:20px}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .sign-in-unsuccess[_ngcontent-%COMP%]{color:#3c3a38;font-size:20px}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .sign-in-unsuccess[_ngcontent-%COMP%], .outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .try-again-button[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.outer-container[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .try-again-button[_ngcontent-%COMP%]{color:#fff;cursor:pointer;width:120px;height:40px;font-size:15px;border:none;background:linear-gradient(180deg,transparent 2.62%,rgba(0,0,0,.08) 98.87%),#0073d0;border-radius:8px;margin-top:50px}"]}),e})(),cb=(()=>{class e{constructor(e,t){this.router=e,this.authService=t}canActivate(e){return Cf(this,void 0,void 0,(function*(){if(yield this.authService.isLoggedIn())return console.log("[AuthGuard.canActivate]: user is already logged in"),!0;const t=rb.getLoginUrl(e.url[0].path);return console.log("[AuthGuard.canActivate]: reditecting to login helper : "+t),this.router.navigate([t]),!1}))}}return e.\u0275fac=function(t){return new(t||e)(We(Gd),We(Em))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ub(e,t){1&e&&(jo(0,"div"),jo(1,"div",2),jo(2,"div",3),jo(3,"div",4),Vo(4,"div",5),Vo(5,"div",6),Vo(6,"div",7),Fo(),Vo(7,"div",8),Fo(),Fo(),Fo())}const lb=function(e){return{"background-image":e}};function hb(e,t){if(1&e&&Vo(0,"div",17),2&e){const e=Jo(2);Do("ngStyle",ha(1,lb,null==e.contact?null:e.contact.photo))}}function db(e,t){if(1&e&&(jo(0,"div",18),jo(1,"div",19),ss(2),Fo(),Fo()),2&e){const e=Jo(2);Ur(2),as(e.contact.initials)}}function fb(e,t){if(1&e){const e=Bo();Ho(0),jo(1,"div",22),Ko("click",(function(){an(e);const n=t.$implicit,r=Jo(3);return r.selectPhoneNumber(r.contact,n)})),ss(2),Fo(),qo()}if(2&e){const e=t.$implicit;Ur(2),as(e.number)}}function pb(e,t){if(1&e&&(jo(0,"div",20),Uo(1,fb,3,1,"ng-container",21),Fo()),2&e){const e=Jo(2);Ur(1),Do("ngForOf",e.contact.filteredPhoneNumbers)}}function gb(e,t){if(1&e){const e=Bo();jo(0,"div",23),Ko("click",(function(){return an(e),Jo(2).togglePhoneList()})),Fo()}}const mb=function(e){return{"disable-call":e}};function yb(e,t){if(1&e){const e=Bo();jo(0,"div"),jo(1,"div",2),jo(2,"div",3),jo(3,"div",4),Uo(4,hb,1,3,"div",9),Uo(5,db,3,1,"div",10),jo(6,"div",11),ss(7),Fo(),jo(8,"span",12),jo(9,"span",13),ss(10),Fo(),Fo(),Uo(11,pb,2,1,"div",14),Uo(12,gb,1,0,"div",15),Fo(),jo(13,"div",16),Ko("click",(function(){an(e);const t=Jo();return t.dialHandler(t.contact.selectedPhoneNumber)})),Fo(),Fo(),Fo(),Fo()}if(2&e){const e=Jo();Ur(4),Do("ngIf",e.contact.photo),Ur(1),Do("ngIf",!e.contact.photo),Ur(2),as(null==e.contact?null:e.contact.displayName),Ur(3),cs(" ",null==e.contact?null:e.contact.selectedPhoneNumber," "),Ur(1),Do("ngIf",e.showAllPhones),Ur(1),Do("ngIf",e.contact.hasMoreThanOnePhoneNumbers),Ur(1),Do("ngClass",ha(7,mb,!e.contact.hasPhoneNumber))}}function vb(e,t){if(1&e){const e=Bo();jo(0,"div",24),jo(1,"div",25),ss(2),pa(3,"translate"),Fo(),jo(4,"div",26),ss(5),Fo(),jo(6,"button",27),Ko("click",(function(){return an(e),Jo().closeMessage()})),ss(7,"OK"),Fo(),Fo()}if(2&e){const e=Jo();Ur(2),as(ga(3,2,"message.header")),Ur(3),as(e.message)}}const bb=[{path:"loginhelper",component:ab},{path:"compose-loginhelper",component:ab},{path:"dialer",component:yf},{path:"teamsauthpopup",component:tb},{path:"tab",component:eb,canActivate:[cb]},{path:"conv-member",component:(()=>{class e{constructor(e,t,n,r,i){this.contactService=e,this.document=t,this.msTeams=n,this.softphoneLauncher=r,this.translate=i,this.error="",this.message="",this.showAllPhones=!1,this.window=this.document.defaultView}ngOnInit(){try{this.msTeams.initialize(this.window),this.msTeams.getContext(e=>{e&&(console.log("MS Teams channel context: "+JSON.stringify(e)),e.teamId?this.message=this.translate.instant("message.teams"):e.chatId||e.teamId||(this.message=this.translate.instant("message.bot")),this.getContactDetails(e))})}catch(e){this.error=e.message}}get showContactInfo(){return!!this.contact&&!this.message}get showLoader(){return!this.contact&&!this.message}get showMessage(){return!!this.contact&&!!this.message||!this.contact&&!!this.message}togglePhoneList(){this.showAllPhones=!this.showAllPhones}selectPhoneNumber(e,t){e.selectPhoneNumber(t.number),this.showAllPhones=!1}getContactDetails(e){return Cf(this,void 0,void 0,(function*(){let t="";Om([this.contactService.getMyDetails(),this.contactService.getConversationMembers(e.chatId)]).subscribe(([e,n])=>Cf(this,void 0,void 0,(function*(){n.length>2&&(this.message=this.translate.instant("message.group")),t=n.find(t=>t.userId!==e.id).userId;const r=yield this.contactService.getContact(t);this.contact=r,this.updateContactPhones(r),this.updateContactPhoto(r)})),t=>{this.error=t.message,e.chatId&&!e.teamId&&"Not Found"===this.error&&(this.message=this.translate.instant("message.fresh-coversation"))})}))}updateContactPhoto(e){return Cf(this,void 0,void 0,(function*(){const t=yield this.contactService.getContactPhoto(e.id);return e.updatePhoto(t)}))}updateContactPhones(e){return Cf(this,void 0,void 0,(function*(){const t=yield this.contactService.getContactPhones(e.id);return e.updatePhones(t)}))}dialHandler(e=""){this.softphoneLauncher.dial(e)}closeMessage(){this.msTeams.tasks&&this.msTeams.tasks.submitTask()}}return e.\u0275fac=function(t){return new(t||e)(No(Am),No(Ic),No(ff),No(gf),No(cy))},e.\u0275cmp=lt({type:e,selectors:[["app-conversation-member"]],decls:3,vars:3,consts:[[4,"ngIf"],["class","message-container",4,"ngIf"],[1,"container"],[1,"card"],[1,"details"],[1,"user-photo","loading"],[1,"load-user-name","loading"],[1,"load-address","loading"],[1,"call","loading"],["class","user-photo user-photo-backgrnd",3,"ngStyle",4,"ngIf"],["randomColor","","class","user-photo",4,"ngIf"],[1,"user-name"],[1,"address"],[1,"user-phone"],["class","dropdown",4,"ngIf"],["class","dropdown-icon",3,"click",4,"ngIf"],[1,"call","call-backgrnd",3,"ngClass","click"],[1,"user-photo","user-photo-backgrnd",3,"ngStyle"],["randomColor","",1,"user-photo"],[1,"avatar"],[1,"dropdown"],[4,"ngFor","ngForOf"],[1,"phone-number",3,"click"],[1,"dropdown-icon",3,"click"],[1,"message-container"],[1,"message-header"],[1,"message"],[1,"ok-button",3,"click"]],template:function(e,t){1&e&&(Uo(0,ub,8,0,"div",0),Uo(1,yb,14,9,"div",0),Uo(2,vb,8,4,"div",1)),2&e&&(Do("ngIf",t.showLoader),Ur(1),Do("ngIf",t.showContactInfo),Ur(1),Do("ngIf",t.showMessage))},directives:[Xc,Jc,nu,vv,Qc],pipes:[uy],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow-y:hidden}#app-loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;border:10px solid #f3f3f3;border-top-color:#0073d0;border-radius:50%;width:50px;height:50px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:100%;height:100%;margin:0;padding:0}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;margin:auto 0;padding:1.4286em 0;width:100%;overflow:hidden;text-align:center;z-index:5}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .user-photo[_ngcontent-%COMP%]{display:inline-block;position:relative;width:6.4286em;height:6.4286em;margin-bottom:1.0714em;border-radius:50%;-webkit-user-select:none;user-select:none}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .user-photo-backgrnd[_ngcontent-%COMP%]{background-color:#fff;background-repeat:no-repeat;background-size:6.4286em 6.4286em;background-position:50%}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{text-align:center;font-size:40px;font-weight:500;color:#fff;line-height:2.5}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#464b51;font-weight:700;max-width:15.6111em;margin:0 auto .2777em;text-overflow:ellipsis;font-size:20px;outline:none!important;overflow:hidden;white-space:nowrap}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .load-user-name[_ngcontent-%COMP%]{width:15.6111em;height:25px;margin:0 auto .2777em}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]   .user-phone[_ngcontent-%COMP%]{display:block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;color:#464b51;font-weight:600;max-width:18.75em;margin:0;text-overflow:ellipsis;font-size:20px;outline:none!important;overflow:hidden;white-space:nowrap}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .load-address[_ngcontent-%COMP%]{width:12em;height:25px;margin:0 auto .2777em}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:absolute;top:207px;left:112px;width:190px;max-height:27.4285em;overflow:auto;background-color:#fff;border-radius:8px;box-shadow:10px 10px 24px rgba(166,180,200,.5);z-index:100;font-size:20px;color:#464b51;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .phone-number[_ngcontent-%COMP%]{cursor:pointer;padding-top:5px;height:30px;font-size:20px;padding-right:25px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{position:absolute;bottom:128px;right:92px;background:url(dropdown.6e55d771a8f92419fbd8.svg);background-repeat:no-repeat;background-size:20px 20px;background-position:50%;width:20px;height:20px;cursor:pointer}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .call[_ngcontent-%COMP%]{display:inline-block;width:70px;height:70px;margin-top:30px;border-radius:50%;background-size:70px 70px}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .call-backgrnd[_ngcontent-%COMP%]{background-image:url(call-icon.71b003478117a1c5f569.svg);background-repeat:no-repeat;background-position:50%;opacity:1;color:#fff;cursor:pointer;pointer-events:auto}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .disable-call[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.message-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-direction:column;width:100%;height:50%;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:600;font-size:20px}.message-container[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{margin-top:30px;width:200px}.message-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], .message-container[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{margin-bottom:30px;margin-left:20px}.message-container[_ngcontent-%COMP%]   .ok-button[_ngcontent-%COMP%]{color:#fff;cursor:pointer;width:100px;height:40px;text-align:center;font-size:15px;font-weight:700;border:none;background:linear-gradient(180deg,transparent 2.62%,rgba(0,0,0,.08) 98.87%),#0073d0;box-shadow:10px 10px 24px rgba(166,180,200,.5),-12px -12px 20px hsla(0,0%,100%,.8);border-radius:8px;margin-left:250px;margin-top:50px}.loading[_ngcontent-%COMP%]{background-color:#ccc;background-image:linear-gradient(90deg,#f4f4f4,hsla(0,0%,89.8%,.8) 40px,#f4f4f4 80px);background-size:600px;animation:shine-lines 1s ease-out infinite}@keyframes shine-lines{0%{background-position:-100px}40%,to{background-position:140px}}@keyframes shine-avatar{0%{background-position:-32px}40%,to{background-position:208px}}"]}),e})(),canActivate:[cb]},{path:"web",component:nb},{path:"softphonelauncher",component:vf}];let wb=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},imports:[[nf.forRoot(bb,{useHash:!0})],nf]}),e})();var _b=n("iisZ");let Cb=(()=>{class e{constructor(e){this.teamsAuthService=e}init(){_b.register({response:e=>{switch(e.status){case 400:e.clone().json().then(e=>{((null==e?void 0:e.error_codes)||[]).includes(700081)&&(console.error("[FetchInterceptorService]: refresh token expired redirecting to login page"),this.teamsAuthService.resetAuthState())});break;case 401:console.error("[FetchInterceptorService]: access token expired redirecting to login page"),this.teamsAuthService.resetAuthState()}return e}})}}return e.\u0275fac=function(t){return new(t||e)(We(Tm))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Sb=n("Nt7R"),Eb=function(){return(Eb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Tb=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ab=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Tb(arguments[t]));return e},Ib=new Sb.a("Hub"),Ob="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",xb=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","xr"],this.name=e}return e.prototype.remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find((function(t){return t.pattern.source===e.source}));if(!n)return void Ib.warn("No listeners for "+e);this.patterns=Ab(this.patterns.filter((function(e){return e!==n})))}else{var r=this.listeners[e];if(!r)return void Ib.warn("No listeners for "+e);this.listeners[e]=Ab(r.filter((function(e){return e.callback!==t})))}},e.prototype.dispatch=function(e,t,n,r){void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1&&(r===Ob||Ib.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences"));var i={channel:e,payload:Eb({},t),source:n,patternInfo:[]};try{this._toListeners(i)}catch(o){Ib.error(o)}},e.prototype.listen=function(e,t,n){var r,i=this;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))Ib.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var o=this.listeners[e];o||(this.listeners[e]=o=[]),o.push({name:n,callback:r})}return function(){i.remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach((function(r){Ib.debug("Dispatching to "+t+" with ",n);try{r.callback(e)}catch(i){Ib.error(i)}})),this.patterns.length>0){if(!n.message)return void Ib.warn("Cannot perform pattern matching without a message key");var i=n.message;this.patterns.forEach((function(t){var n=i.match(t.pattern);if(n){var r=Tb(n).slice(1),o=Eb(Eb({},e),{patternInfo:r});try{t.callback(o)}catch(s){Ib.error(s)}}}))}},e}())("__default__"),Pb=new Sb.a("Parser"),kb=function(e){var t,n={};return e.aws_mobile_analytics_app_id&&(n.Analytics={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}}),(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),Pb.debug("parse config",e,"to amplifyconfig",n),n},Rb=function(){function e(){}return e.parseMobilehubConfig=kb,e}(),Mb=n("fQM2"),Ub=new Sb.a("ClientDevice_Browser"),Nb=function(){function e(){}return e.clientInfo=function(){return"undefined"==typeof window?{}:function(){if("undefined"==typeof window)return Ub.warn("No window object available to get browser client info"),{};var e=window.navigator;if(!e)return Ub.warn("No navigator object available to get browser client info"),{};var t,n=e.platform,r=e.product,i=e.vendor,o=e.language,s=function(e){var t=/.+(Opera[\s[A-Z]*|OPR[\sA-Z]*)\/([0-9\.]+).*/i.exec(e);if(t)return{type:t[1],version:t[2]};var n=/.+(Trident|Edge)\/([0-9\.]+).*/i.exec(e);if(n)return{type:n[1],version:n[2]};var r=/.+(Chrome|Firefox|FxiOS)\/([0-9\.]+).*/i.exec(e);if(r)return{type:r[1],version:r[2]};var i=/.+(Safari)\/([0-9\.]+).*/i.exec(e);if(i)return{type:i[1],version:i[2]};var o=/.+(AppleWebKit)\/([0-9\.]+).*/i.exec(e);if(o)return{type:o[1],version:o[2]};var s=/.*([A-Z]+)\/([0-9\.]+).*/i.exec(e);return s?{type:s[1],version:s[2]}:{type:"",version:""}}(e.userAgent),a=(t=/\(([A-Za-z\s].*)\)/.exec((new Date).toString()))&&t[1]||"";return{platform:n,make:r||i,model:s.type,version:s.version,appVersion:[s.type,s.version].join("/"),language:o,timezone:a}}()},e.dimension=function(){return"undefined"==typeof window?(Ub.warn("No window object available to get browser client info"),{width:320,height:320}):{width:window.innerWidth,height:window.innerHeight}},e}(),Db=n("xxdO"),Lb=n("7Z+r"),jb=n("CxY0"),Fb={clockOffset:0,getDateWithClockOffset:function(){return Fb.clockOffset?new Date((new Date).getTime()+Fb.clockOffset):new Date},getClockOffset:function(){return Fb.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=Fb.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[2],r=t[3],i=t[4],o=t[5],s=t[6];return new Date(Date.UTC(Number(t[1]),Number(n)-1,Number(r),Number(i),Number(o),Number(s)))},isClockSkewed:function(e){return Math.abs(e.getTime()-Fb.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean("BadRequestException"===t["x-amzn-errortype"]&&(t.date||t.Date))},setClockOffset:function(e){Fb.clockOffset=e}},Vb=function(){return(Vb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Hb=new Sb.a("Signer"),qb="AWS4-HMAC-SHA256",Bb=function(e,t){var n=new Db.Sha256(e);return n.update(t),n.digestSync()},zb=function(e){var t=e||"",n=new Db.Sha256;return n.update(t),Object(Lb.a)(n.digestSync())},Gb=function(e){return Object.keys(e).map((function(e){return e.toLowerCase()})).sort().join(";")},Kb=function(e){var t,n,r=Object(jb.parse)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map((function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return t[0]+"="+n})).sort((function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1})).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map((function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}})).sort((function(e,t){return e.key<t.key?-1:1})).map((function(e){return e.key+":"+e.value})).join("\n")+"\n":""),Gb(e.headers),zb(e.data)].join("\n")},Wb=function(e){var t=(Object(jb.parse)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},$b=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},Jb=function(e,t,n,r){return[e,n,r,zb(t)].join("\n")},Yb=function(e,t,n){Hb.debug(n);var r=Bb("AWS4"+e,t),i=Bb(r,n.region),o=Bb(i,n.service);return Bb(o,"aws4_request")},Qb=function(e,t){return Object(Lb.a)(Bb(e,t))},Zb=function(){function e(){}return e.sign=function(e,t,n){void 0===n&&(n=null),e.headers=e.headers||{};var r=Fb.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=Object(jb.parse)(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var s=Kb(e);Hb.debug(s);var a=n||Wb(e),c=$b(i,a.region,a.service),u=Jb(qb,s,r,c),l=Yb(t.secret_key,i,a),h=Qb(l,u),d=function(e,t,n,r,i){return["AWS4-HMAC-SHA256 Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,t.access_key,c,Gb(e.headers),h);return e.headers.Authorization=d,e},e.signUrl=function(e,t,n,r){var i="object"==typeof e?e.url:e,o="object"==typeof e?e.method:"GET",s="object"==typeof e?e.body:void 0,a=Fb.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),c=a.substr(0,8),u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(Object(jb.parse)(i,!0,!0),["search"]),l={host:u.host},h=n||Wb({url:Object(jb.format)(u)}),d=h.region,f=h.service,p=$b(c,d,f),g=t.session_token&&"iotdevicegateway"!==f,m=Vb(Vb(Vb({"X-Amz-Algorithm":qb,"X-Amz-Credential":[t.access_key,p].join("/"),"X-Amz-Date":a.substr(0,16)},g?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(l).join(",")}),y=Kb({method:o,url:Object(jb.format)(Vb(Vb({},u),{query:Vb(Vb({},u.query),m)})),headers:l,data:s}),v=Jb(qb,y,a,p),b=Yb(t.secret_key,c,{region:d,service:f}),w=Qb(b,v),_=Vb({"X-Amz-Signature":w},t.session_token&&{"X-Amz-Security-Token":t.session_token});return Object(jb.format)({protocol:u.protocol,slashes:!0,hostname:u.hostname,port:u.port,pathname:u.pathname,query:Vb(Vb(Vb({},u.query),m),_)})},e}(),Xb=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],ew=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},tw=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort((function(e,n){var i=e[t],o=n[t];return void 0===o?void 0===i?0:1*r:void 0===i||i<o?-1*r:i>o?1*r:0})),!0},nw=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach((function(e){delete n[e]}))),n},rw=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),r=Xb.filter((function(e){return n.endsWith("."+e.ext)}));return r.length>0?r[0].type:t},iw=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||"application/json"===t||"application/xml"===t||"application/sh"===t},ow=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},sw=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then((function(e){return r=!0,t=!1,e}),(function(e){throw n=!0,t=!1,e}));return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},aw=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope},cw=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}},uw=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!hw(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=n.includes(i)?e[i]:uw(e[i],t,n));return r},lw=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!hw(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=n.includes(i)?e[i]:lw(e[i],t,n));return r},hw=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},dw=function(){function e(){}return e.isEmpty=ew,e.sortByField=tw,e.objectLessAttributes=nw,e.filenameToContentType=rw,e.isTextFile=iw,e.generateRandomString=ow,e.makeQuerablePromise=sw,e.isWebWorker=aw,e.browserOrNode=cw,e.transferKeyToLowerCase=uw,e.transferKeyToUpperCase=lw,e.isStrictObject=hw,e}(),fw="aws-amplify/3.8.6",pw={userAgent:fw+" js",product:"",navigator:null,isReactNative:!1};if("undefined"!=typeof navigator&&navigator.product)switch(pw.product=navigator.product||"",pw.navigator=navigator||null,navigator.product){case"ReactNative":pw.userAgent=fw+" react-native",pw.isReactNative=!0;break;default:pw.userAgent=fw+" js",pw.isReactNative=!1}var gw,mw,yw,vw,bw,ww,_w,Cw,Sw,Ew,Tw,Aw,Iw,Ow,xw,Pw,kw,Rw,Mw,Uw,Nw,Dw,Lw,jw,Fw,Vw,Hw,qw,Bw,zw,Gw,Kw,Ww,$w,Jw,Yw,Qw,Zw,Xw,e_,t_,n_,r_,i_,o_,s_,a_,c_,u_,l_,h_,d_,f_,p_,g_,m_,y_,v_=function(){return pw.userAgent},b_={},w_=function(){function e(){}return e.setItem=function(e,t){return b_[e]=t,b_[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(b_,e)?b_[e]:void 0},e.removeItem=function(e){return delete b_[e]},e.clear=function(){return b_={}},e}(),__=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=w_}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),C_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},E_=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S_(arguments[t]));return e},T_=new Sb.a("Util"),A_=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return C_(t,e),t}(Error),I_=new Sb.a("CognitoCredentials"),O_=new Promise((function(e,t){return cw().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(I_.debug("google api already loaded"),e()):void setTimeout((function(){return e()}),2e3):(I_.debug("not in the browser, directly resolved"),e())})),x_=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(I_.debug("need to wait for the Google SDK loaded"),[4,O_]);case 1:e.sent(),this.initialized=!0,I_.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))},new((t=void 0)||(t=Promise))((function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}a((n=n.apply(e,[])).next())}));var e,t,n},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return cw().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise((function(t,n){e.getAuthInstance().then((function(e){e||(I_.debug("google Auth undefined"),n(new A_("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(I_.debug("refreshing the google access token"),r.reloadAuthResponse().then((function(e){t({token:e.id_token,expires_at:e.expires_at})})).catch((function(e){n(e&&"network_error"===e.error?"Network error reloading google auth response":new A_("Failed to reload google auth response"))}))):n(new A_("User is not signed in with Google"))})).catch((function(e){I_.debug("Failed to refresh google token",e),n(new A_("Failed to refresh google token"))}))})):(I_.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),P_=new Sb.a("CognitoCredentials"),k_=new Promise((function(e,t){return cw().isBrowser?window.FB?(P_.debug("FB SDK already loaded"),e()):void setTimeout((function(){return e()}),2e3):(P_.debug("not in the browser, directly resolved"),e())})),R_=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return e=this,void 0,n=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(P_.debug("need to wait for the Facebook SDK loaded"),[4,k_]);case 1:e.sent(),this.initialized=!0,P_.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))},new((t=void 0)||(t=Promise))((function(r,i){function o(e){try{a(n.next(e))}catch(t){i(t)}}function s(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}a((n=n.apply(e,[])).next())}));var e,t,n},e.prototype._refreshFacebookTokenImpl=function(){var e=null;if(cw().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return P_.debug(t),Promise.reject(new A_(t))}return new Promise((function(t,n){e.getLoginStatus((function(e){if(e&&e.authResponse){var r=e.authResponse,i=r.accessToken,o=1e3*r.expiresIn+(new Date).getTime();i||(P_.debug(s="the jwtToken is undefined"),n(new A_(s))),t({token:i,expires_at:o})}else{var s;P_.debug(s="no response from facebook when refreshing the jwt token"),n(new A_(s))}}),{scope:"public_profile,email"})}))},e}(),M_=new x_,U_=new R_;!function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(gw||(gw={})),(mw||(mw={})).filterSensitiveLog=function(e){return _f({},e)},(yw||(yw={})).filterSensitiveLog=function(e){return _f({},e)},(vw||(vw={})).filterSensitiveLog=function(e){return _f({},e)},(bw||(bw={})).filterSensitiveLog=function(e){return _f({},e)},(ww||(ww={})).filterSensitiveLog=function(e){return _f({},e)},(_w||(_w={})).filterSensitiveLog=function(e){return _f({},e)},(Cw||(Cw={})).filterSensitiveLog=function(e){return _f({},e)},(Sw||(Sw={})).filterSensitiveLog=function(e){return _f({},e)},(Ew||(Ew={})).filterSensitiveLog=function(e){return _f({},e)},(Tw||(Tw={})).filterSensitiveLog=function(e){return _f({},e)},function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(Aw||(Aw={})),(Iw||(Iw={})).filterSensitiveLog=function(e){return _f({},e)},(Ow||(Ow={})).filterSensitiveLog=function(e){return _f({},e)},(xw||(xw={})).filterSensitiveLog=function(e){return _f({},e)},(Pw||(Pw={})).filterSensitiveLog=function(e){return _f({},e)},(kw||(kw={})).filterSensitiveLog=function(e){return _f({},e)},(Rw||(Rw={})).filterSensitiveLog=function(e){return _f({},e)},(Mw||(Mw={})).filterSensitiveLog=function(e){return _f({},e)},(Uw||(Uw={})).filterSensitiveLog=function(e){return _f({},e)},(Nw||(Nw={})).filterSensitiveLog=function(e){return _f({},e)},(Dw||(Dw={})).filterSensitiveLog=function(e){return _f({},e)},(Lw||(Lw={})).filterSensitiveLog=function(e){return _f({},e)},(jw||(jw={})).filterSensitiveLog=function(e){return _f({},e)},(Fw||(Fw={})).filterSensitiveLog=function(e){return _f({},e)},(Vw||(Vw={})).filterSensitiveLog=function(e){return _f({},e)},(Hw||(Hw={})).filterSensitiveLog=function(e){return _f({},e)},function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(qw||(qw={})),(Bw||(Bw={})).filterSensitiveLog=function(e){return _f({},e)},(zw||(zw={})).filterSensitiveLog=function(e){return _f({},e)},function(e){e.RULES="Rules",e.TOKEN="Token"}(Gw||(Gw={})),(Kw||(Kw={})).filterSensitiveLog=function(e){return _f({},e)},(Ww||(Ww={})).filterSensitiveLog=function(e){return _f({},e)},($w||($w={})).filterSensitiveLog=function(e){return _f({},e)},(Jw||(Jw={})).filterSensitiveLog=function(e){return _f({},e)},(Yw||(Yw={})).filterSensitiveLog=function(e){return _f({},e)},(Qw||(Qw={})).filterSensitiveLog=function(e){return _f({},e)},(Zw||(Zw={})).filterSensitiveLog=function(e){return _f({},e)},(Xw||(Xw={})).filterSensitiveLog=function(e){return _f({},e)},(e_||(e_={})).filterSensitiveLog=function(e){return _f({},e)},(t_||(t_={})).filterSensitiveLog=function(e){return _f({},e)},(n_||(n_={})).filterSensitiveLog=function(e){return _f({},e)},(r_||(r_={})).filterSensitiveLog=function(e){return _f({},e)},(i_||(i_={})).filterSensitiveLog=function(e){return _f({},e)},(o_||(o_={})).filterSensitiveLog=function(e){return _f({},e)},(s_||(s_={})).filterSensitiveLog=function(e){return _f({},e)},(a_||(a_={})).filterSensitiveLog=function(e){return _f({},e)},(c_||(c_={})).filterSensitiveLog=function(e){return _f({},e)},(u_||(u_={})).filterSensitiveLog=function(e){return _f({},e)},(l_||(l_={})).filterSensitiveLog=function(e){return _f({},e)},(h_||(h_={})).filterSensitiveLog=function(e){return _f({},e)},(d_||(d_={})).filterSensitiveLog=function(e){return _f({},e)},(f_||(f_={})).filterSensitiveLog=function(e){return _f({},e)},(p_||(p_={})).filterSensitiveLog=function(e){return _f({},e)},(g_||(g_={})).filterSensitiveLog=function(e){return _f({},e)},(m_||(m_={})).filterSensitiveLog=function(e){return _f({},e)},(y_||(y_={})).filterSensitiveLog=function(e){return _f({},e)};var N_=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){return!!e&&"number"==typeof e.statusCode&&"object"==typeof e.headers},e}(),D_=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){return!!e&&"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers},e.prototype.clone=function(){var t,n=new e(Object(Tf.__assign)(Object(Tf.__assign)({},this),{headers:Object(Tf.__assign)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,i=t[n];return Object(Tf.__assign)(Object(Tf.__assign)({},e),((r={})[n]=Array.isArray(i)?Object(Tf.__spread)(i):i,r))}),{}))),n},e}(),L_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l,h,d,f,p,g,m,y;return Sf(this,(function(v){switch(v.label){case 0:return r=[_f({},e)],y={},[4,aC(e.body,t)];case 1:switch(n=_f.apply(void 0,r.concat([(y.body=v.sent(),y)])),o="UnknownError",s=n.body.__type.split("#"),o=void 0===s[1]?s[0]:s[1]){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return a=[{}],[4,F_(n,t)];case 3:return i=_f.apply(void 0,[_f.apply(void 0,a.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 4:return c=[{}],[4,V_(n,t)];case 5:return i=_f.apply(void 0,[_f.apply(void 0,c.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 6:return u=[{}],[4,H_(n,t)];case 7:return i=_f.apply(void 0,[_f.apply(void 0,u.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 8:return l=[{}],[4,q_(n,t)];case 9:return i=_f.apply(void 0,[_f.apply(void 0,l.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 10:return h=[{}],[4,z_(n,t)];case 11:return i=_f.apply(void 0,[_f.apply(void 0,h.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 12:return d=[{}],[4,G_(n,t)];case 13:return i=_f.apply(void 0,[_f.apply(void 0,d.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 14:return f=[{}],[4,K_(n,t)];case 15:return i=_f.apply(void 0,[_f.apply(void 0,f.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 16:return p=[{}],[4,W_(n,t)];case 17:return i=_f.apply(void 0,[_f.apply(void 0,p.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 18:o=(g=n.body).code||g.Code||o,i=_f(_f({},g),{name:""+o,message:g.message||g.Message||o,$fault:"client",$metadata:oC(e)}),v.label=19;case 19:return i.message=m=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(m),i))]}}))}))},j_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l,h,d,f,p,g,m,y;return Sf(this,(function(v){switch(v.label){case 0:return r=[_f({},e)],y={},[4,aC(e.body,t)];case 1:switch(n=_f.apply(void 0,r.concat([(y.body=v.sent(),y)])),o="UnknownError",s=n.body.__type.split("#"),o=void 0===s[1]?s[0]:s[1]){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return a=[{}],[4,F_(n,t)];case 3:return i=_f.apply(void 0,[_f.apply(void 0,a.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 4:return c=[{}],[4,V_(n,t)];case 5:return i=_f.apply(void 0,[_f.apply(void 0,c.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 6:return u=[{}],[4,q_(n,t)];case 7:return i=_f.apply(void 0,[_f.apply(void 0,u.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 8:return l=[{}],[4,B_(n,t)];case 9:return i=_f.apply(void 0,[_f.apply(void 0,l.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 10:return h=[{}],[4,z_(n,t)];case 11:return i=_f.apply(void 0,[_f.apply(void 0,h.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 12:return d=[{}],[4,G_(n,t)];case 13:return i=_f.apply(void 0,[_f.apply(void 0,d.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 14:return f=[{}],[4,K_(n,t)];case 15:return i=_f.apply(void 0,[_f.apply(void 0,f.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 16:return p=[{}],[4,W_(n,t)];case 17:return i=_f.apply(void 0,[_f.apply(void 0,p.concat([v.sent()])),{name:o,$metadata:oC(e)}]),[3,19];case 18:o=(g=n.body).code||g.Code||o,i=_f(_f({},g),{name:""+o,message:g.message||g.Message||o,$fault:"client",$metadata:oC(e)}),v.label=19;case 19:return i.message=m=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(m),i))]}}))}))},F_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=Y_(e.body,t),[2,_f({name:"ExternalServiceException",$fault:"client",$metadata:oC(e)},n)]}))}))},V_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=Q_(e.body,t),[2,_f({name:"InternalErrorException",$fault:"server",$metadata:oC(e)},n)]}))}))},H_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=Z_(e.body,t),[2,_f({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:oC(e)},n)]}))}))},q_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=X_(e.body,t),[2,_f({name:"InvalidParameterException",$fault:"client",$metadata:oC(e)},n)]}))}))},B_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=eC(e.body,t),[2,_f({name:"LimitExceededException",$fault:"client",$metadata:oC(e)},n)]}))}))},z_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=tC(e.body,t),[2,_f({name:"NotAuthorizedException",$fault:"client",$metadata:oC(e)},n)]}))}))},G_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=nC(e.body,t),[2,_f({name:"ResourceConflictException",$fault:"client",$metadata:oC(e)},n)]}))}))},K_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=rC(e.body,t),[2,_f({name:"ResourceNotFoundException",$fault:"client",$metadata:oC(e)},n)]}))}))},W_=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n;return Sf(this,(function(r){return n=iC(e.body,t),[2,_f({name:"TooManyRequestsException",$fault:"client",$metadata:oC(e)},n)]}))}))},$_=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ef(t,2),i=r[0],o=r[1];return _f(_f({},e),((n={})[i]=o,n))}),{})},J_=function(e,t){return{AccessKeyId:null!=e.AccessKeyId?e.AccessKeyId:void 0,Expiration:null!=e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:null!=e.SecretKey?e.SecretKey:void 0,SessionToken:null!=e.SessionToken?e.SessionToken:void 0}},Y_=function(e,t){return{message:null!=e.message?e.message:void 0}},Q_=function(e,t){return{message:null!=e.message?e.message:void 0}},Z_=function(e,t){return{message:null!=e.message?e.message:void 0}},X_=function(e,t){return{message:null!=e.message?e.message:void 0}},eC=function(e,t){return{message:null!=e.message?e.message:void 0}},tC=function(e,t){return{message:null!=e.message?e.message:void 0}},nC=function(e,t){return{message:null!=e.message?e.message:void 0}},rC=function(e,t){return{message:null!=e.message?e.message:void 0}},iC=function(e,t){return{message:null!=e.message?e.message:void 0}},oC=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},sC=function(e,t,n,r,i){return Cf(void 0,void 0,void 0,(function(){var o,s,a;return Sf(this,(function(c){switch(c.label){case 0:return[4,e.endpoint()];case 1:return o=c.sent(),a={protocol:void 0===(s=o.protocol)?"https":s,hostname:o.hostname,port:o.port,method:"POST",path:n,headers:t},void 0!==r&&(a.hostname=r),void 0!==i&&(a.body=i),[2,new D_(a)]}}))}))},aC=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},cC={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},uC={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function lC(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(i){return Object(Tf.__awaiter)(void 0,void 0,void 0,(function(){var o,s,a,c,u;return Object(Tf.__generator)(this,(function(l){switch(l.label){case 0:return o=r.logger,s=r.outputFilterSensitiveLog,[4,n(i)];case 1:return a=l.sent().response,"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpResponse:a}),[4,t(a,e)];case 2:return c=l.sent(),u=Object(Tf.__rest)(c,["$metadata"]),"function"==typeof(null==o?void 0:o.info)&&o.info({output:s(u)}),[2,{response:a,output:c}]}}))}))}}}(e,n),cC),r.add(function(e,t){return function(n,r){return function(i){return Object(Tf.__awaiter)(void 0,void 0,void 0,(function(){var o,s,a;return Object(Tf.__generator)(this,(function(c){switch(c.label){case 0:return s=r.inputFilterSensitiveLog,"function"==typeof(null==(o=r.logger)?void 0:o.info)&&o.info({input:s(i.input)}),[4,t(i.input,e)];case 1:return a=c.sent(),"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpRequest:a}),[2,n(Object(Tf.__assign)(Object(Tf.__assign)({},i),{request:a}))]}}))}))}}}(e,t),uC)}}}var hC=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach((function(e){n.add(e.middleware,Object(Tf.__assign)({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,Object(Tf.__assign)({},e))})),n},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(Tf.__spread)(i(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Object(Tf.__spread)(i(e)))})),t},o={add:function(t,r){void 0===r&&(r={});var i=r.name,o=Object(Tf.__assign)({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i))throw new Error("Duplicate middleware name '"+i+"'");n.add(i)}e.push(o)},addRelativeTo:function(e,r){var i=r.name,o=Object(Tf.__assign)({middleware:e},r);if(i){if(n.has(i))throw new Error("Duplicated middleware name '"+i+"'");n.add(i)}t.push(o)},clone:function(){return r(hC())},use:function(e){e.applyToStack(o)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(hC());return t.use(e),t},applyToStack:r,resolve:function(n,r){var o,s;try{for(var a=Object(Tf.__values)(function(){var n,r=[],o=[],s={};return e.forEach((function(e){var t=Object(Tf.__assign)(Object(Tf.__assign)({},e),{before:[],after:[]});t.name&&(s[t.name]=t),r.push(t)})),t.forEach((function(e){var t=Object(Tf.__assign)(Object(Tf.__assign)({},e),{before:[],after:[]});t.name&&(s[t.name]=t),o.push(t)})),o.forEach((function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(n=r,n.sort((function(e,t){return dC[t.step]-dC[e.step]||fC[t.priority||"normal"]-fC[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,Object(Tf.__spread)(t)),e}),[]).map((function(e){return e.middleware}))}().reverse()),c=a.next();!c.done;c=a.next())n=(0,c.value)(n,r)}catch(u){o={error:u}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return n}};return o},dC={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},fC={high:3,normal:2,low:1},pC=function(){function e(e){this.middlewareStack=hC(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"==typeof t?t:n,i=e.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!r)return i(e).then((function(e){return e.output}));i(e).then((function(e){return r(null,e.output)}),(function(e){return r(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),gC=function(){this.middlewareStack=hC()};function mC(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var yC=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,Object(Tf.__spread)([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n};yC.prototype=Object.create(String.prototype,{constructor:{value:yC,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(yC,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(Tf.__extends)(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(yC);var vC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return wf(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(lC(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="CognitoIdentityClient",s="GetCredentialsForIdentityCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:Nw.filterSensitiveLog,outputFilterSensitiveLog:Lw.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var c=t.requestHandler;return r.resolve((function(e){return c.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r;return Sf(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,t){return _f(_f(_f({},void 0!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&{Logins:$_(e.Logins)})}(e)),[2,sC(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i;return Sf(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,L_(e,t)]:[4,aC(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Credentials:null!=e.Credentials?J_(e.Credentials):void 0,IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(n),i=_f({$metadata:oC(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(gC),bC=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}return Object(Tf.__extends)(t,e),t}(Error);function wC(e){return Promise.all(Object.keys(e).reduce((function(t,n){var r=e[n];return t.push("string"==typeof r?[n,r]:r().then((function(e){return[n,e]}))),t}),[])).then((function(e){return e.reduce((function(e,t){var n=Object(Tf.__read)(t,2);return e[n[0]]=n[1],e}),{})}))}function _C(e){var t=this;return function(){return Object(Tf.__awaiter)(t,void 0,void 0,(function(){var t,n,r,i,o,s,a,c,u,l,h,d;return Object(Tf.__generator)(this,(function(f){switch(f.label){case 0:return u=(c=e.client).send,l=vC.bind,d={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,wC(e.logins)]:[3,2];case 1:return h=f.sent(),[3,3];case 2:h=void 0,f.label=3;case 3:return[4,u.apply(c,[new(l.apply(vC,[void 0,(d.Logins=h,d)]))])];case 4:return t=f.sent().Credentials,n=void 0===t?function(){throw new bC("Response from Amazon Cognito contained no credentials")}():t,i=void 0===(r=n.AccessKeyId)?function(){throw new bC("Response from Amazon Cognito contained no access key ID")}():r,o=n.Expiration,a=void 0===(s=n.SecretKey)?function(){throw new bC("Response from Amazon Cognito contained no secret key")}():s,[2,{identityId:e.identityId,accessKeyId:i,secretAccessKey:a,sessionToken:n.SessionToken,expiration:o}]}}))}))}}for(var CC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return wf(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(lC(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="CognitoIdentityClient",s="GetIdCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:Fw.filterSensitiveLog,outputFilterSensitiveLog:Vw.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var c=t.requestHandler;return r.resolve((function(e){return c.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r;return Sf(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,t){return _f(_f(_f({},void 0!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&{Logins:$_(e.Logins)})}(e)),[2,sC(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i;return Sf(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,j_(e,t)]:[4,aC(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{IdentityId:null!=e.IdentityId?e.IdentityId:void 0}}(n),i=_f({$metadata:oC(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(gC),SC="IdentityIds",EC=function(){function e(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return e.prototype.getItem=function(e){return this.withObjectStore("readonly",(function(t){var n=t.get(e);return new Promise((function(e){n.onerror=function(){return e(null)},n.onsuccess=function(){return e(n.result?n.result.value:null)}}))})).catch((function(){return null}))},e.prototype.removeItem=function(e){return this.withObjectStore("readwrite",(function(t){var n=t.delete(e);return new Promise((function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}}))}))},e.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",(function(n){var r=n.put({id:e,value:t});return new Promise((function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}}))}))},e.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(){var t=e.result;t.onerror=function(){n(new Error("Failed to create object store"))},t.createObjectStore(SC,{keyPath:"id"})}}))},e.prototype.withObjectStore=function(e,t){return this.getDb().then((function(n){var r=n.transaction(SC,e);return r.oncomplete=function(){return n.close()},new Promise((function(e,n){r.onerror=function(){return n(r.error)},e(t(r.objectStore(SC)))})).catch((function(e){throw n.close(),e}))}))},e}(),TC=new(function(){function e(e){void 0===e&&(e={}),this.store=e}return e.prototype.getItem=function(e){return e in this.store?this.store[e]:null},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}()),AC=n("+KNX"),IC=n("viNG"),OC=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,xC)},xC=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},PC=function(){function e(e){void 0===e&&(e={}),this.httpOptions=e}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=null==t?void 0:t.abortSignal,r=this.httpOptions.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var s=function(e){var t,n,r=[];try{for(var i=Object(Tf.__values)(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=OC(s),Array.isArray(a))for(var c=0,u=a.length;c<u;c++)r.push(s+"="+OC(a[c]));else{var l=s;(a||"string"==typeof a)&&(l+="="+OC(a)),r.push(l)}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query);s&&(o+="?"+s)}var a=e.port,c=e.protocol+"//"+e.hostname+(a?":"+a:"")+o,u={body:e.body,headers:new Headers(e.headers),method:e.method};"undefined"!=typeof AbortController&&(u.signal=n);var l,h=new Request(c,u),d=[fetch(h).then((function(e){var t,n,r=e.headers,i={};try{for(var o=Object(Tf.__values)(r.entries()),s=o.next();!s.done;s=o.next()){var a=s.value;i[a[0]]=a[1]}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new N_({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new N_({headers:i,statusCode:e.status,body:t})}}))})),(l=r,void 0===l&&(l=0),new Promise((function(e,t){l&&setTimeout((function(){var e=new Error("Request did not complete within "+l+" ms");e.name="TimeoutError",t(e)}),l)})))];return n&&d.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(d)},e}(),kC={},RC=new Array(64),MC=0,UC="A".charCodeAt(0),NC="Z".charCodeAt(0);MC+UC<=NC;MC++){var DC=String.fromCharCode(MC+UC);kC[DC]=MC,RC[MC]=DC}for(MC=0,UC="a".charCodeAt(0),NC="z".charCodeAt(0);MC+UC<=NC;MC++)DC=String.fromCharCode(MC+UC),kC[DC]=LC=MC+26,RC[LC]=DC;for(MC=0;MC<10;MC++){var LC;kC[MC.toString(10)]=MC+52,DC=MC.toString(10),kC[DC]=LC=MC+52,RC[LC]=DC}function jC(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,a=i,c=i+3;a<=c;a++)"="!==e[a]?(o|=kC[e[a]]<<6*(c-a),s+=6):o>>=6;var u=i/4*3;o>>=s%8;for(var l=Math.floor(s/8),h=0;h<l;h++){var d=8*(l-h-1);r.setUint8(u+h,(o&255<<d)>>d)}}return new Uint8Array(n)}function FC(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var a=Math.ceil(i/6);r<<=6*a-i;for(var c=1;c<=a;c++){var u=6*(a-c);t+=RC[(r&63<<u)>>u]}t+="==".slice(0,4-a)}return t}kC["+"]=62,RC[62]="+",kC["/"]=63,RC[63]="/";var VC=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(Tf.__generator)(this,(function(r){switch(r.label){case 0:return[4,HC(e)];case 1:return t=r.sent(),n=jC(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return Object(Tf.__generator)(this,(function(c){switch(c.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,c.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=c.sent(),o=i.done,(s=i.value)&&(a=t,(t=new Uint8Array(a.length+s.length)).set(a),t.set(s,a.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)};function HC(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(",");t(i.substring(o>-1?o+1:i.length))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}var qC=function(e){return function(){throw new Error(e)}},BC={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},zC=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(Tf.__awaiter)(void 0,void 0,void 0,(function(){return Object(Tf.__generator)(this,(function(r){return[2,e.retryStrategy.retry(t,n)]}))}))}}}(e),BC)}}},GC=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],KC=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],WC=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],$C=[500,502,503,504],JC=function(e){var t;return KC.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},YC=n("EcEN"),QC=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},ZC=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return GC.includes(e.name)}(e)||JC(e)||function(e){var t;return WC.includes(e.name)||$C.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},XC=function(){function e(e,t){var n,r,i,o,s,a;this.maxAttemptsProvider=e,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:ZC,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:QC,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(500,o=500,s=function(e){return"TimeoutError"===e.name?10:5},a=function(e){return s(e)<=o},Object.freeze({hasRetryTokens:a,retrieveRetryTokens:function(e){if(!a(e))throw new Error("No retry token available");var t=s(e);return o-=t,t},releaseRetryTokens:function(e){o+=null!=e?e:1,o=Math.min(o,500)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Tf.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,u;return Object(Tf.__generator)(this,(function(l){switch(l.label){case 0:return r=0,i=0,[4,this.getMaxAttempts()];case 1:o=l.sent(),D_.isInstance(s=t.request)&&(s.headers["amz-sdk-invocation-id"]=Object(YC.v4)()),a=function(){var a,u,l,h,d;return Object(Tf.__generator)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,2,,5]),D_.isInstance(s)&&(s.headers["amz-sdk-request"]="attempt="+(r+1)+"; max="+o),[4,e(t)];case 1:return a=f.sent(),u=a.response,l=a.output,c.retryQuota.releaseRetryTokens(n),l.$metadata.attempts=r+1,l.$metadata.totalRetryDelay=i,[2,{value:{response:u,output:l}}];case 2:return h=f.sent(),r++,c.shouldRetry(h,r,o)?(n=c.retryQuota.retrieveRetryTokens(h),d=c.delayDecider(JC(h)?500:100,r),i+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return f.sent(),[2,"continue"];case 4:throw h.$metadata||(h.$metadata={}),h.$metadata.attempts=r,h.$metadata.totalRetryDelay=i,h;case 5:return[2]}}))},c=this,l.label=2;case 2:return[5,a()];case 3:return"object"==typeof(u=l.sent())?[2,u.value]:[3,2];case 4:return[2]}}))}))},e}(),eS=function(e){var t=tS(e.maxAttempts);return Object(Tf.__assign)(Object(Tf.__assign)({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new XC(t)})},tS=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},nS=function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,s=n.protocol,a=n.search;return a&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=Object(Tf.__values)(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value,a=Object(Tf.__read)(s.split("="),2),c=a[0],u=a[1],l=void 0===u?null:u;c=decodeURIComponent(c),l&&(l=decodeURIComponent(l)),c in r?Array.isArray(r[c])?r[c].push(l):r[c]=[r[c],l]:r[c]=l}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(a)),{hostname:r,port:o?parseInt(o):void 0,protocol:s,path:i,query:t}};function rS(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}function iS(e,t){return"aws-sdk-js-v3-"+e+"/"+t+" "+("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}var oS=n("XWO8"),sS="cognito-identity.{region}.amazonaws.com",aS=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),cS=new Set(["cn-north-1","cn-northwest-1"]),uS=new Set(["us-iso-east-1"]),lS=new Set(["us-isob-east-1"]),hS=new Set(["us-gov-east-1","us-gov-west-1"]),dS=_f(_f({},{apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:aS.has(e)&&(n={hostname:sS.replace("{region}",e),partition:"aws"}),cS.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),uS.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),lS.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),hS.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:sS.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingName:"cognito-identity"}),{runtime:"browser",base64Decoder:jC,base64Encoder:FC,bodyLengthChecker:rS,credentialDefaultProvider:function(){},defaultUserAgent:iS(AC.name,AC.version),maxAttempts:3,region:qC("Region is missing"),requestHandler:new PC,sha256:IC.Sha256,streamCollector:VC,urlParser:nS,utf8Decoder:oS.fromUtf8,utf8Encoder:oS.toUtf8}),fS=function(e){var t;return Object(Tf.__assign)(Object(Tf.__assign)({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?pS(e):function(){return gS(e)},isCustomEndpoint:!!e.endpoint})},pS=function(e){var t=e.endpoint;if("string"==typeof t){var n=Promise.resolve((0,e.urlParser)(t));return function(){return n}}if("object"==typeof t){var r=Promise.resolve(t);return function(){return r}}return t},gS=function(e){return Object(Tf.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,o;return Object(Tf.__generator)(this,(function(s){switch(s.label){case 0:return n=void 0===(t=e.tls)||t,[4,e.region()];case 1:if(r=s.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(i=(null!==(o=s.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+i)]}}))}))},mS=function(e){if(!e.region)throw new Error("Region is missing");return Object(Tf.__assign)(Object(Tf.__assign)({},e),{region:yS(e.region)})},yS=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},vS={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"},bS=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Object(Tf.__awaiter)(t,void 0,void 0,(function(){var t,i,o,s,a;return Object(Tf.__generator)(this,(function(c){return D_.isInstance(t=r.request)&&(o=t.headers,(i=t.body)&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(s=e(i))&&(t.headers=Object(Tf.__assign)(Object(Tf.__assign)({},t.headers),((a={})["content-length"]=String(s),a)))),[2,n(Object(Tf.__assign)(Object(Tf.__assign)({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),vS)}}},wS={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"]},_S=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Object(Tf.__awaiter)(void 0,void 0,void 0,(function(){var r,i;return Object(Tf.__generator)(this,(function(o){return D_.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),wS)}}},CS={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize"},SS=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(n){return Object(Tf.__awaiter)(void 0,void 0,void 0,(function(){var r,i,o,s;return Object(Tf.__generator)(this,(function(a){switch(a.label){case 0:return r=t.logger,[4,e(n)];case 1:return i=a.sent(),r?(o=i.response,"function"==typeof r.info&&r.info({metadata:{statusCode:o.statusCode,requestId:null!==(s=o.headers["x-amzn-requestid"])&&void 0!==s?s:o.headers["x-amzn-request-id"],extendedRequestId:o.headers["x-amz-id-2"],cfId:o.headers["x-amz-cf-id"]}}),[2,i]):[2,i]}}))}))}}),CS)}}},ES="X-Amz-Signature",TS="X-Amz-Security-Token",AS="authorization",IS="X-Amz-Date".toLowerCase(),OS=[AS,IS,"date"],xS=ES.toLowerCase(),PS="x-amz-content-sha256",kS=TS.toLowerCase(),RS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},MS=/^proxy-/,US=/^sec-/,NS="AWS4-HMAC-SHA256-PAYLOAD",DS="aws4_request",LS={},jS=[];function FS(e,t,n){return e+"/"+t+"/"+n+"/"+DS}function VS(e,t,n){var r,i,o=e.headers,s={};try{for(var a=Object(Tf.__values)(Object.keys(o).sort()),c=a.next();!c.done;c=a.next()){var u=c.value,l=u.toLowerCase();(l in RS||(null==t?void 0:t.has(l))||MS.test(l)||US.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[u].trim().replace(/\s+/g," "))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function HS(e,t){var n=e.headers,r=e.body;return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var e,i,o,s,a,c,u;return Object(Tf.__generator)(this,(function(l){switch(l.label){case 0:try{for(e=Object(Tf.__values)(Object.keys(n)),i=e.next();!i.done;i=e.next())if((o=i.value).toLowerCase()===PS)return[2,n[o]]}catch(d){c={error:d}}finally{try{i&&!i.done&&(u=e.return)&&u.call(e)}finally{if(c)throw c.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(h=r,"function"==typeof ArrayBuffer&&h instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(h))?((s=new t).update(r),a=Lb.a,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var h}))}))}function qS(e){var t=e.headers,n=e.query,r=Object(Tf.__rest)(e,["headers","query"]);return Object(Tf.__assign)(Object(Tf.__assign)({},r),{headers:Object(Tf.__assign)({},t),query:n?BS(n):void 0})}function BS(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Object(Tf.__assign)(Object(Tf.__assign)({},t),((r={})[n]=Array.isArray(i)?Object(Tf.__spread)(i):i,r))}),{})}function zS(e){var t,n;e="function"==typeof e.clone?e.clone():qS(e);try{for(var r=Object(Tf.__values)(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;OS.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var GS=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.sha256,o=e.uriEscapePath,s=void 0===o||o;this.service=e.service,this.sha256=i,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=$S(r),this.credentialProvider=JS(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(Tf.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l,h,d,f,p,g,m,y,v,b,w,_,C,S,E;return Object(Tf.__generator)(this,(function(T){switch(T.label){case 0:return r=void 0===(n=t.signingDate)?new Date:n,o=void 0===(i=t.expiresIn)?3600:i,s=t.unsignableHeaders,a=t.signableHeaders,c=t.signingRegion,u=t.signingService,[4,this.credentialProvider()];case 1:return l=T.sent(),null==c?[3,2]:(d=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:d=T.sent(),T.label=4;case 4:return h=d,f=KS(r),p=f.longDate,g=f.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(m=FS(g,h,null!=u?u:this.service),y=function(e){var t,n,r="function"==typeof e.clone?e.clone():qS(e),i=r.headers,o=r.query,s=void 0===o?{}:o;try{for(var a=Object(Tf.__values)(Object.keys(i)),c=a.next();!c.done;c=a.next()){var u=c.value;"x-amz-"===u.toLowerCase().substr(0,6)&&(s[u]=i[u],delete i[u])}}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return Object(Tf.__assign)(Object(Tf.__assign)({},e),{headers:i,query:s})}(zS(e)),l.sessionToken&&(y.query[TS]=l.sessionToken),y.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",y.query["X-Amz-Credential"]=l.accessKeyId+"/"+m,y.query["X-Amz-Date"]=p,y.query["X-Amz-Expires"]=o.toString(10),v=VS(y,s,a),y.query["X-Amz-SignedHeaders"]=WS(v),b=y.query,w=ES,_=this.getSignature,C=[p,m,this.getSigningKey(l,h,g,u)],S=this.createCanonicalRequest,E=[y,v],[4,HS(e,this.sha256)]);case 5:return[4,_.apply(this,C.concat([S.apply(this,E.concat([T.sent()]))]))];case 6:return b[w]=T.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){return Object(Tf.__generator)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature,a=t.signingRegion,c=t.signingService;return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var e,t,i,u,l,h,d,f,p,g;return Object(Tf.__generator)(this,(function(m){switch(m.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=m.sent(),m.label=3;case 3:return e=t,i=KS(o),u=i.longDate,l=FS(i.shortDate,e,null!=c?c:this.service),[4,HS({headers:{},body:r},this.sha256)];case 4:return h=m.sent(),(d=new this.sha256).update(n),p=Lb.a,[4,d.digest()];case 5:return f=p.apply(void 0,[m.sent()]),g=[NS,u,l,s,f,h].join("\n"),[2,this.signString(g,{signingDate:o,signingRegion:e,signingService:c})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,s=n.signingService;return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var t,n,r,a,c,u,l,h;return Object(Tf.__generator)(this,(function(d){switch(d.label){case 0:return[4,this.credentialProvider()];case 1:return t=d.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=d.sent(),d.label=4;case 4:return n=r,a=KS(i).shortDate,l=(u=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(c=new(l.apply(u,[void 0,d.sent()]))).update(e),h=Lb.a,[4,c.digest()];case 6:return[2,h.apply(void 0,[d.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,c=n.signingService;return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var t,n,r,u,l,h,d,f,p,g,m;return Object(Tf.__generator)(this,(function(y){switch(y.label){case 0:return[4,this.credentialProvider()];case 1:return t=y.sent(),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=y.sent(),y.label=4;case 4:return n=r,u=zS(e),l=KS(i),h=l.longDate,f=FS(d=l.shortDate,n,null!=c?c:this.service),u.headers[IS]=h,t.sessionToken&&(u.headers[kS]=t.sessionToken),[4,HS(u,this.sha256)];case 5:return p=y.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=Object(Tf.__values)(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(PS,u.headers)&&this.applyChecksum&&(u.headers[PS]=p),g=VS(u,s,o),[4,this.getSignature(h,f,this.getSigningKey(t,n,d,c),this.createCanonicalRequest(u,g,p))];case 6:return m=y.sent(),u.headers[AS]="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+f+", SignedHeaders="+WS(g)+", Signature="+m,[2,u]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===xS)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]=OC(e)+"="+OC(t):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([OC(e)+"="+OC(n)])}),[]).join("&"))};try{for(var c=Object(Tf.__values)(Object.keys(i).sort()),u=c.next();!u.done;u=c.next())a(u.value)}catch(l){t={error:l}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return o.map((function(e){return s[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(Tf.__generator)(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+Object(Lb.a)(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var i,o,s,a,c;return Object(Tf.__generator)(this,(function(u){switch(u.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=u.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,u.sent()]))).update(i),c=Lb.a,[4,o.digest()];case 3:return[2,c.apply(void 0,[u.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){var o=n+":"+r+":"+i+":"+t.accessKeyId+":"+t.sessionToken;if(o in LS)return LS[o];for(jS.push(o);jS.length>50;)delete LS[jS.shift()];return LS[o]=new Promise((function(s,a){var c,u,l=Promise.resolve("AWS4"+t.secretAccessKey),h=function(t){(l=l.then((function(n){return r=t,(i=new e(n)).update(r),i.digest();var r,i}))).catch((function(){}))};try{for(var d=Object(Tf.__values)([n,r,i,DS]),f=d.next();!f.done;f=d.next())h(f.value)}catch(p){c={error:p}}finally{try{f&&!f.done&&(u=d.return)&&u.call(d)}finally{if(c)throw c.error}}l.then(s,(function(e){delete LS[o],a(e)}))}))}(this.sha256,e,n,t,r||this.service)},e}(),KS=function(e){var t,n=(t=e,function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},WS=function(e){return Object.keys(e).sort().join(";")},$S=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},JS=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function YS(e){var t,n=this,r=QS(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,s=e.systemClockOffset,a=void 0===s?e.systemClockOffset||0:s,c=e.sha256;return t=e.signer?QS(e.signer):function(){return QS(e.region)().then((function(t){return Object(Tf.__awaiter)(n,void 0,void 0,(function(){return Object(Tf.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=Object(Tf.__read)(t,2),i=n[0],s=i.signingRegion,a=i.signingService,u=void 0===a?e.signingName:a;return e.signingRegion=e.signingRegion||(void 0===s?e.signingRegion:s)||n[1],e.signingName=e.signingName||u,new GS({credentials:r,region:e.signingRegion,service:e.signingName,sha256:c,uriEscapePath:o})}))},Object(Tf.__assign)(Object(Tf.__assign)({},e),{systemClockOffset:a,signingEscapePath:o,credentials:r,signer:t})}function QS(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var ZS,XS,eE,tE,nE,rE,iE,oE,sE,aE,cE,uE,lE,hE,dE,fE,pE,gE,mE,yE,vE,bE,wE,_E,CE,SE,EE,TE,AE,IE,OE,xE,PE,kE,RE,ME,UE,NE,DE,LE,jE,FE,VE,HE,qE,BE,zE,GE,KE,WE,$E,JE,YE,QE,ZE,XE,eT,tT,nT,rT,iT,oT,sT,aT,cT,uT,lT,hT,dT,fT,pT,gT,mT,yT,vT,bT,wT,_T,CT,ST,ET,TT,AT,IT,OT,xT,PT,kT,RT,MT,UT,NT,DT,LT,jT,FT,VT,HT,qT,BT,zT,GT,KT,WT,$T,JT,YT,QT,ZT,XT,eA,tA,nA,rA,iA,oA,sA,aA,cA,uA,lA,hA,dA,fA,pA,gA,mA,yA,vA,bA,wA,_A={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"},CA={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},SA=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e){return function(t){var r=t.request;if(!D_.isInstance(r))return e(t);var i=r.headers,o="node"===n.runtime?"user-agent":"x-amz-user-agent";return i[o]?i[o]+=" "+n.defaultUserAgent:i[o]=""+n.defaultUserAgent,n.customUserAgent&&(i[o]+=" "+n.customUserAgent),e(Object(Tf.__assign)(Object(Tf.__assign)({},t),{request:r}))}}),CA)}}},EA=function(e){function t(t){var n=this,r=_f(_f({},dS),t),i=mS(r),o=YS(fS(i)),s=eS(o);return(n=e.call(this,s)||this).config=s,n.middlewareStack.use(zC(n.config)),n.middlewareStack.use(SA(n.config)),n.middlewareStack.use(bS(n.config)),n.middlewareStack.use(_S(n.config)),n.middlewareStack.use(SS()),n}return wf(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(pC),TA=function(){return(TA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},AA=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},IA=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},OA=new Sb.a("Credentials"),xA=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=M_.refreshGoogleToken,this._refreshHandlers.facebook=U_.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=TA(TA({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new __).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return OA.debug("getting credentials"),this._pickupCredentials()},e.prototype._pickupCredentials=function(){return OA.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?OA.debug("getting old cred promise"):(OA.debug("getting new cred promise"),this._gettingCredPromise=sw(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return AA(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return IA(this,(function(a){switch(a.label){case 0:if(OA.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return OA.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(OA.debug("need to get a new credential or refresh the existing one"),!(n=void 0===(t=this.Auth)?Mb.a.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(e)||!this._isPastTTL())return[3,6];OA.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=a.sent(),[4,n.currentSession()];case 3:return i=a.sent(),o=i.refreshToken,[4,new Promise((function(e,t){r.refreshSession(o,(function(n,r){return n?t(n):e(r)}))}))];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),OA.debug("Error attempting to refreshing the session",s),[3,6];case 6:return[2,n.currentUserCredentials()]}}))}))},e.prototype.refreshFederatedToken=function(e){OA.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,i=e.identity_id,o=e.expires_at;o=1970===new Date(o).getFullYear()?1e3*o:o;var s=this;return OA.debug("checking if federated jwt token expired"),o>(new Date).getTime()?(OA.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:i,expires_at:o})):s._refreshHandlers[t]&&"function"==typeof s._refreshHandlers[t]?(OA.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:s._refreshHandlers[t],provider:t,user:n})):(OA.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t,n,r,i=this,o=e.provider,s=e.user;return(t=e.refreshHandler,n=[],r=1e4,void 0===r&&(r=3e5),function e(t,n,r,i){return void 0===i&&(i=1),o=this,a=function(){var o,s;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(a){switch(a.label){case 0:if("function"!=typeof t)throw Error("functionToRetry must be a function");T_.debug(t.name+" attempt #"+i+" with this vars: "+JSON.stringify(n)),a.label=1;case 1:return a.trys.push([1,3,,8]),[4,t.apply(void 0,E_(n))];case 2:return[2,a.sent()];case 3:if(o=a.sent(),T_.debug("error on "+t.name,o),(c=o)&&c.nonRetryable)throw T_.debug(t.name+" non retryable error",o),o;return s=r(i,n,o),T_.debug(t.name+" retrying in "+s+" ms"),!1===s?[3,6]:[4,new Promise((function(e){return setTimeout(e,s)}))];case 4:return a.sent(),[4,e(t,n,r,i+1)];case 5:return[2,a.sent()];case 6:throw o;case 7:return[3,8];case 8:return[2]}var c}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{i(a.next(e))}catch(n){t(n)}}function r(e){try{i(a.throw(e))}catch(n){t(n)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(n,r)}i((a=a.apply(o,[])).next())}));var o,s,a}(t,n,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(r))).then((function(e){return OA.debug("refresh federated token sucessfully",e),i._setCredentialsFromFederation({provider:o,token:e.token,user:s,identity_id:e.identity_id,expires_at:e.expires_at})})).catch((function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||i.clear(),OA.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)}))},e.prototype._isExpired=function(e){if(!e)return OA.debug("no credentials for expiration check"),!0;OA.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return AA(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a=this;return IA(this,(function(c){switch(c.label){case 0:if(OA.debug("setting credentials for guest"),t=(e=this._config).identityPoolId,n=e.region,e.mandatorySignIn)return[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")];if(!t)return OA.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")];if(!n)return OA.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")];r=void 0,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._storageSync];case 2:return c.sent(),r=this._storage.getItem("CognitoIdentityId-"+t),this._identityId=r,[3,4];case 3:return i=c.sent(),OA.debug("Failed to get the cached identityId",i),[3,4];case 4:return o=new EA({region:n,customUserAgent:v_()}),s=void 0,s=r?_C({identityId:r,client:o})():AA(a,void 0,void 0,(function(){var e;return IA(this,(function(n){switch(n.label){case 0:return[4,o.send(new CC({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,_C({client:o,identityId:e})()]}}))})).catch((function(e){return AA(a,void 0,void 0,(function(){return IA(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null).then((function(e){return e})).catch((function(e){return AA(a,void 0,void 0,(function(){var n=this;return IA(this,(function(i){return"ResourceNotFoundException"===e.name&&e.message==="Identity '"+r+"' not found."?(OA.debug("Failed to load guest credentials"),this._storage.removeItem("CognitoIdentityId-"+t),s=AA(n,void 0,void 0,(function(){var e;return IA(this,(function(n){switch(n.label){case 0:return[4,o.send(new CC({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,_C({client:o,identityId:e})()]}}))})).catch((function(e){return AA(n,void 0,void 0,(function(){return IA(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null)]):[2,e]}))}))}))]}}))}))},e.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,r=e.identity_id,i={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!i)return Promise.reject("You must specify a federated provider");var o={};o[i]=n;var s=this._config,a=s.identityPoolId,c=s.region;if(!a)return OA.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!c)return OA.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var u,l=new EA({region:c,customUserAgent:v_()});return u=r?_C({identityId:r,logins:o,client:l})():function(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?"object"==typeof self&&self.indexedDB?new EC:"object"==typeof window&&window.localStorage?window.localStorage:TC:r,o=e.client,s=e.customRoleArn,a=e.identityPoolId,c=e.logins,u=e.userIdentifier,l=void 0===u?c&&0!==Object.keys(c).length?void 0:"ANONYMOUS":u,h=l?"aws:cognito-identity-credentials:"+a+":"+l:void 0,d=function(){return Object(Tf.__awaiter)(t,void 0,void 0,(function(){var e,t,r,u,l,f,p,g,m;return Object(Tf.__generator)(this,(function(y){switch(y.label){case 0:return(t=h)?[4,i.getItem(h)]:[3,2];case 1:t=y.sent(),y.label=2;case 2:return(e=t)?[3,7]:(f=(l=o).send,p=CC.bind,m={AccountId:n,IdentityPoolId:a},c?[4,wC(c)]:[3,4]);case 3:return g=y.sent(),[3,5];case 4:g=void 0,y.label=5;case 5:return[4,f.apply(l,[new(p.apply(CC,[void 0,(m.Logins=g,m)]))])];case 6:r=y.sent().IdentityId,u=void 0===r?function(){throw new bC("Response from Amazon Cognito contained no identity ID")}():r,e=u,h&&Promise.resolve(i.setItem(h,e)).catch((function(){})),y.label=7;case 7:return[2,(d=_C({client:o,customRoleArn:s,logins:c,identityId:e}))()]}}))}))};return function(){return d().catch((function(e){return Object(Tf.__awaiter)(t,void 0,void 0,(function(){return Object(Tf.__generator)(this,(function(t){throw h&&Promise.resolve(i.removeItem(h)).catch((function(){})),e}))}))}))}}({logins:o,identityPoolId:a,client:l})(),this._loadCredentials(u,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;OA.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,s=r.identityPoolId;if(!s)return OA.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!i)return OA.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a={};a["cognito-idp."+i+".amazonaws.com/"+o]=n;var c=new EA({region:i,customUserAgent:v_()}),u=AA(t,void 0,void 0,(function(){var e;return IA(this,(function(t){switch(t.label){case 0:return[4,c.send(new CC({IdentityPoolId:s,Logins:a}))];case 1:return e=t.sent().IdentityId,this._identityId=e,[2,_C({client:c,logins:a,identityId:e})()]}}))})).catch((function(e){return AA(t,void 0,void 0,(function(){return IA(this,(function(t){throw e}))}))}));return this._loadCredentials(u,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this,s=this._config.identityPoolId;return new Promise((function(a,c){e.then((function(e){return AA(i,void 0,void 0,(function(){var i,c,u,l,h,d;return IA(this,(function(f){switch(f.label){case 0:if(OA.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){i=Object.assign({id:this._credentials.identityId},r.user),c=r.provider,u=r.token,l=r.expires_at,h=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:c,token:u,user:i,expires_at:l,identity_id:h}))}catch(p){OA.debug("Failed to put federated info into auth storage",p)}}if("guest"!==t)return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this._storageSync];case 2:return f.sent(),this._storage.setItem("CognitoIdentityId-"+s,e.identityId),[3,4];case 3:return d=f.sent(),OA.debug("Failed to cache identityId",d),[3,4];case 4:return a(o._credentials),[2]}}))}))})).catch((function(t){if(t)return OA.debug("Failed to load credentials",e),OA.debug("Error loading credentials",t),void c(t)}))}))},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(OA.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return AA(this,void 0,void 0,(function(){return IA(this,(function(e){return this._credentials=null,this._credentials_source=null,OA.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);Mb.a.register(xA),(ZS||(ZS={})).filterSensitiveLog=function(e){return _f({},e)},(XS||(XS={})).filterSensitiveLog=function(e){return _f({},e)},(eE||(eE={})).filterSensitiveLog=function(e){return _f({},e)},(tE||(tE={})).filterSensitiveLog=function(e){return _f({},e)},(nE||(nE={})).filterSensitiveLog=function(e){return _f({},e)},(rE||(rE={})).filterSensitiveLog=function(e){return _f({},e)},(iE||(iE={})).filterSensitiveLog=function(e){return _f({},e)},(oE||(oE={})).filterSensitiveLog=function(e){return _f({},e)},(sE||(sE={})).filterSensitiveLog=function(e){return _f({},e)},(aE||(aE={})).filterSensitiveLog=function(e){return _f({},e)},(cE||(cE={})).filterSensitiveLog=function(e){return _f({},e)},(uE||(uE={})).filterSensitiveLog=function(e){return _f({},e)},(lE||(lE={})).filterSensitiveLog=function(e){return _f({},e)},(hE||(hE={})).filterSensitiveLog=function(e){return _f({},e)},(dE||(dE={})).filterSensitiveLog=function(e){return _f({},e)},(fE||(fE={})).filterSensitiveLog=function(e){return _f({},e)},(pE||(pE={})).filterSensitiveLog=function(e){return _f({},e)},(gE||(gE={})).filterSensitiveLog=function(e){return _f({},e)},(mE||(mE={})).filterSensitiveLog=function(e){return _f({},e)},(yE||(yE={})).filterSensitiveLog=function(e){return _f({},e)},(vE||(vE={})).filterSensitiveLog=function(e){return _f({},e)},(bE||(bE={})).filterSensitiveLog=function(e){return _f({},e)},(wE||(wE={})).filterSensitiveLog=function(e){return _f({},e)},(_E||(_E={})).filterSensitiveLog=function(e){return _f({},e)},(CE||(CE={})).filterSensitiveLog=function(e){return _f({},e)},(SE||(SE={})).filterSensitiveLog=function(e){return _f({},e)},(EE||(EE={})).filterSensitiveLog=function(e){return _f({},e)},(TE||(TE={})).filterSensitiveLog=function(e){return _f({},e)},(AE||(AE={})).filterSensitiveLog=function(e){return _f({},e)},(IE||(IE={})).filterSensitiveLog=function(e){return _f({},e)},(OE||(OE={})).filterSensitiveLog=function(e){return _f({},e)},(xE||(xE={})).filterSensitiveLog=function(e){return _f({},e)},(PE||(PE={})).filterSensitiveLog=function(e){return _f({},e)},(kE||(kE={})).filterSensitiveLog=function(e){return _f({},e)},(RE||(RE={})).filterSensitiveLog=function(e){return _f({},e)},(ME||(ME={})).filterSensitiveLog=function(e){return _f({},e)},(UE||(UE={})).filterSensitiveLog=function(e){return _f({},e)},(NE||(NE={})).filterSensitiveLog=function(e){return _f({},e)},(DE||(DE={})).filterSensitiveLog=function(e){return _f({},e)},(LE||(LE={})).filterSensitiveLog=function(e){return _f({},e)},(jE||(jE={})).filterSensitiveLog=function(e){return _f({},e)},(FE||(FE={})).filterSensitiveLog=function(e){return _f({},e)},(VE||(VE={})).filterSensitiveLog=function(e){return _f({},e)},(HE||(HE={})).filterSensitiveLog=function(e){return _f({},e)},(qE||(qE={})).filterSensitiveLog=function(e){return _f({},e)},(BE||(BE={})).filterSensitiveLog=function(e){return _f({},e)},(zE||(zE={})).filterSensitiveLog=function(e){return _f({},e)},(GE||(GE={})).filterSensitiveLog=function(e){return _f({},e)},(KE||(KE={})).filterSensitiveLog=function(e){return _f({},e)},(WE||(WE={})).filterSensitiveLog=function(e){return _f({},e)},($E||($E={})).filterSensitiveLog=function(e){return _f({},e)},(JE||(JE={})).filterSensitiveLog=function(e){return _f({},e)},(YE||(YE={})).filterSensitiveLog=function(e){return _f({},e)},(QE||(QE={})).filterSensitiveLog=function(e){return _f({},e)},(ZE||(ZE={})).filterSensitiveLog=function(e){return _f({},e)},(XE||(XE={})).filterSensitiveLog=function(e){return _f({},e)},(eT||(eT={})).filterSensitiveLog=function(e){return _f({},e)},(tT||(tT={})).filterSensitiveLog=function(e){return _f({},e)},(nT||(nT={})).filterSensitiveLog=function(e){return _f({},e)},(rT||(rT={})).filterSensitiveLog=function(e){return _f({},e)},(iT||(iT={})).filterSensitiveLog=function(e){return _f({},e)},(oT||(oT={})).filterSensitiveLog=function(e){return _f({},e)},(sT||(sT={})).filterSensitiveLog=function(e){return _f({},e)},(aT||(aT={})).filterSensitiveLog=function(e){return _f({},e)},(cT||(cT={})).filterSensitiveLog=function(e){return _f({},e)},(uT||(uT={})).filterSensitiveLog=function(e){return _f({},e)},(lT||(lT={})).filterSensitiveLog=function(e){return _f({},e)},(hT||(hT={})).filterSensitiveLog=function(e){return _f({},e)},(dT||(dT={})).filterSensitiveLog=function(e){return _f({},e)},(fT||(fT={})).filterSensitiveLog=function(e){return _f({},e)},(pT||(pT={})).filterSensitiveLog=function(e){return _f({},e)},(gT||(gT={})).filterSensitiveLog=function(e){return _f({},e)},(mT||(mT={})).filterSensitiveLog=function(e){return _f({},e)},(yT||(yT={})).filterSensitiveLog=function(e){return _f({},e)},(vT||(vT={})).filterSensitiveLog=function(e){return _f({},e)},(bT||(bT={})).filterSensitiveLog=function(e){return _f({},e)},(wT||(wT={})).filterSensitiveLog=function(e){return _f({},e)},(_T||(_T={})).filterSensitiveLog=function(e){return _f({},e)},(CT||(CT={})).filterSensitiveLog=function(e){return _f({},e)},(ST||(ST={})).filterSensitiveLog=function(e){return _f({},e)},(ET||(ET={})).filterSensitiveLog=function(e){return _f({},e)},(TT||(TT={})).filterSensitiveLog=function(e){return _f({},e)},(AT||(AT={})).filterSensitiveLog=function(e){return _f({},e)},(IT||(IT={})).filterSensitiveLog=function(e){return _f({},e)},(OT||(OT={})).filterSensitiveLog=function(e){return _f({},e)},(xT||(xT={})).filterSensitiveLog=function(e){return _f({},e)},(PT||(PT={})).filterSensitiveLog=function(e){return _f({},e)},(kT||(kT={})).filterSensitiveLog=function(e){return _f({},e)},(RT||(RT={})).filterSensitiveLog=function(e){return _f({},e)},(MT||(MT={})).filterSensitiveLog=function(e){return _f({},e)},(UT||(UT={})).filterSensitiveLog=function(e){return _f({},e)},(NT||(NT={})).filterSensitiveLog=function(e){return _f({},e)},(DT||(DT={})).filterSensitiveLog=function(e){return _f({},e)},(LT||(LT={})).filterSensitiveLog=function(e){return _f({},e)},(jT||(jT={})).filterSensitiveLog=function(e){return _f({},e)},(FT||(FT={})).filterSensitiveLog=function(e){return _f({},e)},(VT||(VT={})).filterSensitiveLog=function(e){return _f({},e)},(HT||(HT={})).filterSensitiveLog=function(e){return _f({},e)},(qT||(qT={})).filterSensitiveLog=function(e){return _f({},e)},(BT||(BT={})).filterSensitiveLog=function(e){return _f({},e)},(zT||(zT={})).filterSensitiveLog=function(e){return _f({},e)},(GT||(GT={})).filterSensitiveLog=function(e){return _f({},e)},(KT||(KT={})).filterSensitiveLog=function(e){return _f({},e)},(WT||(WT={})).filterSensitiveLog=function(e){return _f({},e)},($T||($T={})).filterSensitiveLog=function(e){return _f({},e)},(JT||(JT={})).filterSensitiveLog=function(e){return _f({},e)},(YT||(YT={})).filterSensitiveLog=function(e){return _f({},e)},(QT||(QT={})).filterSensitiveLog=function(e){return _f({},e)},(ZT||(ZT={})).filterSensitiveLog=function(e){return _f({},e)},(XT||(XT={})).filterSensitiveLog=function(e){return _f({},e)},(eA||(eA={})).filterSensitiveLog=function(e){return _f({},e)},(tA||(tA={})).filterSensitiveLog=function(e){return _f({},e)},(nA||(nA={})).filterSensitiveLog=function(e){return _f({},e)},(rA||(rA={})).filterSensitiveLog=function(e){return _f({},e)},(iA||(iA={})).filterSensitiveLog=function(e){return _f({},e)},(oA||(oA={})).filterSensitiveLog=function(e){return _f({},e)},(sA||(sA={})).filterSensitiveLog=function(e){return _f({},e)},(aA||(aA={})).filterSensitiveLog=function(e){return _f({},e)},(cA||(cA={})).filterSensitiveLog=function(e){return _f({},e)},(uA||(uA={})).filterSensitiveLog=function(e){return _f({},e)},(lA||(lA={})).filterSensitiveLog=function(e){return _f({},e)},(hA||(hA={})).filterSensitiveLog=function(e){return _f({},e)},(dA||(dA={})).filterSensitiveLog=function(e){return _f({},e)},(fA||(fA={})).filterSensitiveLog=function(e){return _f({},e)},(pA||(pA={})).filterSensitiveLog=function(e){return _f({},e)},(gA||(gA={})).filterSensitiveLog=function(e){return _f({},e)},(mA||(mA={})).filterSensitiveLog=function(e){return _f({},e)},(yA||(yA={})).filterSensitiveLog=function(e){return _f({},e)},(vA||(vA={})).filterSensitiveLog=function(e){return _f({},e)},(bA||(bA={})).filterSensitiveLog=function(e){return _f({},e)},(wA||(wA={})).filterSensitiveLog=function(e){return _f({},e)};var PA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l,h,d,f,p,g;return Sf(this,(function(m){switch(m.label){case 0:return r=[_f({},e)],g={},[4,XA(e.body,t)];case 1:switch(n=_f.apply(void 0,r.concat([(g.body=m.sent(),g)])),o="UnknownError",o=eI(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return s=[{}],[4,RA(n,t)];case 3:return i=_f.apply(void 0,[_f.apply(void 0,s.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 4:return a=[{}],[4,MA(n,t)];case 5:return i=_f.apply(void 0,[_f.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 6:return c=[{}],[4,UA(n,t)];case 7:return i=_f.apply(void 0,[_f.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 8:return u=[{}],[4,NA(n,t)];case 9:return i=_f.apply(void 0,[_f.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 10:return l=[{}],[4,DA(n,t)];case 11:return i=_f.apply(void 0,[_f.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 12:return h=[{}],[4,LA(n,t)];case 13:return i=_f.apply(void 0,[_f.apply(void 0,h.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 14:return d=[{}],[4,jA(n,t)];case 15:return i=_f.apply(void 0,[_f.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 16:o=(f=n.body).code||f.Code||o,i=_f(_f({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:ZA(e)}),m.label=17;case 17:return i.message=p=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}}))}))},kA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l,h,d,f,p,g;return Sf(this,(function(m){switch(m.label){case 0:return r=[_f({},e)],g={},[4,XA(e.body,t)];case 1:switch(n=_f.apply(void 0,r.concat([(g.body=m.sent(),g)])),o="UnknownError",o=eI(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return s=[{}],[4,RA(n,t)];case 3:return i=_f.apply(void 0,[_f.apply(void 0,s.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 4:return a=[{}],[4,MA(n,t)];case 5:return i=_f.apply(void 0,[_f.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 6:return c=[{}],[4,UA(n,t)];case 7:return i=_f.apply(void 0,[_f.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 8:return u=[{}],[4,NA(n,t)];case 9:return i=_f.apply(void 0,[_f.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 10:return l=[{}],[4,DA(n,t)];case 11:return i=_f.apply(void 0,[_f.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 12:return h=[{}],[4,LA(n,t)];case 13:return i=_f.apply(void 0,[_f.apply(void 0,h.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 14:return d=[{}],[4,jA(n,t)];case 15:return i=_f.apply(void 0,[_f.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:ZA(e)}]),[3,17];case 16:o=(f=n.body).code||f.Code||o,i=_f(_f({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:ZA(e)}),m.label=17;case 17:return i.message=p=i.message||i.Message||o,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}}))}))},RA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var t,n;return Sf(this,(function(r){return t={name:"BadRequestException",$fault:"client",$metadata:ZA(e),Message:void 0,RequestID:void 0},null!=(n=e.body).Message&&(t.Message=n.Message),null!=n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},MA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var t,n;return Sf(this,(function(r){return t={name:"ForbiddenException",$fault:"client",$metadata:ZA(e),Message:void 0,RequestID:void 0},null!=(n=e.body).Message&&(t.Message=n.Message),null!=n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},UA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var t,n;return Sf(this,(function(r){return t={name:"InternalServerErrorException",$fault:"server",$metadata:ZA(e),Message:void 0,RequestID:void 0},null!=(n=e.body).Message&&(t.Message=n.Message),null!=n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},NA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var t,n;return Sf(this,(function(r){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:ZA(e),Message:void 0,RequestID:void 0},null!=(n=e.body).Message&&(t.Message=n.Message),null!=n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},DA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var t,n;return Sf(this,(function(r){return t={name:"NotFoundException",$fault:"client",$metadata:ZA(e),Message:void 0,RequestID:void 0},null!=(n=e.body).Message&&(t.Message=n.Message),null!=n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},LA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var t,n;return Sf(this,(function(r){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:ZA(e),Message:void 0,RequestID:void 0},null!=(n=e.body).Message&&(t.Message=n.Message),null!=n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},jA=function(e,t){return Cf(void 0,void 0,void 0,(function(){var t,n;return Sf(this,(function(r){return t={name:"TooManyRequestsException",$fault:"client",$metadata:ZA(e),Message:void 0,RequestID:void 0},null!=(n=e.body).Message&&(t.Message=n.Message),null!=n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},FA=function(e,t){return _f(_f(_f(_f(_f(_f(_f(_f({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})},VA=function(e,t){return _f(_f(_f(_f(_f(_f({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})},HA=function(e,t){return _f(_f({},void 0!==e.UserAttributes&&{UserAttributes:KA(e.UserAttributes,t)}),void 0!==e.UserId&&{UserId:e.UserId})},qA=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ef(t,2),i=r[0],o=r[1];return _f(_f({},e),((n={})[i]=o,n))}),{})},BA=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ef(t,2),i=r[0],o=r[1];return _f(_f({},e),((n={})[i]=o,n))}),{})},zA=function(e,t){return Object.entries(e).reduce((function(e,n){var r,i=Ef(n,2),o=i[0],s=i[1];return _f(_f({},e),((r={})[o]=function(e,t){return _f(_f(_f(_f(_f(_f(_f(_f(_f(_f({},void 0!==e.AppPackageName&&{AppPackageName:e.AppPackageName}),void 0!==e.AppTitle&&{AppTitle:e.AppTitle}),void 0!==e.AppVersionCode&&{AppVersionCode:e.AppVersionCode}),void 0!==e.Attributes&&{Attributes:BA(e.Attributes)}),void 0!==e.ClientSdkVersion&&{ClientSdkVersion:e.ClientSdkVersion}),void 0!==e.EventType&&{EventType:e.EventType}),void 0!==e.Metrics&&{Metrics:qA(e.Metrics)}),void 0!==e.SdkName&&{SdkName:e.SdkName}),void 0!==e.Session&&{Session:$A(e.Session,t)}),void 0!==e.Timestamp&&{Timestamp:e.Timestamp})}(s,t),r))}),{})},GA=function(e,t){return Object.entries(e).reduce((function(e,n){var r,i=Ef(n,2),o=i[0],s=i[1];return _f(_f({},e),((r={})[o]=function(e,t){return _f(_f({},void 0!==e.Endpoint&&{Endpoint:WA(e.Endpoint,t)}),void 0!==e.Events&&{Events:zA(e.Events,t)})}(s,t),r))}),{})},KA=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ef(t,2),i=r[0],o=r[1];return _f(_f({},e),((n={})[i]=function(e,t){return e.map((function(e){return e}))}(o),n))}),{})},WA=function(e,t){return _f(_f(_f(_f(_f(_f(_f(_f(_f(_f(_f({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:KA(e.Attributes,t)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:FA(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:VA(e.Location)}),void 0!==e.Metrics&&{Metrics:qA(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:HA(e.User,t)})},$A=function(e,t){return _f(_f(_f(_f({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},JA=function(e,t){return{Message:null!=e.Message?e.Message:void 0,StatusCode:null!=e.StatusCode?e.StatusCode:void 0}},YA=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ef(t,2),i=r[0],o=r[1];return _f(_f({},e),((n={})[i]=function(e,t){return{Message:null!=e.Message?e.Message:void 0,StatusCode:null!=e.StatusCode?e.StatusCode:void 0}}(o),n))}),{})},QA=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Ef(t,2),i=r[0],o=r[1];return _f(_f({},e),((n={})[i]=function(e,t){return{EndpointItemResponse:null!=e.EndpointItemResponse?JA(e.EndpointItemResponse):void 0,EventsItemResponse:null!=e.EventsItemResponse?YA(e.EventsItemResponse):void 0}}(o),n))}),{})},ZA=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},XA=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},eI=function(e,t){var n=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},r=Object.keys(e.headers).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==r?n(e.headers[r]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},tI=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return wf(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(lC(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="PinpointClient",s="PutEventsCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:cT.filterSensitiveLog,outputFilterSensitiveLog:uT.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var c=t.requestHandler;return r.resolve((function(e){return c.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i,o,s,a;return Sf(this,(function(c){switch(c.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",mC(i)),void 0!==e.EventsRequest&&(o=function(e,t){return _f({},void 0!==e.BatchItem&&{BatchItem:GA(e.BatchItem,t)})}(e.EventsRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[4,t.endpoint()];case 1:return s=c.sent(),[2,new D_({protocol:void 0===(a=s.protocol)?"https":a,hostname:s.hostname,port:s.port,method:"POST",headers:n,path:r,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r;return Sf(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,PA(e,t)]:(n={$metadata:ZA(e),EventsResponse:void 0},[4,XA(e.body,t)]);case 1:return r=i.sent(),n.EventsResponse=function(e,t){return{Results:null!=e.Results?QA(e.Results):void 0}}(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(gC),nI=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return wf(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(lC(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="PinpointClient",s="UpdateEndpointCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:GT.filterSensitiveLog,outputFilterSensitiveLog:KT.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var c=t.requestHandler;return r.resolve((function(e){return c.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r,i,o,s,a;return Sf(this,(function(c){switch(c.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",mC(i)),void 0===e.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((i=e.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",mC(i)),void 0!==e.EndpointRequest&&(o=function(e,t){return _f(_f(_f(_f(_f(_f(_f(_f(_f(_f(_f({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:KA(e.Attributes,t)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:FA(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:VA(e.Location)}),void 0!==e.Metrics&&{Metrics:qA(e.Metrics)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:HA(e.User,t)})}(e.EndpointRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[4,t.endpoint()];case 1:return s=c.sent(),[2,new D_({protocol:void 0===(a=s.protocol)?"https":a,hostname:s.hostname,port:s.port,method:"PUT",headers:n,path:r,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Cf(void 0,void 0,void 0,(function(){var n,r;return Sf(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,kA(e,t)]:(n={$metadata:ZA(e),MessageBody:void 0},[4,XA(e.body,t)]);case 1:return r=i.sent(),n.MessageBody=function(e,t){return{Message:null!=e.Message?e.Message:void 0,RequestID:null!=e.RequestID?e.RequestID:void 0}}(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(gC),rI=n("uTIj"),iI="pinpoint.{region}.amazonaws.com",oI=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),sI=new Set(["cn-north-1","cn-northwest-1"]),aI=new Set(["us-iso-east-1"]),cI=new Set(["us-isob-east-1"]),uI=new Set(["us-gov-east-1","us-gov-west-1"]),lI=_f(_f({},{apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;default:oI.has(e)&&(n={hostname:iI.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),sI.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),aI.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),cI.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),uI.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:iI.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"}),{runtime:"browser",base64Decoder:jC,base64Encoder:FC,bodyLengthChecker:rS,credentialDefaultProvider:qC("Credential is missing"),defaultUserAgent:iS(rI.name,rI.version),maxAttempts:3,region:qC("Region is missing"),requestHandler:new PC,sha256:IC.Sha256,streamCollector:VC,urlParser:nS,utf8Decoder:oS.fromUtf8,utf8Encoder:oS.toUtf8}),hI=function(e){function t(t){var n,r=this,i=_f(_f({},lI),t),o=mS(i),s=YS(fS(o)),a=eS(s);return(r=e.call(this,a)||this).config=a,r.middlewareStack.use((n=r.config,{applyToStack:function(e){e.addRelativeTo(function(e){return function(t,n){return function(r){return Object(Tf.__awaiter)(this,void 0,void 0,(function(){var i,o,s,a,c,u,l,h,d;return Object(Tf.__generator)(this,(function(f){switch(f.label){case 0:return D_.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(r)];case 1:return o=f.sent(),[3,3];case 2:o=e.signer,f.label=3;case 3:return i=o,a=t,c=[Object(Tf.__assign)({},r)],d={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 4:return[4,a.apply(void 0,[Tf.__assign.apply(void 0,c.concat([(d.request=f.sent(),d)]))])];case 5:return s=f.sent(),(l=(u=s.response.headers)&&(u.date||u.Date))&&(g=h=Date.parse(l),Math.abs((p=e.systemClockOffset,new Date(Date.now()+p)).getTime()-g)>=3e5&&(e.systemClockOffset=h-Date.now())),[2,s]}var p,g}))}))}}}(n),_A)}})),r.middlewareStack.use(zC(r.config)),r.middlewareStack.use(SA(r.config)),r.middlewareStack.use(bS(r.config)),r.middlewareStack.use(_S(r.config)),r.middlewareStack.use(SS()),r}return wf(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(pC),dI={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new __).getStorage()};function fI(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function pI(){return(new Date).getTime()}function gI(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var mI=new Sb.a("StorageCache"),yI=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){gI(this.config.capacityInBytes)||(mI.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=dI.capacityInBytes),gI(this.config.itemMaxSize)||(mI.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=dI.itemMaxSize),gI(this.config.defaultTTL)||(mI.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=dI.defaultTTL),gI(this.config.defaultPriority)||(mI.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=dI.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(mI.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=dI.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(mI.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=dI.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(mI.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=dI.warningThreshold),this.config.capacityInBytes>5242880&&(mI.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=dI.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:pI(),visitedTime:pI(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=fI(JSON.stringify(r)),r.byteSize=fI(JSON.stringify(r)),r},e.prototype.configure=function(e){return e?(e.keyPrefix&&mI.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},e}(),vI=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bI=new Sb.a("Cache"),wI=new(function(e){function t(t){var n=this,r=t?Object.assign({},dI,t):dI;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return vI(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=pI(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return pI()>=n.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(n){this._decreaseCurSizeInBytes(t.byteSize),bI.error("Failed to set item "+n)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}for(n.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1})),i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){bI.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+pI()};if(i.priority<1||i.priority>5)bI.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize)bI.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var s=this.config.storage.getItem(r);if(s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(o.byteSize)){var a=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var c=this._sizeToPop(o.byteSize);this._popOutItems(a,c)}}this._setItem(r,o)}catch(u){bI.warn("setItem failed! "+u)}}}else bI.warn("The value of item should not be undefined!");else bI.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,t){bI.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return bI.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(s){return bI.warn("getItem failed! "+s),null}},t.prototype.removeItem=function(e){bI.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(r){bI.warn("removeItem failed! "+r)}},t.prototype.clear=function(){bI.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(r){bI.warn("clear failed! "+r)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==dI.keyPrefix||(bI.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=pI.toString()),new t(e)},t}(yI)),_I=wI;Mb.a.register(wI);var CI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},SI=new Sb.a("EventsBuffer"),EI=[429,500],TI=[202],AI=function(){function e(e,t){this._pause=!1,this._flush=!1,SI.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return e.prototype.push=function(e){var t;if(this._buffer>this._config.bufferSize)return SI.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},e.prototype.pause=function(){this._pause=!0},e.prototype.resume=function(){this._pause=!1},e.prototype.updateClient=function(e){this._client=e},e.prototype.flush=function(){this._flush=!0},e.prototype._startLoop=function(){this._interval&&clearInterval(this._interval),this._interval=setInterval(this._sendBatch,this._config.flushInterval)},e.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=Math.min(this._config.flushSize,e),n=this._buffer.splice(0,t);this._putEvents(n)}},e.prototype._putEvents=function(e){return t=this,void 0,r=function(){var t,n,r,i,o;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(s){switch(s.label){case 0:t=this._bufferToMap(e),n=this._generateBatchEventParams(t),s.label=1;case 1:return s.trys.push([1,3,,4]),r=new tI(n),[4,this._client.send(r)];case 2:return i=s.sent(),this._processPutEventsSuccessResponse(i,t),[3,4];case 3:return o=s.sent(),[2,this._handlePutEventsFailure(o,t)];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,s)}a((r=r.apply(t,[])).next())}));var t,n,r},e.prototype._generateBatchEventParams=function(e){var t={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach((function(e){var n=e.params,r=n.event,i=n.timestamp,o=n.config,s=r.name,a=r.attributes,c=r.metrics,u=r.eventId,l=r.session,h=o.endpointId,d=t.EventsRequest.BatchItem;t.ApplicationId=t.ApplicationId||o.appId,d[h]||(d[h]={Endpoint:{},Events:{}}),d[h].Events[u]={EventType:s,Timestamp:new Date(i).toISOString(),Attributes:a,Metrics:c,Session:l}})),t},e.prototype._handlePutEventsFailure=function(e,t){if(SI.debug("_putEvents Failed: ",e),EI.includes(e.$metadata&&e.$metadata.httpStatusCode)){var n=Object.values(t);this._retry(n)}},e.prototype._processPutEventsSuccessResponse=function(e,t){var n=[];Object.entries(e.EventsResponse.Results).forEach((function(e){var r=CI(e,2),i=r[0];Object.entries(r[1].EventsItemResponse).forEach((function(e){var r,o,s=CI(e,2),a=s[0],c=s[1],u=c.StatusCode,l=c.Message,h=t[a],d={EventsResponse:{Results:(r={},r[i]={EventsItemResponse:(o={},o[a]={StatusCode:u,Message:l},o)},r)}};if(TI.includes(u))h.handlers.resolve(d);else{if(!EI.includes(u))return SI.error("event "+a+" : "+h.params.event.name+" failed with error: "+l),h.handlers.reject(d);n.push(h)}}))})),n.length&&this._retry(n)},e.prototype._retry=function(e){var t,n=[];e.forEach((function(e){var t,r=e.params,i=r.event,o=i.eventId,s=i.name;if(r.resendLimit-- >0)return SI.debug("resending event "+o+" : "+s+" with "+r.resendLimit+" retry attempts remaining"),void n.push((t={},t[o]=e,t));SI.debug("no retry attempts remaining for event "+o+" : "+s)})),(t=this._buffer).unshift.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(CI(arguments[t]));return e}(n))},e.prototype._bufferToMap=function(e){return e.reduce((function(e,t){var n=CI(Object.entries(t),1),r=CI(n[0],2);return e[r[0]]=r[1],e}),{})},e}(),II=function(){return(II=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},OI=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},xI=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},PI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},kI="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",RI=function(e,t){xb.dispatch("analytics",{event:e,data:t},"Analytics",kI)},MI=new Sb.a("AWSPinpointProvider"),UI=[429,500],NI=[202],DI="_update_endpoint",LI="_session.stop",jI="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,FI=function(){function e(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=Nb.clientInfo()}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){var t=this;if(MI.debug("configure Analytics",e),this._config=Object.assign({},this._config,e||{}),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled)if(this._config.endpointId)RI("pinpointProvider_configured",null);else{var n=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(n).then((function(e){MI.debug("setting endpoint id from the cache",e),t._config.endpointId=e,RI("pinpointProvider_configured",null)})).catch((function(e){MI.debug("Failed to generate endpointId",e)}))}else this._flushBuffer();return this._config},e.prototype.record=function(e,t){return OI(this,void 0,void 0,(function(){var n,r;return xI(this,(function(i){switch(i.label){case 0:return MI.debug("_public record",e),[4,this._getCredentials()];case 1:return(n=i.sent())&&this._config.appId&&this._config.region?(this._initClients(n),r=(new Date).getTime(),this._generateSession(e),e.event.eventId=Object(YC.v1)(),Object.assign(e,{timestamp:r,config:this._config}),e.event.immediate?[2,this._send(e,t)]:(this._putToBuffer(e,t),[2])):(MI.debug("cannot send events without credentials, applicationId or region"),[2,t.reject(new Error("No credentials, applicationId or region"))])}}))}))},e.prototype._sendEndpointUpdate=function(e){return OI(this,void 0,void 0,(function(){var t;return xI(this,(function(n){switch(n.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(e),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(e)]);case 1:return n.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}}))}))},e.prototype._putToBuffer=function(e,t){e.event.name!==DI?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},e.prototype._generateSession=function(e){this._sessionId=this._sessionId||Object(YC.v1)();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=Object(YC.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case LI:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(YC.v1)(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(YC.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},e.prototype._send=function(e,t){return OI(this,void 0,void 0,(function(){return xI(this,(function(n){switch(e.event.name){case DI:return[2,this._updateEndpoint({params:e,handlers:t})];case LI:return[2,this._pinpointSendStopSession(e,t)];default:return[2,this._pinpointPutEvents(e,t)]}return[2]}))}))},e.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.config,i=n.attributes,o=n.metrics,s=n.session,a=r.endpointId,c={ApplicationId:r.appId,EventsRequest:{BatchItem:{}}},u={Endpoint:{}};return u.Events=((t={})[n.eventId]={EventType:n.name,Timestamp:new Date(e.timestamp).toISOString(),Attributes:i,Metrics:o,Session:s},t),c.EventsRequest.BatchItem[a]=u,c},e.prototype._pinpointPutEvents=function(e,t){return OI(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,u,l;return xI(this,(function(h){switch(h.label){case 0:n=e.event.eventId,r=e.config.endpointId,i=this._generateBatchItemContext(e),o=new tI(i),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return s=h.sent(),u=(a=s.EventsResponse.Results[r].EventsItemResponse[n]).Message,NI.includes(c=a.StatusCode)?(MI.debug("record event success. ",s),[2,t.resolve(s)]):UI.includes(c)?(this._retry(e,t),[3,4]):(MI.error("Event "+n+" is not accepted, the error is "+u),[2,t.reject(s)]);case 3:return l=h.sent(),this._eventError(l),[2,t.reject(l)];case 4:return[2]}}))}))},e.prototype._pinpointSendStopSession=function(e,t){if(jI){var n=this._generateBatchItemContext(e),r=this._config.region,i={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},o="https://pinpoint."+r+".amazonaws.com/v1/apps/"+n.ApplicationId+"/events/legacy",s=JSON.stringify(n.EventsRequest),a=Zb.signUrl({url:o,body:s,method:"POST"},i,{region:r,service:"mobiletargeting"},null);return navigator.sendBeacon(a,s)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},e.prototype._retry=function(e,t){e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:e.config.resendLimit,e.resendLimit-- >0?(MI.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):MI.debug("retry times used up for event "+e.eventName)},e.prototype._updateEndpoint=function(e){return OI(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,c,u,l;return xI(this,(function(h){switch(h.label){case 0:n=e.handlers,i=(r=(t=e.params).config).appId,o=r.endpointId,s=this._endpointRequest(r,dw.transferKeyToLowerCase(t.event,[],["attributes","userAttributes","Attributes","UserAttributes"])),a={ApplicationId:i,EndpointId:o,EndpointRequest:s},h.label=1;case 1:return h.trys.push([1,3,,4]),c=new nI(a),[4,this.pinpointClient.send(c)];case 2:return u=h.sent(),MI.debug("updateEndpoint success",u),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(u),[2];case 3:return l=h.sent(),[2,this._handleEndpointUpdateFailure({err:l,update_params:a,endpointObject:e})];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateFailure=function(e){return OI(this,void 0,void 0,(function(){var t,n,r;return xI(this,(function(i){switch(n=e.endpointObject,r=(t=e.err).$metadata&&t.$metadata.httpStatusCode,MI.debug("updateEndpoint error",t),r){case 403:return[2,this._handleEndpointUpdateForbidden(e)];default:if(UI.includes(r))return[2,this._retryEndpointUpdate(n,!0)];MI.error("updateEndpoint failed",t),n.handlers.reject(t)}return[2]}))}))},e.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject;if("ExpiredTokenException"!==t.code&&!t.retryable)return n.handlers.reject(t);this._retryEndpointUpdate(n)},e.prototype._retryEndpointUpdate=function(e,t){void 0===t&&(t=!1),MI.debug("_retryEndpointUpdate",e);var n=e.params;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:n.config.resendLimit,n.resendLimit-- >0)return MI.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));MI.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&MI.error("Initial endpoint update failed. ")},e.prototype._initClients=function(e){return OI(this,void 0,void 0,(function(){var t,n;return xI(this,(function(r){return MI.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===e.sessionToken&&this._config.credentials.identityId===e.identityId?(MI.debug("no change for aws credentials, directly return from init"),[2]):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=e,n=this._config.region,MI.debug("init clients with credentials",e),this.pinpointClient=new hI({region:n,credentials:e,customUserAgent:v_()}),this.pinpointClient.middlewareStack.addRelativeTo((function(e){return function(t){return delete t.request.headers["amz-sdk-invocation-id"],delete t.request.headers["amz-sdk-request"],e(t)}}),{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===e.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq(),[2])}))}))},e.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof AI},e.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new AI(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},e.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},e.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},e.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},e.prototype._customizePinpointClientReq=function(){},e.prototype._getEndpointId=function(e){return OI(this,void 0,void 0,(function(){var t;return xI(this,(function(n){switch(n.label){case 0:return[4,_I.getItem(e)];case 1:return t=n.sent(),MI.debug("endpointId from cache",t,"type",typeof t),t||(t=Object(YC.v1)(),_I.setItem(e,t)),[2,t]}}))}))},e.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.endpoint||{},o={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},s=PI(e.clientContext||{},["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),a=II(II(II({channelType:t.address?"android"===r.platform?"GCM":"APNS":void 0,requestId:Object(YC.v1)(),effectiveDate:(new Date).toISOString()},i),t),{attributes:II(II({},i.attributes),t.attributes),demographic:II(II(II(II({},o),s),i.demographic),t.demographic),location:II(II({},i.location),t.location),metrics:II(II({},i.metrics),t.metrics),user:{userId:t.userId||i.userId||n.identityId,userAttributes:II(II({},i.userAttributes),t.userAttributes)}}),c=PI(a,["userId","userAttributes","name","session","eventId","immediate"]);return dw.transferKeyToUpperCase(c,[],["metrics","userAttributes","attributes"])},e.prototype._eventError=function(e){MI.error("record event failed.",e),MI.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},e.prototype._getCredentials=function(){return OI(this,void 0,void 0,(function(){var e,t;return xI(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,xA.get()];case 1:return(e=n.sent())?(MI.debug("set credentials for analytics",e),[2,xA.shear(e)]):[2,null];case 2:return t=n.sent(),MI.debug("ensure credentials error",t),[2,null];case 3:return[2]}}))}))},e.category="Analytics",e.providerName="AWSPinpoint",e}(),VI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},HI=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(VI(arguments[t]));return e},qI=[],BI=function(){function e(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}return e.add=function(e,t,n){zI(e,t).set(n)},e.remove=function(e,t){zI(e,t).remove()},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t._originalMethod.apply(t,HI(n)))}},e.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},e}();function zI(e,t){var n=qI.filter((function(n){return n.context===e&&n.methodName===t}))[0];return n||(n=new BI(e,t),qI.push(n)),n}var GI=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},KI=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},WI=new Sb.a("PageViewTracker"),$I="aws-amplify-analytics-prevUrl",JI={enable:!1,provider:"AWSPinpoint",getUrl:function(){return dw.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},YI=function(){function e(e,t){WI.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},JI,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return e.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},e.prototype._isSameUrl=function(){return sessionStorage.getItem($I)===this._config.getUrl()&&(WI.debug("the url is same"),!0)},e.prototype._pageViewTrackDefault=function(){return GI(this,void 0,void 0,(function(){var e,t,n;return KI(this,(function(r){switch(r.label){case 0:return dw.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(WI.debug("not in the supported web enviroment"),[2]);case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return n=Object.assign({url:e},t),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch((function(e){WI.debug("Failed to record the page view event",e)})),sessionStorage.setItem($I,e)),[2]}}))}))},e.prototype._trackFunc=function(){return GI(this,void 0,void 0,(function(){var e,t,n;return KI(this,(function(r){switch(r.label){case 0:return dw.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(WI.debug("not in the supported web enviroment"),[2]);case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return n=Object.assign({url:e},t),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch((function(e){WI.debug("Failed to record the page view event",e)})),sessionStorage.setItem($I,e)),[2]}}))}))},e.prototype._pageViewTrackSPA=function(){dw.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(BI.add(history,"pushState",this._trackFunc),BI.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(BI.remove(history,"pushState"),BI.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):WI.debug("not in the supported web enviroment")},e}(),QI=dw.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,ZI=QI?QI.matches||QI.matchesSelector||QI.webkitMatchesSelector||QI.mozMatchesSelector||QI.msMatchesSelector||QI.oMatchesSelector:null;function XI(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||eO(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||eO(e,r))return!0}return!1}function eO(e,t){if("string"!=typeof t)return!1;if(ZI)return ZI.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,i=void 0;i=n[r];r++)if(i===e)return!0;return!1}var tO=new Sb.a("EventTracker"),nO={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},rO=function(){function e(e,t){dw.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},nO,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),tO.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):tO.debug("not in the supported web environment")}return e.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach((function(e){t._delegates[e]=function(e,t,n,r,i){void 0===i&&(i={});var o=function(e){var t;if(i.composed&&"function"==typeof e.composedPath)for(var o=e.composedPath(),s=0,a=void 0;a=o[s];s++)1===a.nodeType&&XI(a,n)&&(t=a);else t=function(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)t.push(n=n.parentNode);return t}(e)),o=0;r=i[o];o++)if(XI(r,t))return r}(e.target,n,!0);t&&r.call(t,e,t)};return e.addEventListener(t,o,i.useCapture),{destroy:function(){e.removeEventListener(t,o,i.useCapture)}}}(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})}))}}else Object.keys(this._delegates).forEach((function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()})),this._delegates={};return this._config},e.prototype._trackFunc=function(e,t){return n=this,void 0,i=function(){var n,r,i,o,s,a;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(c){switch(c.label){case 0:return n={},r=t.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),i=t.getAttribute(this._config.selectorPrefix+"name"),(o=t.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach((function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]})),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return s=c.sent(),[3,3];case 2:s=this._config.attributes,c.label=3;case 3:return a=Object.assign({type:e.type,target:e.target.localName+" with id "+e.target.id},s,n),tO.debug("events needed to be recorded",r),tO.debug("attributes needed to be attached",n),r.indexOf(e.type)<0?(tO.debug("event "+e.type+" is not selected to be recorded"),[2]):(this._tracker({name:i||"event",attributes:a},this._config.provider).catch((function(t){tO.debug("Failed to record the "+e.type+" event', "+t)})),[2])}}))},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{a(i.next(e))}catch(n){t(n)}}function s(e){try{a(i.throw(e))}catch(n){t(n)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}a((i=i.apply(n,[])).next())}));var n,r,i},e}(),iO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},oO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},sO=new Sb.a("SessionTracker"),aO={enable:!1,provider:"AWSPinpoint"},cO=!1,uO=function(){function e(e,t){this._config=Object.assign({},aO,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return e.prototype._envCheck=function(){if(!dw.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return sO.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return sO.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},e.prototype._trackFunc=function(){return iO(this,void 0,void 0,(function(){var e,t;return oO(this,(function(n){switch(n.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return e=n.sent(),[3,3];case 2:e=this._config.attributes,n.label=3;case 3:return t=Object.assign({},e),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:t},this._config.provider).catch((function(e){sO.debug("record session stop event failed.",e)})):this._tracker({name:"_session.start",attributes:t},this._config.provider).catch((function(e){sO.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype._trackBeforeUnload=function(e){var t=this;Promise.resolve("function"==typeof this._config.attributes?this._config.attributes():this._config.attributes).then((function(e){var n=Object.assign({},e);t._tracker({name:"_session.stop",attributes:n,immediate:!0},t._config.provider).catch((function(e){sO.debug("record session stop event failed.",e)}))}))},e.prototype._sendInitialEvent=function(){return iO(this,void 0,void 0,(function(){var e,t;return oO(this,(function(n){switch(n.label){case 0:return cO?(sO.debug("the start session has been sent when the page is loaded"),[2]):(cO=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return e=n.sent(),[3,3];case 2:e=this._config.attributes,n.label=3;case 3:return t=Object.assign({},e),this._tracker({name:"_session.start",attributes:t},this._config.provider).catch((function(e){sO.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype.configure=function(e){return this._envCheck()?(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},e}(),lO=function(){return(lO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},hO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},dO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},fO=new Sb.a("AnalyticsClass"),pO="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",gO={pageView:YI,event:rO,session:uO},mO=null,yO=function(){function e(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},mO=this,this.record=this.record.bind(this),xb.listen("auth",_O),xb.listen("storage",_O),xb.listen("analytics",_O)}return e.prototype.getModuleName=function(){return"Analytics"},e.prototype.configure=function(e){var t=this;if(!e)return this._config;fO.debug("configure Analytics",e);var n=Rb.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,n.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach((function(e){var n="AWSPinpoint"!==e.getProviderName()||t._config.AWSPinpoint?t._config[e.getProviderName()]:t._config;e.configure(lO({disabled:t._config.disabled,autoSessionRecord:t._config.autoSessionRecord},n))})),0===this._pluggables.length&&this.addPluggable(new FI),xb.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",pO),fO.debug("current configuration",this._config),this._config},e.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=lO({disabled:this._config.disabled},t);return e.configure(n),n}},e.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return fO.debug("No plugin found with providerName",e),null},e.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void fO.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},e.prototype.disable=function(){this._disabled=!0},e.prototype.enable=function(){this._disabled=!1},e.prototype.startSession=function(e){return hO(this,void 0,void 0,(function(){return dO(this,(function(t){return[2,this._sendEvent({event:{name:"_session.start"},provider:e})]}))}))},e.prototype.stopSession=function(e){return hO(this,void 0,void 0,(function(){return dO(this,(function(t){return[2,this._sendEvent({event:{name:"_session.stop"},provider:e})]}))}))},e.prototype.record=function(e,t,n){return hO(this,void 0,void 0,(function(){return dO(this,(function(r){return[2,this._sendEvent("string"==typeof e?{event:{name:e,attributes:t,metrics:n},provider:"AWSPinpoint"}:{event:e,provider:t})]}))}))},e.prototype.updateEndpoint=function(e,t){return hO(this,void 0,void 0,(function(){var n;return dO(this,(function(r){return n=lO(lO({},e),{name:"_update_endpoint"}),[2,this.record(n,t)]}))}))},e.prototype._sendEvent=function(e){var t=this;if(this._disabled)return fO.debug("Analytics has been disabled"),Promise.resolve();var n=e.provider?e.provider:"AWSPinpoint";return new Promise((function(r,i){t._pluggables.forEach((function(t){t.getProviderName()===n&&t.record(e,{resolve:r,reject:i})}))}))},e.prototype.autoTrack=function(e,t){if(gO[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new gO[e](this.record,t)}else fO.debug("invalid tracker type")},e}(),vO=!1,bO=!1,wO=!1,_O=function(e){var t=e.channel,n=e.payload;switch(fO.debug("on hub capsule "+t,n),t){case"auth":SO(n);break;case"storage":CO(n);break;case"analytics":EO(n)}},CO=function(e){var t=e.data,n=t.attrs;n&&wO&&mO.record({name:"Storage",attributes:n,metrics:t.metrics}).catch((function(e){fO.debug("Failed to send the storage event automatically",e)}))},SO=function(e){var t=e.event;if(t){var n=function(e){return hO(void 0,void 0,void 0,(function(){var t;return dO(this,(function(n){switch(n.label){case 0:if(!bO||!wO)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,mO.record({name:"_userauth."+e})];case 2:return[2,n.sent()];case 3:return t=n.sent(),fO.debug("Failed to send the "+e+" event automatically",t),[3,4];case 4:return[2]}}))}))};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":(bO=!0)&&wO&&TO()}}},EO=function(e){var t=e.event;if(t)switch(t){case"pinpointProvider_configured":wO=!0,bO&&wO&&TO()}},TO=function(){var e=mO.configure();!vO&&e.autoSessionRecord&&(mO.updateEndpoint({immediate:!0}).catch((function(e){fO.debug("Failed to update the endpoint",e)})),vO=!0),mO.autoTrack("session",{enable:e.autoSessionRecord})},AO=new yO;Mb.a.register(AO);var IO=AO,OO=function(e){return e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple",e}({});function xO(e){return e&&!!["provider"].find((function(t){return e.hasOwnProperty(t)}))}function PO(e){return void 0!==e.redirectSignIn}var kO=function(e){return e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e}({}),RO=n("iVi/");function MO(e,t){void 0===t&&(t={});var n=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(r){}return e}var UO,NO=function(){return(NO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},DO=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?RO.parse(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=RO.parse(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),MO(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=MO(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var r;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=NO(NO({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=RO.serialize(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=NO(NO({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=NO({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=RO.serialize(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),LO=cw().isBrowser,jO=function(){function e(e){void 0===e&&(e={}),this.cookies=new DO,this.store=LO?window.localStorage:Object.create(null),this.cookies=e.req?new DO(e.req.headers.cookie):new DO,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map((function(t,n){return e.key(n)})).forEach((function(t){return e.removeItem(t)}))},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){switch(this.setLocalItem(e,t),e.split(".").pop()){case"LastAuthUser":case"accessToken":case"idToken":this.setUniversalItem(e,t)}},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t){this.cookies.set(e,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}(),FO=function(){function e(e){var t=e||{},n=t.Username,r=t.Password,i=t.AuthParameters,o=t.ClientMetadata;this.validationData=t.ValidationData||{},this.authParameters=i||{},this.clientMetadata=o||{},this.username=n,this.password=r}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),VO=n("r0jy"),HO=n("Ib8C"),qO=n.n(HO),BO=(n("F+F2"),n("lPiR")),zO=n.n(BO),GO=n("7VPu"),KO=n.n(GO);if("undefined"!=typeof window&&window.crypto&&(UO=window.crypto),!UO&&"undefined"!=typeof window&&window.msCrypto&&(UO=window.msCrypto),!UO&&"undefined"!=typeof global&&global.crypto&&(UO=global.crypto),!UO)try{UO=n(!function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}())}catch(KP){}function WO(){if(UO){if("function"==typeof UO.getRandomValues)try{return UO.getRandomValues(new Uint32Array(1))[0]}catch(KP){}if("function"==typeof UO.randomBytes)try{return UO.randomBytes(4).readInt32LE()}catch(KP){}}throw new Error("Native crypto module could not be used to get secure random number.")}var $O,JO=function(){function e(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],r=0;r<t;r+=4)n.push(WO());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}(),YO=QO;function QO(e,t){null!=e&&this.fromString(e,t)}function ZO(){return new QO(null)}var XO="undefined"!=typeof navigator;XO&&"Microsoft Internet Explorer"==navigator.appName?(QO.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,l=a*c+u*s;i=((c=s*c+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*u+(i>>>30),n[r++]=1073741823&c}return i},$O=30):XO&&"Netscape"!=navigator.appName?(QO.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},$O=26):(QO.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,l=a*c+u*s;i=((c=s*c+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*u,n[r++]=268435455&c}return i},$O=28),QO.prototype.DB=$O,QO.prototype.DM=(1<<$O)-1,QO.prototype.DV=1<<$O,QO.prototype.FV=Math.pow(2,52),QO.prototype.F1=52-$O,QO.prototype.F2=2*$O-52;var ex,tx,nx=new Array;for(ex="0".charCodeAt(0),tx=0;tx<=9;++tx)nx[ex++]=tx;for(ex="a".charCodeAt(0),tx=10;tx<36;++tx)nx[ex++]=tx;for(ex="A".charCodeAt(0),tx=10;tx<36;++tx)nx[ex++]=tx;function rx(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function ix(e,t){var n=nx[e.charCodeAt(t)];return null==n?-1:n}function ox(e){var t=ZO();return t.fromInt(e),t}function sx(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function ax(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}ax.prototype.convert=function(e){var t=ZO();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(QO.ZERO)>0&&this.m.subTo(t,t),t},ax.prototype.revert=function(e){var t=ZO();return e.copyTo(t),this.reduce(t),t},ax.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},ax.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},ax.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},QO.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},QO.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},QO.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=ix(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&QO.ZERO.subTo(this,this)},QO.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},QO.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},QO.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},QO.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},QO.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},QO.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},QO.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&QO.ZERO.subTo(t,t)},QO.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},QO.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=ZO());var o=ZO(),s=this.s,a=e.s,c=this.DB-sx(r[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,l=o[u-1];if(0!=l){var h=l*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),d=this.FV/h,f=(1<<this.F1)/h,p=1<<this.F2,g=n.t,m=g-u,y=null==t?ZO():t;for(o.dlShiftTo(m,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),QO.ONE.dlShiftTo(u,y),y.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--m>=0;){var v=n[--g]==l?this.DM:Math.floor(n[g]*d+(n[g-1]+p)*f);if((n[g]+=o.am(0,v,n,m,0,u))<v)for(o.dlShiftTo(m,y),n.subTo(y,n);n[g]<--v;)n.subTo(y,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&QO.ZERO.subTo(t,t)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),s<0&&QO.ZERO.subTo(n,n)}}},QO.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},QO.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},QO.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=rx(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=rx(n));return i?o:"0"},QO.prototype.negate=function(){var e=ZO();return QO.ZERO.subTo(this,e),e},QO.prototype.abs=function(){return this.s<0?this.negate():this},QO.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},QO.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+sx(this[this.t-1]^this.s&this.DM)},QO.prototype.mod=function(e){var t=ZO();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(QO.ZERO)>0&&e.subTo(t,t),t},QO.prototype.equals=function(e){return 0==this.compareTo(e)},QO.prototype.add=function(e){var t=ZO();return this.addTo(e,t),t},QO.prototype.subtract=function(e){var t=ZO();return this.subTo(e,t),t},QO.prototype.multiply=function(e){var t=ZO();return this.multiplyTo(e,t),t},QO.prototype.divide=function(e){var t=ZO();return this.divRemTo(e,t,null),t},QO.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=ox(1),s=new ax(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,c=3,u=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),r>1){var h=ZO();for(s.sqrTo(a[1],h);c<=l;)a[c]=ZO(),s.mulTo(h,a[c-2],a[c]),c+=2}var d,f,p=e.t-1,g=!0,m=ZO();for(i=sx(e[p])-1;p>=0;){for(i>=u?d=e[p]>>i-u&l:(d=(e[p]&(1<<i+1)-1)<<u-i,p>0&&(d|=e[p-1]>>this.DB+i-u)),c=r;0==(1&d);)d>>=1,--c;if((i-=c)<0&&(i+=this.DB,--p),g)a[d].copyTo(o),g=!1;else{for(;c>1;)s.sqrTo(o,m),s.sqrTo(m,o),c-=2;c>0?s.sqrTo(o,m):(f=o,o=m,m=f),s.mulTo(m,a[d],o)}for(;p>=0&&0==(e[p]&1<<i);)s.sqrTo(o,m),f=o,o=m,m=f,--i<0&&(i=this.DB-1,--p)}var y=s.revert(o);return n(null,y),y},QO.ZERO=ox(0),QO.ONE=ox(1);var cx=function(e){return VO.Buffer.from((new JO).random(e).toString(),"hex")},ux=function(){function e(e){this.N=new YO("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new YO("2",16),this.k=new YO(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=VO.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){var e=cx(128).toString("hex");return new YO(e,16).mod(this.N)},t.generateRandomString=function(){return cx(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=this.hash(""+e+t+":"+this.randomPassword),o=cx(16).toString("hex");this.SaltToHashDevices=this.padHex(new YO(o,16)),this.g.modPow(new YO(this.hexHash(this.SaltToHashDevices+i),16),this.N,(function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,r){e&&t(e,null),r.mod(n.N).equals(YO.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new YO(this.UHexHash,16)},t.hash=function(e){var t=e instanceof VO.Buffer?qO.a.lib.WordArray.create(e):e,n=zO()(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(VO.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=qO.a.lib.WordArray.create(VO.Buffer.concat([this.infoBits,VO.Buffer.from(String.fromCharCode(1),"utf8")])),r=e instanceof VO.Buffer?qO.a.lib.WordArray.create(e):e,i=t instanceof VO.Buffer?qO.a.lib.WordArray.create(t):t,o=KO()(r,i),s=KO()(n,o);return VO.Buffer.from(s.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(YO.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(YO.ZERO))throw new Error("U cannot be zero.");var s=this.hash(""+this.poolName+e+":"+t),a=new YO(this.hexHash(this.padHex(r)+s),16);this.calculateS(a,n,(function(e,t){e&&i(e,null);var n=o.computehkdf(VO.Buffer.from(o.padHex(t),"hex"),VO.Buffer.from(o.padHex(o.UValue.toString(16)),"hex"));i(null,n)}))},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,(function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,(function(e,t){e&&n(e,null),n(null,t.mod(r.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},e}(),lx=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(VO.Buffer.from(e,"base64").toString("utf8"))}catch(KP){return{}}},e}(),hx=function(e){var t,n;function r(t){return e.call(this,(void 0===t?{}:t).AccessToken||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(lx),dx=function(e){var t,n;function r(t){return e.call(this,(void 0===t?{}:t).IdToken||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(lx),fx=function(){function e(e){this.token=(void 0===e?{}:e).RefreshToken||""}return e.prototype.getToken=function(){return this.token},e}(),px=n("ETIr"),gx=n.n(px),mx=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),yx=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vx=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],bx=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=vx[e.getUTCDay()],n=yx[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),wx=function(){function e(e){var t=void 0===e?{}:e,n=t.Value;this.Name=t.Name||"",this.Value=n||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),_x={},Cx=function(){function e(){}return e.setItem=function(e,t){return _x[e]=t,_x[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(_x,e)?_x[e]:void 0},e.removeItem=function(e){return delete _x[e]},e.clear=function(){return _x={}},e}(),Sx=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Cx}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),Ex="undefined"!=typeof navigator?navigator.userAgent:"nodejs",Tx=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Sx).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,(function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===r.ChallengeName?(n.Session=r.Session,t.customChallenge(i)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,o=new ux(this.pool.getUserPoolId().split("_")[1]),s=new bx,a={};null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey),a.USERNAME=this.username,o.getLargeAValue((function(c,u){c&&t.onFailure(c),a.SRP_A=u.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(a.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),h={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:a,ClientMetadata:l};i.getUserContextData(i.username)&&(h.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",h,(function(a,c){if(a)return t.onFailure(a);var u=c.ChallengeParameters;i.username=u.USER_ID_FOR_SRP,n=new YO(u.SRP_B,16),r=new YO(u.SALT,16),i.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,(function(e,n){e&&t.onFailure(e);var r=s.getNowString(),a=qO.a.lib.WordArray.create(VO.Buffer.concat([VO.Buffer.from(i.pool.getUserPoolId().split("_")[1],"utf8"),VO.Buffer.from(i.username,"utf8"),VO.Buffer.from(u.SECRET_BLOCK,"base64"),VO.Buffer.from(r,"utf8")])),h=qO.a.lib.WordArray.create(n),d=gx.a.stringify(KO()(a,h)),f={};f.USERNAME=i.username,f.PASSWORD_CLAIM_SECRET_BLOCK=u.SECRET_BLOCK,f.TIMESTAMP=r,f.PASSWORD_CLAIM_SIGNATURE=d,null!=i.deviceKey&&(f.DEVICE_KEY=i.deviceKey);var p={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:f,Session:c.Session,ClientMetadata:l};i.getUserContextData()&&(p.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,(function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(f.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)}))}(p,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,o,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),r.PASSWORD){var i=new ux(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,(function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,o);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,o);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,o);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,o);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var s=null,a=null,c=[],u=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(e.ChallengeParameters.userAttributes),a=JSON.parse(e.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)c[l]=a[l].substr(u.length);return n.newPasswordRequired(s,c)}if("DEVICE_SRP_AUTH"!==i){this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var h=e.AuthenticationResult.NewDeviceMetadata;if(null==h)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var o={Salt:VO.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:VO.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=o.PasswordVerifier,r.deviceGroupKey=h.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:h.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:Ex},(function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))}else this.getDeviceResponse(n)},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new ux(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach((function(e){a[s+e]=t[e]})),a.NEW_PASSWORD=e,a.USERNAME=this.username;var c={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)}))},t.getDeviceResponse=function(e,t){var n=this,r=new ux(this.deviceGroupKey),i=new bx,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(s,a){s&&e.onFailure(s),o.SRP_A=a.toString(16);var c={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t};n.getUserContextData()&&(c.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",c,(function(t,o){if(t)return e.onFailure(t);var s=o.ChallengeParameters,a=new YO(s.SRP_B,16),c=new YO(s.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,a,c,(function(t,r){if(t)return e.onFailure(t);var a=i.getNowString(),c=qO.a.lib.WordArray.create(VO.Buffer.concat([VO.Buffer.from(n.deviceGroupKey,"utf8"),VO.Buffer.from(n.deviceKey,"utf8"),VO.Buffer.from(s.SECRET_BLOCK,"base64"),VO.Buffer.from(a,"utf8")])),u=qO.a.lib.WordArray.create(r),l=gx.a.stringify(KO()(c,u)),h={};h.USERNAME=n.username,h.PASSWORD_CLAIM_SECRET_BLOCK=s.SECRET_BLOCK,h.TIMESTAMP=a,h.PASSWORD_CLAIM_SIGNATURE=l,h.DEVICE_KEY=n.deviceKey;var d={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:h,Session:o.Session};n.getUserContextData()&&(d.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",d,(function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new ux(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,(function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)}))},t.sendMFACode=function(e,t,n,r){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var s=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new ux(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var o={Salt:VO.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:VO.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:Ex},(function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):r.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o=new wx({Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value});r.push(o)}return e(null,r)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(){var e=this;return new Promise((function(t){var n=e.signInUserSession.getRefreshToken();n&&n.getToken()?e.refreshSession(n,t):t()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible().then((function(){return e}))})).then((function(t){return e(null,t)})).catch(e);else try{return void e(null,JSON.parse(r))}catch(KP){return this.clearCachedUserData(),void e(KP,null)}else this.fetchUserData().then((function(t){e(null,t)})).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",r=t+".accessToken",i=t+".refreshToken",o=t+".clockDrift";if(this.storage.getItem(n)){var s=new dx({IdToken:this.storage.getItem(n)}),a=new hx({AccessToken:this.storage.getItem(r)}),c=new fx({RefreshToken:this.storage.getItem(i)}),u=parseInt(this.storage.getItem(o),0)||0,l=new mx({IdToken:s,AccessToken:a,RefreshToken:c,ClockDrift:u});if(l.isValid())return this.signInUserSession=l,e(null,this.signInUserSession);if(!c.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(c,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,o={};o.REFRESH_TOKEN=e.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";this.storage.getItem(a)&&(this.username=this.storage.getItem(a),this.deviceKey=this.storage.getItem(s+"."+this.username+".deviceKey"),o.DEVICE_KEY=this.deviceKey);var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,(function(t,n){if(t)return"NotAuthorizedException"===t.code&&r.clearCachedUser(),i(t,null);if(n){var o=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),i(null,r.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".accessToken",n=e+"."+this.username+".refreshToken",r=e+"."+this.username+".clockDrift",i=e+".LastAuthUser";this.storage.setItem(e+"."+this.username+".idToken",this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(t,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(r,""+this.signInUserSession.getClockDrift()),this.storage.setItem(i,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.setItem(e+".deviceKey",this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.removeItem(e+".deviceKey"),this.storage.removeItem(t),this.storage.removeItem(n)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".accessToken",n=e+"."+this.username+".refreshToken",r=e+".LastAuthUser",i=e+"."+this.username+".clockDrift";this.storage.removeItem(e+"."+this.username+".idToken"),this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i)},t.getCognitoUserSession=function(e){var t=new dx(e),n=new hx(e),r=new fx(e);return new mx({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess()}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess()}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,(function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},e}();function Ax(){}n("zgjP"),Ax.prototype.userAgent="aws-amplify/0.1.x js";var Ix=Ax;function Ox(e){var t="function"==typeof Map?new Map:void 0;return(Ox=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return xx(e,arguments,Rx(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),kx(n,e)})(e)}function xx(e,t,n){return(xx=Px()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&kx(i,n.prototype),i}).apply(null,arguments)}function Px(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function kx(e,t){return(kx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rx(e){return(Rx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mx=function(e){var t,n;function r(t,n,r,i){var o;return(o=e.call(this,t)||this).code=n,o.name=r,o.statusCode=i,o}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(Ox(Error)),Ux=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(r,i){n.request(e,t,(function(e,t){e?i(new Mx(e.message,e.code,e.name,e.statusCode)):r(t)}))}))},t.request=function(e,t,n){var r,i=Object.assign({},this.fetchOptions,{headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":Ix.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,i).then((function(e){return r=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(r.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop();return n({code:t,name:t,message:e.message||e.Message||null})})).catch((function(e){if(!(r&&r.headers&&r.headers.get("x-amzn-errortype")))return e instanceof Error&&"Network error"===e.message?n({code:"NetworkError",name:e.name,message:e.message}):n(e);try{var t=r.headers.get("x-amzn-errortype").split(":")[0],i={code:t,name:t,statusCode:r.status,message:r.status?r.status.toString():null};return n(i)}catch(o){return n(e)}}))},e}(),Nx=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");var c=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new Ux(c,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new Sx).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var s=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,(function(t,n){if(t)return i(t,null);var r={user:new Tx({Username:e,Pool:s,Storage:s.storage}),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,r)}))},t.getCurrentUser=function(){var e=this.storage.getItem("CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser");return e?new Tx({Username:e,Pool:this,Storage:this.storage}):null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),Dx=n("p46w"),Lx=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,this.path=e.path?e.path:"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?e.expires:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||e.secure,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),Dx.set(e,t,n),Dx.get(e)},t.getItem=function(e){return Dx.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),Dx.remove(e,t)},t.clear=function(){var e,t=Dx.get();for(e=0;e<t.length;++e)Dx.remove(t[e]);return{}},e}(),jx=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},Fx=function(){return(Fx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Vx=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Hx=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},qx=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Bx="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",zx=function(e,t,n){xb.dispatch("auth",{event:e,data:t,message:n},"Auth",Bx)},Gx=new Sb.a("OAuth"),Kx=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||jx,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},e.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=OO.Cognito);var s=this._generateState(32),a=o?s+"-"+o.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join(""):s;!function(e){window.sessionStorage.setItem("oauth_state",e)}(a);var c=this._generateRandom(128);window.sessionStorage.setItem("ouath_pkce_key",c);var u=this._generateChallenge(c),l=this._scopes.join(" "),h="https://"+t+"/oauth2/authorize?"+Object.entries(Fx(Fx({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:l,state:a},"code"===e?{code_challenge:u}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map((function(e){var t=qx(e,2),n=t[1];return encodeURIComponent(t[0])+"="+encodeURIComponent(n)})).join("&");Gx.debug("Redirecting to "+h),this._urlOpener(h,n)},e.prototype._handleCodeFlow=function(e){return Vx(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,c,u,l,h,d;return Hx(this,(function(f){switch(f.label){case 0:return(t=(Object(jb.parse)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=qx(t,2),i=r[0],o=r[1];return Fx(Fx({},e),((n={})[i]=o,n))}),{code:void 0}).code)&&Object(jb.parse)(e).pathname===Object(jb.parse)(this._config.redirectSignIn).pathname?(zx("codeFlow",{},"Retrieving tokens from "+(n="https://"+this._config.domain+"/oauth2/token")),r=PO(this._config)?this._cognitoClientId:this._config.clientID,i=PO(this._config)?this._config.redirectSignIn:this._config.redirectUri,p=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),s=Fx({grant_type:"authorization_code",code:t,client_id:r,redirect_uri:i},(o=p)?{code_verifier:o}:{}),Gx.debug("Calling token endpoint: "+n+" with",s),a=Object.entries(s).map((function(e){var t=qx(e,2),n=t[1];return encodeURIComponent(t[0])+"="+encodeURIComponent(n)})).join("&"),[4,fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a})]):[2];case 1:return[4,f.sent().json()];case 2:if(c=f.sent(),u=c.access_token,l=c.refresh_token,h=c.id_token,d=c.error)throw new Error(d);return[2,{accessToken:u,refreshToken:l,idToken:h}]}var p}))}))},e.prototype._handleImplicitFlow=function(e){return Vx(this,void 0,void 0,(function(){var t,n,r;return Hx(this,(function(i){return t=(Object(jb.parse)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=qx(t,2),i=r[0],o=r[1];return Fx(Fx({},e),((n={})[i]=o,n))}),{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,zx("implicitFlow",{},"Got tokens from "+e),Gx.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]}))}))},e.prototype.handleAuthResponse=function(e){return Vx(this,void 0,void 0,(function(){var t,n,r,i,o,s;return Hx(this,(function(a){switch(a.label){case 0:if(a.trys.push([0,5,,6]),t=e?Fx(Fx({},(Object(jb.parse)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=qx(t,2);return e[n[0]]=n[1],e}),{})),(Object(jb.parse)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=qx(t,2);return e[n[0]]=n[1],e}),{})):{},n=t.error_description,t.error)throw new Error(n);return r=this._validateState(t),Gx.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(i=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,Fx.apply(void 0,[Fx.apply(void 0,i.concat([a.sent()])),{state:r}])];case 2:return o=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,Fx.apply(void 0,[Fx.apply(void 0,o.concat([a.sent()])),{state:r}])];case 4:return[3,6];case 5:throw s=a.sent(),Gx.error("Error handling auth response.",s),s;case 6:return[2]}}))}))},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return Vx(this,void 0,void 0,(function(){var e,t,n;return Hx(this,(function(r){return e="https://"+this._config.domain+"/logout?",t=PO(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=PO(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map((function(e){var t=qx(e,2);return t[0]+"="+t[1]})).join("&"),zx("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),Gx.debug("Signing out from "+e),[2,this._urlOpener(e)]}))}))},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){return this._base64URL(zO()(e))},e.prototype._base64URL=function(e){return e.toString(gx.a).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1)n.push(t[e[r]%t.length]);return n.join("")},e}(),Wx=function(e){return e.DEFAULT_MSG="Authentication Error",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e}({}),$x=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jx=new Sb.a("AuthError"),Yx=function(e){function t(n){var r=this,i=Zx[n],o=i.message,s=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||o,Jx.error(r.log),r}return $x(t,e),t}(Error),Qx=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return $x(t,e),t}(Yx),Zx={noConfig:{message:Wx.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:Wx.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:Wx.EMPTY_USERNAME},invalidUsername:{message:Wx.INVALID_USERNAME},emptyPassword:{message:Wx.EMPTY_PASSWORD},emptyCode:{message:Wx.EMPTY_CODE},signUpError:{message:Wx.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:Wx.NO_MFA},invalidMFA:{message:Wx.INVALID_MFA},emptyChallengeResponse:{message:Wx.EMPTY_CHALLENGE},noUserSession:{message:Wx.NO_USER_SESSION},default:{message:Wx.DEFAULT_MSG}},Xx=function(){return(Xx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},eP=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},tP=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},nP=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},rP=new Sb.a("AuthClass"),iP="aws.cognito.signin.user.admin",oP="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",sP=function(e,t,n){xb.dispatch("auth",{event:e,data:t,message:n},"Auth",oP)},aP=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=xA,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?sP("tokenRefresh",void 0,"New token retrieved"):sP("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),xb.listen("auth",(function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}))}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};rP.debug("configure Auth");var n=Object.assign({},this._config,Rb.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,c=r.region,u=r.identityPoolId,l=r.mandatorySignIn,h=r.refreshHandlers,d=r.identityPoolRegion,f=r.clientMetadata,p=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw rP.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new Lx(s):e.ssr?new jO:(new __).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var g={UserPoolId:i,ClientId:o,endpoint:p};g.Storage=this._storage,this.userPool=new Nx(g,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:l,region:d||c,userPoolId:i,identityPoolId:u,refreshHandlers:h,storage:this._storage});var m=a?PO(this._config.oauth)?a:a.awsCognito:void 0;if(m){var y=Object.assign({cognitoClientId:o,UserPoolId:i,domain:m.domain,scopes:m.scope,redirectSignIn:m.redirectSignIn,redirectSignOut:m.redirectSignOut,responseType:m.responseType,Storage:this._storage,urlOpener:m.urlOpener,clientMetadata:f},m.options);this._oAuthHandler=new Kx({scopes:y.scopes,config:y,cognitoClientId:y.cognitoClientId});var v={};!function(e){if(dw.browserOrNode().isBrowser&&window.location)n=window.location.href,v[n]||(v[n]=!0,t._handleAuthResponse(n));else if(!dw.browserOrNode().isNode)throw new Error("Not supported");var n}()}return sP("configured",null,"The Auth category has been configured successfully"),this._config},e.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],c=null;if(e&&"string"==typeof e){o=e,s=n?n[0]:null;var u=n?n[1]:null,l=n?n[2]:null;u&&a.push({Name:"email",Value:u}),l&&a.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return this.rejectAuthError(kO.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var h=e.attributes;h&&Object.keys(h).map((function(e){a.push({Name:e,Value:h[e]})})),c=e.validationData||null}return o?s?(rP.debug("signUp attrs:",a),rP.debug("signUp validation data:",c),new Promise((function(e,n){t.userPool.signUp(o,s,a,c,(function(t,r){t?(sP("signUp_failure",t,o+" failed to signup"),n(t)):(sP("signUp",r,o+" has signed up successfully"),e(r))}),i)}))):this.rejectAuthError(kO.EmptyPassword):this.rejectAuthError(kO.EmptyUsername)},e.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(kO.EmptyUsername);if(!t)return this.rejectAuthError(kO.EmptyCode);var r,i=this.createCognitoUser(e),o=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?r=n.clientMetadata:this._config.clientMetadata&&(r=this._config.clientMetadata),new Promise((function(e,n){i.confirmRegistration(t,o,(function(t,r){t?n(t):e(r)}),r)}))},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(kO.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(e,r){n.resendConfirmationCode((function(t,n){t?r(t):e(n)}),t)}))},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(kO.InvalidUsername);void 0!==t&&rP.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(kO.EmptyUsername);var s=new FO({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(s):this.signInWithoutPassword(s)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return eP(r,void 0,void 0,(function(){var r,s,a,c;return tP(this,(function(u){switch(u.label){case 0:rP.debug(o),delete e.challengeName,delete e.challengeParam,u.label=1;case 1:return u.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return u.sent(),[4,this.Credentials.set(o,"session")];case 3:return r=u.sent(),rP.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=u.sent(),rP.debug("cannot get cognito credentials",s),[3,9];case 5:return u.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=u.sent(),i.user=a,sP("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return c=u.sent(),rP.error("Failed to get the signed in user",c),n(c),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(t){rP.debug("signIn failure",t),sP("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){rP.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){rP.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){rP.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){rP.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){rP.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){rP.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise((function(r,i){n.authenticateUser(e,t.authCallbacks(n,(function(e){t.pendingSignIn=null,r(e)}),(function(e){t.pendingSignIn=null,i(e)})))})),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))}))},e.prototype.getMFAOptions=function(e){return new Promise((function(t,n){e.getMFAOptions((function(e,r){if(e)return rP.debug("get MFA Options failed",e),void n(e);rP.debug("get MFA options success",r),t(r)}))}))},e.prototype.getPreferredMFA=function(e,t){var n=this;return new Promise((function(r,i){e.getUserData((function(e,t){if(e)return rP.debug("getting preferred mfa failed",e),void i(e);var o=n._getMfaTypeFromUserData(t);return o?void r(o):void i("invalid MFA Type")}),{bypassCache:!!t&&t.bypassCache})}))},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;r?0===r.length?t="NOMFA":rP.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){return new Promise((function(n,r){e.getUserData((function(e,t){return e?(rP.debug("getting user data failed",e),void r(e)):void n(t)}),t)}))},e.prototype.setPreferredMFA=function(e,t){return eP(this,void 0,void 0,(function(){var n,r,i,o,s;return tP(this,(function(a){switch(a.label){case 0:return[4,this._getUserData(e,{bypassCache:!0})];case 1:switch(n=a.sent(),r=null,i=null,t){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return r={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return o=n.UserMFASettingList,[4,this._getMfaTypeFromUserData(n)];case 5:if("NOMFA"===(s=a.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===s)r={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==s)return[2,this.rejectAuthError(kO.InvalidMFA)];i={PreferredMfa:!1,Enabled:!1}}return o&&0!==o.length&&o.forEach((function(e){"SMS_MFA"===e?r={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(i={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return rP.debug("no validmfa method provided"),[2,this.rejectAuthError(kO.NoMFA)];case 7:return[2,new Promise((function(t,n){e.setUserMfaPreference(r,i,(function(r,i){if(r)return rP.debug("Set user mfa preference error",r),n(r);rP.debug("Set user mfa success",i),rP.debug("Caching the latest user data into local"),e.getUserData((function(e,r){return e?(rP.debug("getting user data failed",e),n(e)):t(i)}),{bypassCache:!0})}))}))]}}))}))},e.prototype.disableSMS=function(e){return new Promise((function(t,n){e.disableMFA((function(e,r){if(e)return rP.debug("disable mfa failed",e),void n(e);rP.debug("disable mfa succeed",r),t(r)}))}))},e.prototype.enableSMS=function(e){return new Promise((function(t,n){e.enableMFA((function(e,r){if(e)return rP.debug("enable mfa failed",e),void n(e);rP.debug("enable mfa succeed",r),t(r)}))}))},e.prototype.setupTOTP=function(e){return new Promise((function(t,n){e.associateSoftwareToken({onFailure:function(e){rP.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){rP.debug("associateSoftwareToken sucess",e),t(e)}})}))},e.prototype.verifyTotpToken=function(e,t){return rP.debug("verfication totp token",e,t),new Promise((function(n,r){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){rP.debug("verifyTotpToken failed",e),r(e)},onSuccess:function(t){sP("signIn",e,"A user "+e.getUsername()+" has been signed in"),rP.debug("verifyTotpToken success",t),n(t)}})}))},e.prototype.confirmSignIn=function(e,t,n,r){var i=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(kO.EmptyCode);var o=this;return new Promise((function(s,a){e.sendMFACode(t,{onSuccess:function(t){return eP(i,void 0,void 0,(function(){var n,r;return tP(this,(function(i){switch(i.label){case 0:rP.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),rP.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),rP.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,sP("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 6:return[2]}}))}))},onFailure:function(e){rP.debug("confirm signIn failure",e),a(e)}},n,r)}))},e.prototype.completeNewPassword=function(e,t,n,r){var i=this;if(void 0===n&&(n={}),void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(kO.EmptyPassword);var o=this;return new Promise((function(s,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return eP(i,void 0,void 0,(function(){var n,r;return tP(this,(function(i){switch(i.label){case 0:rP.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),rP.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),rP.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,sP("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 6:return[2]}}))}))},onFailure:function(e){rP.debug("completeNewPassword failure",e),sP("completeNewPassword_failure",e,i.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){rP.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,s(e)},mfaSetup:function(t,n){rP.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)},totpRequired:function(t,n){rP.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)}},r)}))},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;return void 0===n&&(n=this._config.clientMetadata),this.userPool?t?new Promise((function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)})):this.rejectAuthError(kO.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.updateUserAttributes=function(e,t,n){void 0===n&&(n=this._config.clientMetadata);var r=[],i=this;return new Promise((function(o,s){i.userSession(e).then((function(i){for(var a in t)"sub"!==a&&a.indexOf("_verified")<0&&r.push({Name:a,Value:t[a]});e.updateAttributes(r,(function(e,t){return e?s(e):o(t)}),n)}))}))},e.prototype.userAttributes=function(e){var t=this;return new Promise((function(n,r){t.userSession(e).then((function(t){e.getUserAttributes((function(e,t){e?r(e):n(t)}))}))}))},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then((function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}}))},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise((function(n,r){t._storageSync.then((function(){return eP(t,void 0,void 0,(function(){var t,i=this;return tP(this,(function(o){switch(o.label){case 0:return this.isOAuthInProgress()?(rP.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise((function(e){var t=setTimeout((function(){rP.debug("OAuth signIn in progress timeout"),xb.remove("auth",n),e()}),1e4);function n(r){var i=r.payload.event;"cognitoHostedUI"!==i&&"cognitoHostedUI_failure"!==i||(rP.debug("OAuth signIn resolved: "+i),clearTimeout(t),xb.remove("auth",n),e())}xb.listen("auth",n)}))]):[3,2];case 1:o.sent(),o.label=2;case 2:return(t=this.userPool.getCurrentUser())?(t.getSession((function(o,s){return eP(i,void 0,void 0,(function(){var i,a,c=this;return tP(this,(function(u){switch(u.label){case 0:return o?(rP.debug("Failed to get the user session",o),r(o),[2]):(i=!!e&&e.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:u.sent(),u.label=2;case 2:return(void 0===(a=s.getAccessToken().decodePayload().scope)?"":a).split(" ").includes(iP)?(t.getUserData((function(e,i){if(e)return rP.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?r(e):n(t));for(var o=i.PreferredMfaSetting||"NOMFA",s=[],a=0;a<i.UserAttributes.length;a++){var u=new wx({Name:i.UserAttributes[a].Name,Value:i.UserAttributes[a].Value});s.push(u)}var l=c.attributesToObject(s);return Object.assign(t,{attributes:l,preferredMFA:o}),n(t)}),{bypassCache:i}),[2]):(rP.debug("Unable to get the user data because the "+iP+" is not in the scopes of the access token"),[2,n(t)])}}))}))})),[2]):(rP.debug("Failed to get user from user pool"),r("No current user"),[2])}}))}))})).catch((function(e){return rP.debug("Failed to sync cache info into memory",e),r(e)}))})):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return eP(this,void 0,void 0,(function(){var t,n,r,i,o;return tP(this,(function(s){switch(s.label){case 0:rP.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),rP.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Xx(Xx({},r.user),{token:r.token}))}catch(a){rP.debug("cannot load federated user from auth storage")}return t?(this.user=t,rP.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:rP.debug("get current authenticated userpool user"),i=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=s.sent(),[3,9];case 8:return"No userPool"===(o=s.sent())&&rP.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),rP.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}}))}))},e.prototype.currentSession=function(){var e=this;return rP.debug("Getting current session"),this.userPool?new Promise((function(t,n){e.currentUserPoolUser().then((function(r){e.userSession(r).then((function(e){t(e)})).catch((function(e){rP.debug("Failed to get the current session",e),n(e)}))})).catch((function(e){rP.debug("Failed to get the current user",e),n(e)}))})):Promise.reject()},e.prototype.userSession=function(e){return e?new Promise((function(t,n){rP.debug("Getting the session from this user:",e),e.getSession((function(r,i){return r?(rP.debug("Failed to get the session from user",e),void n(r)):(rP.debug("Succeed to get the user session",i),void t(i))}))})):(rP.debug("the user is null"),this.rejectAuthError(kO.NoUserSession))},e.prototype.currentUserCredentials=function(){return eP(this,void 0,void 0,(function(){var e,t,n=this;return tP(this,(function(r){switch(r.label){case 0:rP.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),rP.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(i){rP.debug("failed to get or parse item aws-amplify-federatedInfo",i)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then((function(e){return rP.debug("getting session success",e),n.Credentials.set(e,"session")})).catch((function(e){return rP.debug("getting session failed",e),n.Credentials.set(null,"guest")}))]}}))}))},e.prototype.currentCredentials=function(){return rP.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise((function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(){return r()},onFailure:function(e){return i(e)}},n)}))},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise((function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})})):this.rejectAuthError(kO.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then((function(n){return t.verifyUserAttribute(n,e)}))},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then((function(r){return n.verifyUserAttributeSubmit(r,e,t)}))},e.prototype.cognitoIdentitySignOut=function(e,t){return eP(this,void 0,void 0,(function(){var n,r,i=this;return tP(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),rP.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(n,o){if(e&&e.global)rP.debug("user global sign out",t),t.getSession((function(e,s){if(e)return rP.debug("failed to get the user session",e),o(e);t.globalSignOut({onSuccess:function(e){if(rP.debug("global sign out success"),!r)return n();i.oAuthSignOutRedirect(n,o)},onFailure:function(e){return rP.debug("global sign out failed",e),o(e)}})}));else{if(rP.debug("user sign out",t),t.signOut(),!r)return n();i.oAuthSignOutRedirect(n,o)}}))]}}))}))},e.prototype.oAuthSignOutRedirect=function(e,t){dw.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout((function(){return e("Signout timeout fail")}),3e3)},e.prototype.signOut=function(e){return eP(this,void 0,void 0,(function(){var t;return tP(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),rP.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:rP.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:rP.debug("no Congito User pool"),n.label=8;case 8:return sP("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},e.prototype.cleanCachedItems=function(){return eP(this,void 0,void 0,(function(){return tP(this,(function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise((function(o,s){i.userSession(e).then((function(i){e.changePassword(t,n,(function(e,t){return e?(rP.debug("change password failure",e),s(e)):o(t)}),r)}))}))},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(kO.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){rP.debug("forgot password failure",t),sP("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){sP("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)}))},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(kO.EmptyUsername);if(!t)return this.rejectAuthError(kO.EmptyCode);if(!n)return this.rejectAuthError(kO.EmptyPassword);var i=this.createCognitoUser(e);return new Promise((function(o,s){i.confirmPassword(t,n,{onSuccess:function(){sP("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),o()},onFailure:function(t){sP("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},r)}))},e.prototype.currentUserInfo=function(){return eP(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return tP(this,(function(a){switch(a.label){case 0:return(e=this.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch((function(e){return rP.debug(e)}))];case 1:if(!(s=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(s)];case 3:t=a.sent(),n=this.attributesToObject(t),r=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=a.sent(),[3,7];case 6:return i=a.sent(),rP.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:s.getUsername(),attributes:n}];case 8:return o=a.sent(),rP.debug("currentUserInfo error",o),[2,{}];case 9:return"federated"===e?[2,(s=this.user)||{}]:[2]}}))}))},e.prototype.federatedSignIn=function(e,t,n){return eP(this,void 0,void 0,(function(){var r,i,o,s,a,c,u,l;return tP(this,(function(h){switch(h.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return xO(e)||(d=e)&&["customProvider"].find((function(e){return d.hasOwnProperty(e)}))||function(e){return e&&!!["customState"].find((function(t){return e.hasOwnProperty(t)}))}(e)||void 0===e?(a=xO(r=e||{provider:OO.Cognito})?r.provider:r.customProvider,xO(r),i=r.customState,this._config.userPoolId&&(o=PO(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,s=PO(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,s,o,a,i)),[3,4]):[3,1];case 1:a=e;try{(c=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&rP.warn("There is already a signed in user: "+c+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(f){}return[4,this.Credentials.set({provider:a,token:t.token,identity_id:t.identity_id,user:n,expires_at:t.expires_at},"federation")];case 2:return u=h.sent(),[4,this.currentAuthenticatedUser()];case 3:return l=h.sent(),sP("signIn",l,"A user "+l.username+" has been signed in"),rP.debug("federated sign in credentials",u),[2,u];case 4:return[2]}var d}))}))},e.prototype._handleAuthResponse=function(e){return eP(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,c,u,l,h,d,f;return tP(this,(function(p){switch(p.label){case 0:if(this.oAuthFlowInProgress)return rP.debug("Skipping URL "+e+" current flow in progress"),[2];p.label=1;case 1:if(p.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(sP("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(dw.browserOrNode().isBrowser?window.location.href:""),n=!!(Object(jb.parse)(t).query||"").split("&").map((function(e){return e.split("=")})).find((function(e){var t=nP(e,1)[0];return"code"===t||"error"===t})),r=!!(Object(jb.parse)(t).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){var t=nP(e,1)[0];return"access_token"===t||"error"===t})),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),p.label=2;case 2:return p.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=p.sent(),o=i.accessToken,s=i.refreshToken,a=i.state,c=new mx({IdToken:new dx({IdToken:i.idToken}),RefreshToken:new fx({RefreshToken:s}),AccessToken:new hx({AccessToken:o})}),u=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:u=p.sent(),rP.debug("AWS credentials",u),p.label=5;case 5:return l=/-/.test(a),(h=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),sP("signIn",h,"A user "+h.getUsername()+" has been signed in"),sP("cognitoHostedUI",h,"A user "+h.getUsername()+" has been signed in via Cognito Hosted UI"),l&&(d=a.split("-").splice(1).join("-"),sP("customOAuthState",d.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""),"State for user "+h.getUsername())),[2,u];case 6:return f=p.sent(),rP.debug("Error in cognito hosted auth response",f),sP("signIn_failure",f,"The OAuth response flow failed"),sP("cognitoHostedUI_failure",f,"A failure occurred when returning to the Cognito Hosted UI"),sP("customState_failure",f,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}}))}))},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t={};return e&&e.map((function(e){t[e.Name]="email_verified"===e.Name||"phone_number_verified"===e.Name?"true"===e.Value||!0===e.Value:e.Value})),t},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new Tx(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?kO.NoConfig:kO.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new Yx(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Qx(e))},e}())(null);Mb.a.register(aP);var cP=aP;let uP=(()=>{class e{constructor(){}configure(){console.log("[AnalyticsService.configure]: configuring AWA anlytics"),cP.configure({Auth:{identityPoolId:"us-east-1:5631e654-b278-490b-9617-42d366edc35d",region:Ec}}),IO.configure({Analytics:{disabled:!1,autoSessionRecord:!1,AWSPinpoint:{appId:"6fb0a35af65849a8ab889af1b701e2d0",region:Ec}}})}record(e,t,n){console.log(`[AnalyticsService.record]: name: ${e}, attributes: ${JSON.stringify(t)}, metrics: ${JSON.stringify(n)}`),IO.record(e,t,n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),lP=(()=>{class e{constructor(e,t,n,r,i,o){this.authService=e,this.document=t,this.translate=n,this.msTeams=r,this.fetchInterceptor=i,this.analyticsService=o,this.error="",this.window=this.document.defaultView,console.log("[AppComponent]: Initialising app..."),this.analyticsService.configure(),this.translate.setDefaultLang("en"),this.fetchInterceptor.init()}ngOnInit(){return Cf(this,void 0,void 0,(function*(){try{yield this.authService.init(),this.msTeams.initialize(this.window),this.msTeams.getContext(e=>{e&&(console.log("[AppComponent]: Setting language"),this.setLanguage(e))})}catch(e){this.error=e.message}}))}setLanguage(e){this.translate.use(e.locale.split("-")[0])}}return e.\u0275fac=function(t){return new(t||e)(No(Em),No(Ic),No(cy),No(ff),No(Cb),No(uP))},e.\u0275cmp=lt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&Vo(0,"router-outlet")},directives:[Kd],styles:[""]}),e})();class hP{}class dP{}class fP{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),r=n.toLowerCase(),i=e.slice(t+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof fP?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new fP;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof fP?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const i=e.value;if(i){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===i.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class pP{encodeKey(e){return gP(e)}encodeValue(e){return gP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function gP(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class mP{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pP,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.split("&").forEach(e=>{const r=e.indexOf("="),[i,o]=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new mP({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function yP(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function vP(e){return"undefined"!=typeof Blob&&e instanceof Blob}function bP(e){return"undefined"!=typeof FormData&&e instanceof FormData}class wP{constructor(e,t,n,r){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new fP),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new mP,this.urlWithParams=t}serializeBody(){return null===this.body?null:yP(this.body)||vP(this.body)||bP(this.body)||"string"==typeof this.body?this.body:this.body instanceof mP?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bP(this.body)?null:vP(this.body)?this.body.type||null:yP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof mP?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(c=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),c)),new wP(t,n,i,{params:c,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var _P=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({});class CP{constructor(e,t=200,n="OK"){this.headers=e.headers||new fP,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class SP extends CP{constructor(e={}){super(e),this.type=_P.ResponseHeader}clone(e={}){return new SP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class EP extends CP{constructor(e={}){super(e),this.type=_P.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new EP({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class TP extends CP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function AP(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let IP=(()=>{class e{constructor(e){this.handler=e}request(e,t,n={}){let r;if(e instanceof wP)r=e;else{let i=void 0;i=n.headers instanceof fP?n.headers:new fP(n.headers);let o=void 0;n.params&&(o=n.params instanceof mP?n.params:new mP({fromObject:n.params})),r=new wP(e,t,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Nu(r).pipe(wl(e=>this.handler.handle(e)));if(e instanceof wP||"events"===n.observe)return i;const o=i.pipe($u(e=>e instanceof EP));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(A(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return o.pipe(A(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return o.pipe(A(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return o.pipe(A(e=>e.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new mP).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,AP(n,t))}post(e,t,n={}){return this.request("POST",e,AP(n,t))}put(e,t,n={}){return this.request("PUT",e,AP(n,t))}}return e.\u0275fac=function(t){return new(t||e)(We(hP))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();class OP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const xP=new De("HTTP_INTERCEPTORS");let PP=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const kP=/^\)\]\}',?\n/;class RP{}let MP=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),UP=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new v(t=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((e,t)=>n.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&n.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();n.responseType="json"!==t?t:"text"}const r=e.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const t=1223===n.status?204:n.status,r=n.statusText||"OK",o=new fP(n.getAllResponseHeaders()),s=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return i=new SP({headers:o,status:t,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),c=null;204!==i&&(c=void 0===n.response?n.responseText:n.response),0===i&&(i=c?200:0);let u=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof c){const e=c;c=c.replace(kP,"");try{c=""!==c?JSON.parse(c):null}catch(l){c=e,u&&(u=!1,c={error:l,text:c})}}u?(t.next(new EP({body:c,headers:r,status:i,statusText:s,url:a||void 0})),t.complete()):t.error(new TP({error:c,headers:r,status:i,statusText:s,url:a||void 0}))},a=e=>{const{url:r}=o(),i=new TP({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});t.error(i)};let c=!1;const u=r=>{c||(t.next(o()),c=!0);let i={type:_P.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===e.responseType&&n.responseText&&(i.partialText=n.responseText),t.next(i)},l=e=>{let n={type:_P.UploadProgress,loaded:e.loaded};e.lengthComputable&&(n.total=e.total),t.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),e.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),t.next({type:_P.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),e.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(We(RP))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})();const NP=new De("XSRF_COOKIE_NAME"),DP=new De("XSRF_HEADER_NAME");class LP{}let jP=(()=>{class e{constructor(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=$c(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(We(Ic),We(Ua),We(NP))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),FP=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);const r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(We(LP),We(DP))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),VP=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(xP,[]);this.chain=e.reduceRight((e,t)=>new OP(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(We(dP),We(mo))},e.\u0275prov=ce({token:e,factory:e.\u0275fac}),e})(),HP=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:FP,useClass:PP}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:NP,useValue:t.cookieName}:[],t.headerName?{provide:DP,useValue:t.headerName}:[]]}}}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[FP,{provide:xP,useExisting:FP,multi:!0},{provide:LP,useClass:jP},{provide:NP,useValue:"XSRF-TOKEN"},{provide:DP,useValue:"X-XSRF-TOKEN"}]}),e})(),qP=(()=>{class e{}return e.\u0275mod=pt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[IP,{provide:hP,useClass:VP},UP,{provide:dP,useExisting:UP},MP,{provide:RP,useExisting:MP}],imports:[[HP.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})();class BP{constructor(e,t="/assets/i18n/",n=".json"){this.http=e,this.prefix=t,this.suffix=n}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}function zP(e){return new BP(e)}let GP=(()=>{class e{}return e.\u0275mod=pt({type:e,bootstrap:[lP]}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[{provide:ff,useValue:pf}],imports:[[Uu,wb,lv,qP,ly.forRoot({loader:{provide:Bm,useFactory:zP,deps:[IP]}})]]}),e})();(function(){if(gr)throw new Error("Cannot enable prod mode after platform setup.");pr=!1})(),Ru().bootstrapModule(GP).catch(e=>console.error(e))},zgjP:function(e,t,n){e.exports=self.fetch||(self.fetch=n("sEj0").default||n("sEj0"))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);
//# sourceMappingURL=main.f57ae4ee2e269a31509d.js.map